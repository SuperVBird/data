{"id":204457,"link":"https://chinadigitaltimes.net/chinese/2012/01/翻墙-ssh-via-http-proxy/","date":"2012-01-02T04:13:22Z","modified":"2012-01-02T04:13:22Z","title":"翻墙 | SSH via HTTP Proxy","content":"<p>原文：<a rel=\"nofollow\" target=\"_blank\" href=\"http://terrywang.net/archives/1321\">http://terrywang.net/archives/1321</a></p>\n<p>这是一个困扰我许久的问题，因为自己比较懒所以一直没有去就寻根问底，需要用到 SSH Tunnel 时就用 PuTTY 来绕过这个问题。</p>\n<p>问 题的产生：公司的网络环境需要走 HTTP Proxy 才能访问外部 Internet。工作机用 Ubuntu ，无论是在 Terminal  中手动设置 http_proxy 还是用 gnome-network-properties GUI 设置全局环境变量，对在命令行中用 ssh  都不起作用。</p>\n<p>解决方法： Debian/Ubuntu 下可以安装 connect-proxy 包，以下是包描述：</p>\n<p>Description: Establish TCP connection using SOCKS4/5 or HTTP tunnel<br />connect-proxy is a simple relaying command to make tunnel TCP connection<br /> via SOCKS or HTTPS proxies.<br />It is mainly intended to be used as proxy command of OpenSSH.</p>\n<p>安装后编辑一下 ~/.ssh/config 例如：</p>\n<p>## Servers outside the firewall, use HTTP proxy<br />Host <a rel=\"nofollow\" target=\"_blank\" href=\"http://my-ssh-server.com\">my-ssh-server.com</a><br /> ProxyCommand connect -H <a rel=\"nofollow\" target=\"_blank\" href=\"http://proxy.my-ssh-server.com:80\">proxy.my-ssh-server.com:80</a> %h %p<br />## Sites inside the firewall, do NOT use proxy<br />Host *<br />ProxyCommand connect %h %p</p>\n<p>保存，再试一下ssh 到我的ssh server搞定！</p>\n<p>更多 connect-proxy 的用法请 RTFM 哈。</p>\n<p>注意：这样的话也带来了另外一个问题，若切换到家中或其它不需要代理的环境，就会出现连不上我的ssh server 的情况。至于如何解决，大家自行动脑筋吧;-)<br />还是那句话：世上无难事，只怕有心人。</p>\n<p> </p>\n<div>翻越防火长城，你可以到达世界上的每一个角落。（Across the Great Firewall, you can reach every corner in the world.）翻墙利器赛风3下载地址：<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima326\"> http://dld.bz/caonima326</p>\n<p></a>，<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima745\">http://dld.bz/caonima745</a><img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-8497306537833511091?l=www.chinagfw.org\" width=\"1\" /></div>\n<p><img height=\"1\" src=\"http://feeds.feedburner.com/~r/ChinaGfw/~4/DGBMsQ6wwcA\" width=\"1\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<p><iframe src=\"https://docs.google.com/spreadsheet/embeddedform?formkey=dGRpN3FrVThuMFFsZHBZcmNGLW94dEE6MQ\" width=\"450\" height=\"309\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading&#8230;</iframe></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=738338\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"738338\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n<input type=\"submit\" value=\"订阅!\"><br />\n</form>\n","author":1005,"categories":[15300],"tags":[8795,8800,8817]}