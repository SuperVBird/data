{"id":229458,"link":"https://chinadigitaltimes.net/chinese/2012/06/翻墙-pdnsd-opendns-dnscrypt-解决-dns-spoofing/","date":"2012-06-05T14:08:45Z","modified":"2012-06-05T14:08:45Z","title":"翻墙 | pdnsd + opendns-dnscrypt 解决 DNS spoofing","content":"<p>原文：<a rel=\"nofollow\" target=\"_blank\" href=\"http://igfw.net/archives/9613\">http://igfw.net/archives/9613</a></p>\n<div></div>\n<div>\n<p>描述：</p>\n<blockquote>\n<p>本机 192.168.0.65，局域网内有一台空闲 Linux 主机 192.168.0.223（Ubuntu 11.04）。现在希望在 192.168.0.223 上搭建一个靠谱的、可抗 DNS spoofing 的 DNS Server，作为本机 192.168.0.65 的 DNS 服务器。</p>\n</blockquote>\n<p>  下面是步骤。</p>\n<p><strong>一、安装 dnscrypt 并启动</strong></p>\n<p>  首先下载 opendns-dnscrypt 的安装包并解压、安装：</p>\n<blockquote>\n<p>wget <a rel=\"nofollow\" title=\"http://cloud.github.com/downloads/opendns/dnscrypt-proxy/dnscrypt-proxy-0.9.3.tar.gz\" target=\"_blank\" href=\"http://cloud.github.com/downloads/opendns/dnscrypt-proxy/dnscrypt-proxy-0.9.3.tar.gz\">http://cloud.github.com/downloads/opendns/dnscrypt-proxy/dnscrypt-proxy-0.9.3.tar.gz</a><br />  tar zxvf dnscrypt-proxy-0.9.3.tar.gz<br />cd dnscrypt-proxy-0.9.3<br />./configure &#038;&#038; make –j2<br />sudo make install</p>\n</blockquote>\n<p>  因为我们希望 192.168.0.223 作为 DNS Server 对外提供 DNS 服务，所以：（1）要安装 pdnsd（see 下一节）；（2）要将 dnscrypt 开在别的端口（!= 53）上，以作为 pdnsd 的 server：</p>\n<blockquote>\n<p>sudo dnscrypt-proxy –local-port=50 –daemonize</p>\n</blockquote>\n<p>请注意，local-port 和 daemonize 前是两个连接符（-）。</p>\n<p>  <strong>二、安装 pdnsd 并设置</strong></p>\n<blockquote>\n<p>sudo apt-get install pdnsd</p>\n</blockquote>\n<p>  编辑其配置文件 /etc/pdnsd.conf，改动两个地方：</p>\n<p>（1）设置 pdnsd 的 NS Server 为 dnscrypt：</p>\n<p align=\"center\">  <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.geektu.com/blog/wp-content/uploads/2012/04/image.png\"><img title=\"image\" src=\"http://www.geektu.com/blog/wp-content/uploads/2012/04/image_thumb.png\" alt=\"image\" width=\"225\" height=\"173\" /></a></p>\n<p>（2）使得 pdnsd 可以为其他机器提供服务：</p>\n<p align=\"center\">  <a rel=\"nofollow\" target=\"_blank\" href=\"http://www.geektu.com/blog/wp-content/uploads/2012/04/image1.png\"><img title=\"image\" src=\"http://www.geektu.com/blog/wp-content/uploads/2012/04/image_thumb1.png\" alt=\"image\" width=\"608\" height=\"104\" /></a></p>\n<p><strong>三、启动 pdnsd，测试</strong></p>\n<p>使得 pdnsd 作为 daemon 启动：</p>\n<blockquote>\n<p>sudo vim /etc/default/pdnsd</p>\n</blockquote>\n<p>  修改 START_DAEMON 的值为 yes。</p>\n<p>启动 pdnsd：</p>\n<blockquote>\n<p>sudo /etc/init.d/pdnsd start</p>\n</blockquote>\n<p align=\"center\">~~~~~~</p>\n<p>  大功告成。将工作机的 DNS 设置为 192.168.0.223，并测试：</p>\n<p><a rel=\"nofollow\" target=\"_blank\" href=\"http://www.geektu.com/blog/wp-content/uploads/2012/04/image2.png\"><img title=\"image\" src=\"http://www.geektu.com/blog/wp-content/uploads/2012/04/image_thumb2.png\" alt=\"image\" width=\"388\" height=\"361\" /></a></p>\n<p>完工。兔子终于正常了 = = 恢复了原来本色~</p>\n<p><strong>原文</strong>：<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.geektu.com/?p=882\">http://www.geektu.com/?p=882</a></p>\n<p>========</p>\n<p><strong>DNS加密工具发布Windows版</strong></p>\n<p>OpenDNS去年底<a rel=\"nofollow\" target=\"_blank\" href=\"http://internet.solidot.org/article.pl?sid=11/12/09/0956213&#038;tid=100\">发布了</a>一个预览版本的<a rel=\"nofollow\" target=\"_blank\" href=\"https://www.opendns.com/technology/dnscrypt/\">DNSCrypt</a>，加密DNS流量，阻止常见的DNS攻击，如重放攻击、观察攻击、时序攻击、中间人攻击和解析伪造攻击。DNSCrypt支持OS X、BSD和Linux，现在它发布了Windows版本。你可以从<a rel=\"nofollow\" target=\"_blank\" href=\"http://shared.opendns.com/dnscrypt/packages/windows-client/DNSCryptWin-v0.0.4.exe\">官方下载</a>或从GitHub<a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/opendns/dnscrypt-win-client\">下载</a>。</p>\n<p><strong><img title=\"更多...\" src=\"http://igfw.net/wp-includes/js/tinymce/plugins/wordpress/img/trans.gif\" alt=\"\" />来源</strong>：<a rel=\"nofollow\" target=\"_blank\" href=\"http://it.solidot.org/article.pl?sid=12/05/16/0133225\">http://it.solidot.org/article.pl?sid=12/05/16/0133225</a></p>\n<p>OpenDNS官网介绍：<a rel=\"nofollow\" target=\"_blank\" href=\"https://www.opendns.com/technology/dnscrypt/\">https://www.opendns.com/technology/dnscrypt/</a></p>\n<p>  以前我在“<strong>DNSCrypt – 一个加密DNS传输的工具（可防止GFW的DNS污染）</strong>：<a rel=\"nofollow\" target=\"_blank\" href=\"http://igfw.net/archives/8518\">http://igfw.net/archives/8518</a>”一文中做过详细介绍，需要的可以看看。</p>\n</div>\n<div>请为我们投票：<a rel=\"nofollow\" target=\"_blank\" href=\"https://thebobs.com/chinese/category/2012/best-blog-2012/\">https://thebobs.com/chinese/category/2012/best-blog-2012/</a>。点击<a rel=\"nofollow\" target=\"_blank\" href=\"https://mycdt4.info/chinese/\">https://mycdt4.info/chinese/</a>，穿墙访问《中国数字时代》。《中国数字时代》开通IPv6，欢迎穿墙阅读。翻越防火长城，你可以到达世界上的每一个角落。（Across the Great Firewall, you can reach every corner in the world.）翻墙利器赛风3下载地址：<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima326\n\n\"> http://dld.bz/caonima326</p>\n<p></a>，<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima745\">http://dld.bz/caonima745</a><img width=\"1\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-2513750817407711533?l=www.chinagfw.org\" alt=\"\" /></div>\n</p>\n<p><img src=\"http://chinadigitaltimes.net/chinese/files/2012/06/8135fa62image_thumb.png-150x150.png\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<p><iframe src=\"https://docs.google.com/spreadsheet/embeddedform?hl=zh-CN&#038;formkey=dGRpN3FrVThuMFFsZHBZcmNGLW94dEE6MQ\" width=\"510\" height=\"328\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading&#8230;</iframe></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=738338\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\">  <input type=\"submit\" id=\"in_post_subscribe\" value=\"订阅!\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"738338\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n</form>\n","author":1005,"categories":[18269,15300],"tags":[7775,8795,8817]}