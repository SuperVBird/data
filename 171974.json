{"id":171974,"link":"https://chinadigitaltimes.net/chinese/2011/08/google-host-patch自动获取脚本/","date":"2011-08-13T10:30:35Z","modified":"2011-08-13T10:30:35Z","title":"Google Host Patch自动获取脚本","content":"<p>来源：<a href=\"http://logicmd.net/2011/07/automatically-get-google-host-patch-script/\">http://logicmd.net/2011/07/automatically-get-google-host-patch-script/</a></p>\n<p><span><a href=\"http://logicmd.net/tag/google/\" title=\"查看 Google 中的全部文章\">Google</a></span>最近发布了<span><a href=\"http://logicmd.net/tag/google/\" title=\"查看 Google 中的全部文章\">Google</a></span> Plus，但是几乎是刚刚一发布就无法访问，同时面对着GMail，<span><a href=\"http://logicmd.net/tag/google/\" title=\"查看 Google 中的全部文章\">Google</a></span>搜索越来越频繁的连接阻断问题，我们急需要一个方案来更方便的访问Google服务。<br />  如果在校园网中，IPv6无疑是一个良好的解决方案，<a href=\"http://logicmd.net/2010/04/high-speed-visiting-abroad-websites-using-ipv6/\" title=\"ipv6高速访问国外网站\">本博这篇文章</a>给出了相关方法，在<span><a href=\"http://logicmd.net/tag/google/\" title=\"查看 Google 中的全部文章\">Google</a></span> Code上也有一个<a href=\"http://code.google.com/p/ipv6-hosts/source/browse/hosts\" rel=\"nofollow\">Project</a>专门维护<span><a href=\"http://logicmd.net/tag/google/\" title=\"查看 Google 中的全部文章\">Google</a></span> IPv6的<span><a href=\"http://logicmd.net/tag/host/\" title=\"查看 Host 中的全部文章\">Host</a></span>列表。</p>\n<p>但是在没有IPv6环境的情况，这个自动脚本就有了意义。本脚本最初来自<span><a href=\"http://logicmd.net/tag/google/\" title=\"查看 Google 中的全部文章\">Google</a></span>+ 上的<a href=\"https://plus.google.com/102216617437795883914/about\" rel=\"nofollow\">Felix Hsu</a>，他已发布<a href=\"https://plus.google.com/102216617437795883914/posts/EzYX2HJjm61\" rel=\"nofollow\">正式版</a>，但是我还是个人更喜欢这个version 3一些~ XD</p>\n<p>Windows Vista/7用户在开启UAC的情况下需要&#8221;右键->以管理员的身份运行&#8221;</p>\n<p><a href=\"http://logicmd.net/wp-content/uploads/2011/07/hostsp_v3.bat\" rel=\"nofollow\">点击此下载该脚本</a><br /><a href=\"http://notepad.cc/share/BWO1qYB1cM\" rel=\"nofollow\">超级懒人版</a> <br /><span></span> </p>\n<pre title=\"hostsp_v3.bat\">@echo off REM 欢迎圈我,在顶栏的\"查找人员\"处输入Felix Hsu即可 REM Mod by logicmd REM 准备工作,先清一下DNS缓存,再备份hosts ipconfig /flushdns cls  REM 测试时有的朋友会不耐烦的点掉,咱提示一下: echo Google+ hosts自动修改脚本 echo 请稍等一下,正在通过网络获取可用IP  REM 然后ping <a href=\"http://www.google.cn\">www.google.cn</a>和<a href=\"http://www.google.com\">www.google.com</a>以获取最新的IP,赋值%CNIP%和%COMIP% REM ping <a href=\"http://ditu.google.cn\">ditu.google.cn</a>获取最新的IP,赋值%MAPIP%  for /f \"tokens=2 delims=[]\" %%i in (&#39;ping <a href=\"http://www.g.cn\">www.g.cn</a>&#39;) do set CNIP=%%i for /f \"tokens=2 delims=[]\" %%i in (&#39;ping <a href=\"http://www.l.google.com\">www.l.google.com</a>&#39;) do set COMIP=%%i for /f \"tokens=2 delims=[]\" %%i in (&#39;ping <a href=\"http://ditu.google.cn\">ditu.google.cn</a>&#39;) do set MAPIP=%%i  REM 找到之前改过的行,删掉,很stupid的方法... type %windir%System32driversetchosts|find \"#THISISNOTE\" /i /v|find \"#Google Plus\" /i /v|findstr \".\" >>%windir%System32driversetchosts2 ren %windir%System32driversetchosts hosts3 ren %windir%System32driversetchosts2 hosts del hosts3 /s /q  REM 为了美观和避免直接在文件末尾添加的惨剧,咱空一行 echo.  >>%windir%System32driversetchosts echo #Google Plus >>%windir%System32driversetchosts  REM 把获取到的%CNIP%和%COMIP%给写进去,为了方便以后可以删除,加了一个#THISISNOTE 的注释,我实在是想不出怎么做了,望见谅 echo %CNIP% <a href=\"http://plus.google.com\">plus.google.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://talkgadget.google.com\">talkgadget.google.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %COMIP% <a href=\"http://picasaweb.google.com\">picasaweb.google.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %COMIP% <a href=\"http://lh1.ggpht.com\">lh1.ggpht.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %COMIP% <a href=\"http://lh2.ggpht.com\">lh2.ggpht.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %COMIP% <a href=\"http://lh3.ggpht.com\">lh3.ggpht.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %COMIP% <a href=\"http://lh4.ggpht.com\">lh4.ggpht.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %COMIP% <a href=\"http://lh5.ggpht.com\">lh5.ggpht.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %COMIP% <a href=\"http://lh6.ggpht.com\">lh6.ggpht.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://lh6.googleusercontent.com\">lh6.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://lh5.googleusercontent.com\">lh5.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://lh4.googleusercontent.com\">lh4.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://lh3.googleusercontent.com\">lh3.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://lh2.googleusercontent.com\">lh2.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://lh1.googleusercontent.com\">lh1.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://plus.google.com.hk\">plus.google.com.hk</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://plusone.google.com\">plusone.google.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://s2.googleusercontent.com\">s2.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://s1.googleusercontent.com\">s1.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://images1-focus-opensocial.googleusercontent.com\">images1-focus-opensocial.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://images2-focus-opensocial.googleusercontent.com\">images2-focus-opensocial.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://images3-focus-opensocial.googleusercontent.com\">images3-focus-opensocial.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://images4-focus-opensocial.googleusercontent.com\">images4-focus-opensocial.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://images5-focus-opensocial.googleusercontent.com\">images5-focus-opensocial.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://images6-focus-opensocial.googleusercontent.com\">images6-focus-opensocial.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://images-pos-opensocial.googleusercontent.com\">images-pos-opensocial.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://maps-api-ssl.google.com\">maps-api-ssl.google.com</a> #THISISNOTE >>%windir%System32driversetchosts echo #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://www.google.com.hk\">www.google.com.hk</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://www.google.com\">www.google.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://webcache.googleusercontent.com\">webcache.googleusercontent.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://mail.google.com\">mail.google.com</a> #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://www.googlelabs.com\">www.googlelabs.com</a> #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://docs.google.com\">docs.google.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://plus.google.com\">plus.google.com</a> #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://profiles.google.com\">profiles.google.com</a> #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://services.google.com\">services.google.com</a> #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://clients4.google.com\">clients4.google.com</a> #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://clients2.google.com\">clients2.google.com</a> #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://chrome.google.com\">chrome.google.com</a> #THISISNOTE >>%windir%System32driversetchosts echo %CNIP% <a href=\"http://tools.google.com\">tools.google.com</a> #THISISNOTE >>%windir%System32driversetchosts   REM 把获取到的%MAPIP% echo %MAPIP% <a href=\"http://maps.google.com\">maps.google.com</a>  #THISISNOTE >>%windir%System32driversetchosts echo %MAPIP% <a href=\"http://ditu.google.com\">ditu.google.com</a>  #THISISNOTE >>%windir%System32driversetchosts    REM ok,搞定 echo 您的hosts编辑完成. REM 按任意键继续的功能千万别有,否则别人问你按任意键是神马意思的话...</pre>\n<blockquote>\n<p>分享一个现成的<span><a href=\"http://logicmd.net/tag/host/\" title=\"查看 Host 中的全部文章\">Host</a></span>s给伸手党们~ <a href=\"http://goo.gl/Tx7H5\" rel=\"nofollow\">http://goo.gl/Tx7H5</a></p>\n</blockquote>\n<h2>FAQ[<a href=\"http://logicmd.net/#c1\">1</a>]</h2>\n<ul>\n<li>这些IP是否可靠？</li>\n</ul>\n<p>这些IP都来自于<span><a href=\"http://logicmd.net/tag/google/\" title=\"查看 Google 中的全部文章\">Google</a></span>CN在BJ的数据中心，包括大约30个C段IP（203.208.32.0 � 203.208.63.255）</p>\n<ul>\n<li>这些IP都在国内理论上将是否能够一直可用？</li>\n</ul>\n<p>不能保证未来的可用性。</p>\n<ul>\n<li>用这些<span><a href=\"http://logicmd.net/tag/host/\" title=\"查看 Host 中的全部文章\">Host</a></span>是否意味着Google用户的Mail/Plus/Picasa存在BJ的数据中心的呢？还是采用的反向代理或者隧道一类的技术？</li>\n</ul>\n<p>只是反向代理，谷歌分布式系统中的 Web server 部分，参见 [<a href=\"http://logicmd.net/#c2\">2</a>]。</p>\n<h2>Promotion</h2>\n<p>最后，荒淫大家来<a href=\"http://gplus.to/logicmd\" rel=\"nofollow\">圈</a>我。</p>\n<p><a href=\"http://logicmd.net/wp-content/uploads/2011/07/moving_to_Gplus.png\"><img alt=\"\" height=\"674\" src=\"http://logicmd.net/wp-content/uploads/2011/07/moving_to_Gplus.png\" title=\"moving_to_Gplus\" width=\"460\" /></a><br /> <a name=\"c1\"></a> [1]<a href=\"http://www.zhihu.com/question/19749678\" rel=\"nofollow\">http://www.zhihu.com/question/19749678</a><br /><a name=\"c2\"></a> [2][Micro&#8217;03] Web search for a planet: The Google cluster architecture <a href=\"http://static.googleusercontent.com/external_content/untrusted_dlcp/labs.google.com/en//papers/googlecluster-ieee.pdf\" rel=\"nofollow\">http://static.googleusercontent.com/external_content/untrusted_dlcp/labs.google.com/en//papers/googlecluster-ieee.pdf</a></p>\n<p></p>\n<h4>―――――――――――――――――――――――――――――――――――――――――</h4>\n<h4>需要翻墙利器? 请<a href=\"http://www.chinagfw.org/2011/04/wuala_18.html?utm_source=feedburner&#038;utm_medium=feed&#038;utm_campaign=Feed%3A+chinagfwblog+%28GFW+Blog%EF%BC%88%E5%8A%9F%E5%A4%AB%E7%BD%91%E4%B8%8E%E7%BF%BB%E5%A2%99%EF%BC%89%29\">安装Wuala</a>，查找和添加gfwblog为好友，就可高速下载翻墙软件，或访问<a href=\"http://tinyurl.com/gfwblog\"><b>http://tinyurl.com/gfwblog</b></a>直接下载。</p>\n<p>推特用户请点击<a href=\"http://qinzhigang.in/login.php\">这里</a>免翻墙上推特</h4>\n<p>请点击<a href=\"https://sesawe.net/-Tools-zh-.html\">这里</a>下载翻墙软件 </p>\n<p>更多翻墙方法请发电邮(最好用Gmail)到：<a href=\"mailto:fanqiang70ma@gmail.com\">fanqiang70ma@gmail.com</a>  </p>\n<p>请阅读和关注<a href=\"https://www.google.com/profiles/112915952962578336480\">中国数字时代</a>、翻墙技术博客<a href=\"https://www.google.com/profiles/chinagfwblog\">GFW BLOG</a>（免翻墙）  </p>\n<p>请使用<a href=\"https://www.google.com/reader/view/\">Google Reader</a><a href=\"https://www.google.com/reader/view/feed/http://chinadigitaltimes.net/chinese/feed\">订阅中国数字时代中文版</a>（<a href=\"http://chinadigitaltimes.net/chinese/feed\">http://chinadigitaltimes.net/chinese/feed</a>），阅读最有价值的中文信息；以及<a href=\"https://www.google.com/reader/view/feed/http://feeds2.feedburner.com/chinagfwblog\">GFW BLOG（功夫网与翻墙）</a><a href=\"http://feeds2.feedburner.com/chinagfwblog\">http://feeds2.feedburner.com/chinagfwblog</a>，获取最新翻墙工具和翻墙技巧信息。</p>\n<p>  </p>\n<div>推特用户请点击<a href=\"http://edu20.in/login.php\">这里</a>免翻墙上推特<wbr><br />\n点击<a href=\"http://fanqiangsesawe.info\">这里</a>下载翻墙软件<br />\n更多翻墙方法请发电邮(最好用Gmail)到:gongminshehui1@gmail.com<br />\n翻墙技术博客<a href=\"https://www.google.com/profiles/chinagfwblog\">GFW BLOG</a>（免翻墙）<br />\n阅读<a href=\"http://www.google.com/profiles/112915952962578336480\">中国数字时代</a>（免翻墙）<img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-3658642821910689692?l=www.chinagfw.org\" width=\"1\" /></div>\n<div>\n<a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=BfMIBgL4Rqs:gWcNxslhsTc:yIl2AUoC8zA\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=yIl2AUoC8zA\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=BfMIBgL4Rqs:gWcNxslhsTc:-BTjWOF_DHI\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=BfMIBgL4Rqs:gWcNxslhsTc:-BTjWOF_DHI\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=BfMIBgL4Rqs:gWcNxslhsTc:F7zBnMyn0Lo\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=BfMIBgL4Rqs:gWcNxslhsTc:F7zBnMyn0Lo\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=BfMIBgL4Rqs:gWcNxslhsTc:V_sGLiPBpWU\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=BfMIBgL4Rqs:gWcNxslhsTc:V_sGLiPBpWU\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=BfMIBgL4Rqs:gWcNxslhsTc:qj6IDK7rITs\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=qj6IDK7rITs\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=BfMIBgL4Rqs:gWcNxslhsTc:l6gmwiTKsz0\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=l6gmwiTKsz0\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=BfMIBgL4Rqs:gWcNxslhsTc:gIN9vFwOqvQ\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=BfMIBgL4Rqs:gWcNxslhsTc:gIN9vFwOqvQ\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=BfMIBgL4Rqs:gWcNxslhsTc:TzevzKxY174\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=TzevzKxY174\" /></a>\n</div>\n<p><img height=\"1\" src=\"http://feeds.feedburner.com/~r/chinagfwblog/~4/BfMIBgL4Rqs\" width=\"1\" /></p>\n<p><img src=\"http://chinadigitaltimes.net/chinese/files/2011/08/2651322fng_to_Gplus.png-150x150.png\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=738338\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"738338\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n<input type=\"submit\" value=\"订阅!\"><br />\n</form>\n","author":526,"categories":[15300],"tags":[8795]}