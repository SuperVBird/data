{"id":119190,"link":"https://chinadigitaltimes.net/chinese/2010/11/facebook-针对-mysql-开源-online-schema-change-代码-2/","date":"2010-11-03T12:58:03Z","modified":"2010-11-03T12:58:03Z","title":"Facebook 针对 MySQL 开源 Online Schema Change 代码","content":"<p><p> By：<a href=\"http://www.dbanotes.net\">Fenng</a> posted @ <a href=\"http://www.dbanotes.net/\">dbanotes.net</a>. <a href=\"http://www.dbanotes.net/index.xml\">RSS</a> | Ad.<a href=\"http://www.infoq.com/cn/vendorcontent/show.action?vcr=1047\">Adobe Flash Builder 4 简体中文正式版下载</a></p>\n<p>有过 MySQL 使用经验的人应该知道，MySQL 要想在线修改个 Schema 结构是个麻烦事，规模不大的表增加个索引造成的锁也可能导致整个 Web 应用宕机。这一点没办法和 Oracle RDBMS 、DB2 等商业数据库相比，甚至 PostgreSQL 也具备联机 DML 的能力。我在过去写过一系列并不成熟的<a href=\"http://www.dbanotes.net/database/mysql_comment.html\">《MySQL 大企业级应用可行性分析》</a> 文章中，也很是担忧这个问题。有些公司想迁移到 MySQL ，也因此而只能采取保守的做法。</p>\n<p>不过现在这个缺陷临近被彻底修复。Facebook 的数据库技术团队将 <a href=\"http://bazaar.launchpad.net/~mysqlatfacebook/mysqlatfacebook/tools/annotate/head:/osc/OnlineSchemaChange.php\">Online Schema Change</a> （OSC) 的代码开源，并且撰文进行了详尽的<a href=\"http://www.facebook.com/notes/mysql-at-facebook/online-schema-change-for-mysql/430801045932\">阐述</a>。这是个很大的技术革新，Facebook 数千台 MySQL 服务器在过去增加个索引需要几个月的滚动升级，现在只需要几天即可。</p>\n<p>MySQL 5.1 的 InnoDB 引擎具备 Fast Index Creation 的功能，在创建索引的时候无需复制整个表的内容，但是对于一定规模的大表增加索引，仍然需要花费大量时间，对于在线应用来说，仍然不可忍受。而 Facebook 的 OSC 则进一步进行了改进。对于 MySQL DBA 来说，这是个福音。感谢 Facebook 的员工 Vamsi Ponnekanti 的工作。如果要我说，年度 MySQL DBA 应该授予给他。当然，Online Schema Change 的部分代码从  Shlomi Noach 的 <a href=\"http://code.openark.org/forge/openark-kit\">Openark Kit</a> 中派生，建议 Shlomi Noach 一同获奖&#8230;</p>\n<p>对于 MySQL 来说，我认为这是个里程碑式的时刻，无论 Oracle 将给与 MySQL 多大的投入，其它公司已经主动拿过接力棒。Facebook 技术团队再次立功了！</p>\n<p>&#8211;EOF&#8211;</p>\n<p>Update: Facebook 工程师在帖子里说了&#8221;Note that the above operations can be done within the storage engine itself, or using an external (PHP) script.&#8221; 要知道，这并非只是一个 PHP 脚本的实现。我建议技术人员看帖子应该更仔细一些。也不要说这东西你早都想到了之类的技术阿Q的话，我倒现在为止没听到国内一个公司的技术人员做出来这东西。从想法到实现，其实还有十万八千零一公里呢。</p>\n</p>\n<hr>\n<p><strong>最近文章|Recent Articles</strong></p>\n<ul>\n<li><a href=\"http://www.dbanotes.net/opensource/mysql_sunday.html\">MySQL Sunday 见闻</a></li>\n<li><a href=\"http://www.dbanotes.net/review/Javaone_Google.html\">JavaOne （图片）</a></li>\n<li><a href=\"http://www.dbanotes.net/review/oracle_cloud_computing.html\">Oracle Cloud Computing</a></li>\n<li><a href=\"http://www.dbanotes.net/sitelog/movable_type_wide_character_in_subroutine_entry_bug.html\">Movable Type 的 wide character in subroutine entry Bug</a></li>\n</ul>\n<p>本站赞助商：<a href=\"http://www.douban.com/\">豆瓣网</a></p>\n<p><strong> 评论数(4)|<a href=\"http://www.dbanotes.net/opensource/facebook_mysql_online_schema_change.html#comments\" title=\"Comment on: Facebook 针对 MySQL 开源 Online Schema Change 代码\">添加评论</a></strong> | 最近作者还说了什么? Follow <a href=\"http://www.twitter.com/fenng\">Fenng@Twitter</a><br />本文网址：<a href=\"http://www.dbanotes.net/opensource/facebook_mysql_online_schema_change.html\">http://www.dbanotes.net/opensource/facebook_mysql_online_schema_change.html</a></p>\n<p>DBA Notes 理念: 用简约的技术取得最大的收益&#8230;</p>\n<div name=\"ClickComments\"></div>\n<div>\n<a href=\"http://feeds.feedburner.com/~ff/webarch?a=iexJQdasDxw:koLcp_C5vLw:yIl2AUoC8zA\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/webarch?d=yIl2AUoC8zA\" /></a> <a href=\"http://feeds.feedburner.com/~ff/webarch?a=iexJQdasDxw:koLcp_C5vLw:qj6IDK7rITs\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/webarch?d=qj6IDK7rITs\" /></a> <a href=\"http://feeds.feedburner.com/~ff/webarch?a=iexJQdasDxw:koLcp_C5vLw:F7zBnMyn0Lo\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/webarch?i=iexJQdasDxw:koLcp_C5vLw:F7zBnMyn0Lo\" /></a> <a href=\"http://feeds.feedburner.com/~ff/webarch?a=iexJQdasDxw:koLcp_C5vLw:V_sGLiPBpWU\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/webarch?i=iexJQdasDxw:koLcp_C5vLw:V_sGLiPBpWU\" /></a> <a href=\"http://feeds.feedburner.com/~ff/webarch?a=iexJQdasDxw:koLcp_C5vLw:mqyYa2mfVbY\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/webarch?d=mqyYa2mfVbY\" /></a> <a href=\"http://feeds.feedburner.com/~ff/webarch?a=iexJQdasDxw:koLcp_C5vLw:I9og5sOYxJI\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/webarch?d=I9og5sOYxJI\" /></a> <a href=\"http://feeds.feedburner.com/~ff/webarch?a=iexJQdasDxw:koLcp_C5vLw:bcOpcFrp8Mo\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/webarch?d=bcOpcFrp8Mo\" /></a>\n</div></p>\n","author":176,"categories":[9203],"tags":[]}