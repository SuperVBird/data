{"id":280092,"link":"https://chinadigitaltimes.net/chinese/2013/02/翻墙-vps开设最低权限的ssh帐号，用于上网代理/","date":"2013-02-20T16:00:13Z","modified":"2013-02-20T16:00:13Z","title":"翻墙 | vps开设最低权限的ssh帐号，用于上网代理","content":"<p><span></p>\n<p>网上这类的教程很多，一搜很多，但是很少能成功用在dropbear这个ssh服务器下的。<br />网上的教程最关键的一般就是两步：<br />增加一个linux用户，并赋予该用户一个nologin的shell权限。<code>useradd username -s /sbin/nologin</code>设置该用户密码。<code>passwd username</code>username 即时你要设定的用户名，可自行修改。</p>\n<p>一个ssh连接，在sshd（openssh）下，要开两个进程，大概好几m的内存。<br />但在dropbear下，一个ssh连接只需要一个进程，内存占用大概600k。<br />而且根据个人感观，dropbear登录要快一点，很多嵌入设备也采用的是dropbear。<br />如果你是想开ssh帐号出售或者给朋友用，显然dropbear更节省内存，也更划算，因为同时连接的数量多，也不会占用太多内存而影响vps正常运行。</p>\n<p>但如果vps上的ssh服务器不是sshd（openssh），而是dropbear的话，这样设置是不能成功的。<br />不信你去淘宝买ssh帐号，都是用openssh做的ssh服务器。</p>\n<p><strong>问题出在哪里？<br />问题在/etc/shells，这个文件中，有时候并没有添加/sbin/nologin。所以即便你给一个帐号赋予/sbin/nologin，也不能生效。<br />解决的办法，就是在/etc/shells添加一行/sbin/nologin，然后再添加帐号即可。</strong>命令如下：<br /><code>cat >> /etc/shells << END<br />/sbin/nologin<br />END<br />useradd username -s /sbin/nologin<br />echo username:password </p>\n<p>原文：<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.benmao.com/archives/1772\">http://www.benmao.com/archives/1772</a></span></p>\n<div>获取最新穿墙软件？请发电邮（最好用gmail）到：cdtcaonima@gmail.com。《中国数字时代》开通IPv6，欢迎穿墙阅读。翻越防火长城，你可以到达世界上的每一个角落。（Across the Great Firewall, you can reach every corner in the world.）翻墙利器赛风3下载地址：<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima326\n\n\"> http://dld.bz/caonima326</p>\n<p></a>，<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima745\">http://dld.bz/caonima745</a></div>\n<p></code></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<p><iframe src=\"https://docs.google.com/spreadsheet/embeddedform?hl=zh-CN&#038;formkey=dGRpN3FrVThuMFFsZHBZcmNGLW94dEE6MQ\" width=\"510\" height=\"328\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading&#8230;</iframe></p>\n<form method=\"POST\" action=\"http://chinadigitaltimes.us4.list-manage.com/subscribe/post?u=17daa75df533f6c6ff72e51ab&#038;id=b4fd4ae247\">\n<a href=\"http://eepurl.com/mstlf\">墙外新闻实时更新 欢迎订阅数字时代</a><br />\n <br /><input type=\"email\" value=\"\" name=\"EMAIL\" id=\"mce-EMAIL_in_post\" size=\"25\" style=\"display:block;\" placeholder=\"请输入您的邮件地址\" required><br />\n\t<input type=\"submit\" value=\"点击订阅\" name=\"subscribe\" style=\"height: 20px;\" id=\"in_post_subscribe\"><br />\n</form>\n","author":1005,"categories":[18269,15300],"tags":[7775]}