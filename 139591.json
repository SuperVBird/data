{"id":139591,"link":"https://chinadigitaltimes.net/chinese/2011/03/如何搭建一枚长期可用的twitter-api/","date":"2011-03-12T04:03:38Z","modified":"2011-03-12T04:03:38Z","title":"如何搭建一枚长期可用的twitter API","content":"<p>来源：<a href=\"http://kxboy.com/web-skills/twitter-api.html\">http://kxboy.com/web-skills/twitter-api.html</a></p>\n<p>因为开会，为了营造和谐友好的两会氛围，互联网中间那堵无形的&#8221;墙&#8221;又悄无声息的加高了许多。于是乎，很多Api都被挂掉了。twitter上哀声四起，到处是骂娘的，求可用API的。</p>\n<p>就我个人了解上twitter的办法无非是这几个：</p>\n<p><strong>用SSH或者VPN</strong>，会用这2种办法翻墙的朋友，大多都是Firefox或者Chrome用户，可以直接上twitter官网。想稳定，还是推荐花2包香烟钱，买一年的付费SSH或者VPN服务，图个稳定安省，没有那么多后顾之忧。</p>\n<p><strong>Gtap搭建Api</strong>，可参看教程：<a href=\"http://www.tellbay.com/?p=132\">用GAE架设Twitter API-GTAP</a>,不过在这个敏感的时候，Appspot似乎永远都是第一个死掉的API，或许是它出身Google，树大招风的原因。</p>\n<p><span></span></p>\n<p><strong>Twip搭建Api</strong>，可参考教程：<a href=\"http://blog.lihoo.it/archives/35\">利用twip4搭建oauth功能Twitter API</a>，前几天两会还没开幕，国外网站上正为一朵花吵来闹去的时候，我用twip4搭建的api就挂掉了。我测试了一下，Api的主域名<a href=\"http://xxx.com/\">http://xxx.com</a>没有任何问题，可以正常打开，但是一打开<a href=\"http://xxx.com/twip\">http://xxx.com/twip</a>这样的路径就会网页重置。在twitter上看到有人提示是twip遭遇url关键词撞墙。于是我把twip这个文件夹的名字改成了网上常用的news，然后编辑config.php文件，把 define(&#8216;BASE_URL&#8217;,&#8217;<strong>这里填写Callback URL，如<a href=\"http://lihoo.it/twip/\">http://lihoo.it/twip/</a></strong>&#8216;);改成了<a href=\"http://xxx.com/news/\">http://xxx.com/news/</a>这样的路径。然后重新测试Api，发现API原地满血复活了。</p>\n<p>有了这次的教训，我在robots.txt加上了这么一句</p>\n<pre>User-agent: *<br>Disallow: /news/</pre>\n<p>屏蔽所有搜索引擎的爬虫访问News文件夹。<br /><strong>自建Dabr或者推特中文圈：</strong><br /> 1）自建Dabr可参考小众软件的安装教程：<a href=\"http://knol.google.com/k/dabr-%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B\">Dabr 安装教程</a> </p>\n<p>2）自从Twitter的api强制Oauth登陆以后，自然光这样安装Dabr还不够，还要安装itap，教程：<a href=\"http://www.bum2.com/2010/10/itap-%E6%8E%A8%E7%89%B9-oauth-%E4%BB%A3%E7%90%86%E6%94%AF%E6%8C%81dabr%E6%8E%A8%E7%89%B9%E4%B8%AD%E6%96%87%E5%9C%88twip.html\">iTAP 推特 OAuth 代理支持Dabr/推特中文圈/Twip</a></p>\n<p>3）为了保证Dabr的私密性和安全性，我重新申请了一个新的域名，在根目录里直接安装Dabr，同时我把itap文件夹重命名成了blog，另外屏蔽了所有搜索引擎的爬虫。</p>\n<p>====================</p>\n<p>这几天，给我的感觉就是，如果要搭建一枚可靠的API，最关键的就是低调，还是低调。</p>\n<p>无论改文件夹名字伪装也好，屏蔽搜索引擎爬虫也好，都是为了保证Api的私密性。另外,在使用过程中，低调还是低调。原则上坚持一点，既不透露给其它人使用，也不使用其他人的API，所有的这一切都只是为了自己私用。</p>\n<p>如果这样还能被墙掉，那么我真的无语了。只能愤愤地说，方老师，你技术真的很牛B，所有学计算机的学生都该去考你的研究生。</p>\n<p>=============</p>\n<p>本来文章写到这儿，就已经结束了。不过刚刚突然想到一个东西，就是在线ping twitter的真实IP地址。</p>\n<p>因为twitter域名已经遭遇DNS污染，在国内直接ping <a href=\"http://twitter.com\">twitter.com</a>的ip地址，返回的IP地址是159.106.121.75，而且结果一直是请求超时，ping不通。</p>\n<p>我用在线ping网站<a href=\"http://just-ping.com\">just-ping.com</a>，ping <a href=\"http://twitter.com\">twitter.com</a> 返回的IP地址大多是这几个，</p>\n<p><a href=\"http://www.kxboy.com/wp-content/uploads/2011/03/twitterip.jpg\"><img alt=\"twitter-ip\" border=\"0\" height=\"124\" src=\"http://www.kxboy.com/wp-content/uploads/2011/03/twitterip_thumb.jpg\" title=\"twitter-ip\" width=\"127\" /></a></p>\n<p>我测试了一下，直接输入这4个ip地址，居然可以直接打开twitter网站。不知道伟大的Gfw怎么没有把这几个ip墙掉。</p>\n<p>而上海ping到的ip地址是<strong>203.98.7.65，结果是Packets lost (100%)，</strong>看到这个结果，我不怀好意的笑了。</p>\n<p><strong>PS:哥们不是学计算机的，也不懂什么网络通信协议之类的鬼东西。我这些都是在网上摸索收集到的一点点小窍门，高手们看起来可能都会觉得我幼稚的可笑，但是对于我这样的菜鸟，能琢磨出url伪装和屏蔽搜索引擎爬虫这样的鬼点子，我已经很知足了。</strong></p>\n<p></p>\n<h4>―――――――――――――――――――――――――――――――――――――――――</h4>\n<h4>需要翻墙利器赛风? 请<a href=\"https://www.google.com/profiles/112915952962578336480\">阅读和关注中国数字时代</a>。</p>\n<p>推特用户请点击<a href=\"http://qinzhigang.in/login.php\">这里</a>免翻墙上推特</h4>\n<p>请点击<a href=\"https://sesawe.net/-Tools-zh-.html\">这里</a>下载翻墙软件 </p>\n<p>更多翻墙方法请发电邮(最好用Gmail)到：<a href=\"mailto:fanqiang70ma@gmail.com\">fanqiang70ma@gmail.com</a>  </p>\n<p>请阅读和关注<a href=\"https://www.google.com/profiles/112915952962578336480\">中国数字时代</a>、翻墙技术博客<a href=\"https://www.google.com/profiles/chinagfwblog\">GFW BLOG</a>（免翻墙）  </p>\n<p>请使用<a href=\"https://www.google.com/reader/view/\">Google Reader</a><a href=\"https://www.google.com/reader/view/feed/http://chinadigitaltimes.net/chinese/feed\">订阅中国数字时代中文版</a>（<a href=\"http://chinadigitaltimes.net/chinese/feed\">http://chinadigitaltimes.net/chinese/feed</a>），阅读最有价值的中文信息；以及<a href=\"https://www.google.com/reader/view/feed/http://feeds2.feedburner.com/chinagfwblog\">GFW BLOG（功夫网与翻墙）</a><a href=\"http://feeds2.feedburner.com/chinagfwblog\">http://feeds2.feedburner.com/chinagfwblog</a>，获取最新翻墙工具和翻墙技巧信息。</p>\n<p>  </p>\n<div><img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-2452443929091548452?l=www.chinagfw.org\" width=\"1\" /></div>\n<p><img height=\"1\" src=\"http://feeds.feedburner.com/~r/chinagfwblog/~4/d9yBQKWEkUk\" width=\"1\" /></p>\n<p><img src=\"http://www.kxboy.com/wp-content/uploads/2011/03/twitterip_thumb.jpg\" /></p>\n<p><b>要翻墙？(发邮件到Gmail):caonimagongminATgmail.com</b></p>\n","author":453,"categories":[15300],"tags":[8339,8510,8795,8800]}