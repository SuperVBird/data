{"id":133831,"link":"https://chinadigitaltimes.net/chinese/2011/01/如何把wordpress博客搬到google-app-engine/","date":"2011-01-27T08:52:12Z","modified":"2011-01-27T08:52:12Z","title":"如何把wordpress博客搬到Google App Engine","content":"<p>来源：<a href=\"http://www.watch-life.net/wordpress/wordpress-2-gae.html\">http://www.watch-life.net/wordpress/wordpress-2-gae.html</a></p>\n<p><a href=\"http://code.google.com/intl/zh-CN/appengine/\">Google App Engine</a>(GAE)是google的互联网应用程序引擎服务。用户可以使用<a href=\"http://www.watch-life.net/tag/Google\" rel=\"tag\">Google </a>提供的API开发自己的网站或互联网应用，而服务器、带宽等全部有<a href=\"http://www.google.com/\">Google</a>的服务器集群来实现。GAE被开发者视为<strong>高速、免费的虚拟主机</strong>。</p>\n<p>目前的预览版本支持:<br /> 1、每个用户10个应用（application）。<br /> 2、每个应用500M存储空间和每月 500 万综合浏览量。</p>\n<p>这些用来搭建一个小型的网站绰绰有余了。如果你的博客是<a href=\"http://www.watch-life.net/tag/wordpress\" rel=\"tag\">wordpress</a>,想搬到Google App Engine上，有有些困难，由于GAE目前支持python，而<a href=\"http://wordpress.org/\">wordpress</a> 是php程序。把wordpress的数据导入到一个可以在GAE运行的blog程序里，是迁移最实用的办法。</p>\n<p>我把<a href=\"http://www.watch-life.net/\">守望轩</a>的博客就在GAE上做了一个镜像：<a href=\"http://watch-life.appspot.com/\">http://watch-life.appspot.com/</a></p>\n<p>下面我提供我尝试的方法：<br /> <a href=\"http://www.watch-life.net/wordpress/wordpress-2-gae.html\"> http://www.watch-life.net/wordpress/wordpress-2-gae.html</a></p>\n<p><strong>1、注册GAE</strong>。<br /> 链接：<a href=\"http://appengine.google.com/\">http://appengine.google.com/</a></p>\n<p>注册必须是Gmail用户。</p>\n<p><strong>2、登录GAE，新建一个应用（application)</strong>。<br /> 比如我新建的应用名为：<strong>watch-life</strong></p>\n<p><strong>3、下载、安装App Engine SDK</strong><br /> 链接：<a href=\"http://code.google.com/intl/zh-CN/appengine/downloads.html\">http://code.google.com/intl/zh-CN/appengine/downloads.html</a></p>\n<p>比如我的安装目录为：D:Program FilesGooglegoogle_appengine</p>\n<p><strong>4、下载、安装python 2.5</strong><br /> 链接：<a href=\"http://www.python.org/ftp/python/2.5.4/python-2.5.4.msi\">http://www.python.org/ftp/python/2.5.4/python-2.5.4.msi</a> 。</p>\n<p>为什么是2.5呢？因为目前GAE只支持2.5。</p>\n<p><strong>5、下载micolog 博客程序</strong>。<a href=\"http://code.google.com/p/micolog/\">http://code.google.com/p/micolog/</a>。</p>\n<p>目前的版本是0.5 。我只所以选择这个blog程序，是因为micolog 可以用导入wordpress的导出xml数据，兼容性不错，文章、分类都可以导入，而且支持永久链接。</p>\n<p><strong>6、安装micolog 博客程序。</strong></p>\n<p>1)把micolog 复制到GAE的安装目录（你可以对micolog目录名改名,比如我就改名为&#8221;watch-life&#8221;），修改app.yaml文件中的第一行，把&#8221;<strong>application</strong>:&#8221;后面的&#8221;mlog&#8221;，改成你在GAE上新建的应用名。比如，我就改成：application:watch-life</p>\n<p>2)开始-运行-cmd，进入D:Program FilesGooglegoogle_appengine，输入命令：<strong>appcfg.py update watch-life/</strong>，然后根据提示输入gmail地址和密码，通过后会上传micolog 博客程序。这时你就可以访问你在GAE上的博客了，访问的地址为：<strong><a href=\"http://xn--eqrv8vpjs.appspot.com\">http://应用名.appspot.com</a></strong>,   比如我的就是：<a href=\"http://watch-life.appspot.com/\">http://watch-life.appspot.com</a></p>\n<p><strong>7、导出wordpress的xml数据。</strong><br /> 登录到你的wordpress博客后台，在左侧导航栏选择:<strong>工具+导出</strong>，单击&#8221;<strong>下载导出文件</strong>&#8220;按钮即可。</p>\n<p><strong>8、在micolog 博客导入wordpress的xml数据。</strong><br /> 1）、登录你刚刚在GAE上建好的博客程序，登录的用户名和密码和你Gmail的一样，因为应用的是google api 中用户服务，集成了Google 用户帐户。</p>\n<p>2）在导航栏选择&#8221;<strong>设置+导入/导出</strong>&#8220;,选择导入xml文件（即从wordpress导出的xml数据文件），单击&#8221;<strong>导入</strong>&#8220;按钮即可。</p>\n<p>在导入前要注意几点：</p>\n<p>1、如果导入的xml文件如果很大的，是会超时导入失败的。我最开始导出的xml有1.8m，导入的时候就失败了，最开始以为是导入的程序有问题，把xml分成n多部分后分开导入，才成功了。</p>\n<p> 如何分割导出xml文件呢。xml文件里的结构是这样的：</p>\n<blockquote>\n<pre><span><?</span><span>xml </span><span>version</span><span>=</span>\"<span>1.0</span>\" <span>encoding</span><span>=</span>\"<span>UTF-8</span>\"<span>?><br> <</span><span>rss </span><span>version</span><span>=</span>\"<span>2.0</span>\" <span>...</span><span>><br> <</span><span>channel</span><span>></span></pre>\n<pre><span></span>.....<br><span><</span><span>wp:category</span><span>><br> </</span><span>wp:category</span><span>><br></span>...<br><span><</span><span>wp:tag</span><span>><br> </</span><span>wp:tag</span><span>><br><</span><span>item</span><span>><br></</span><span>item</span><span>><br> </span>..<br><span></</span><span>channel</span><span>><br></</span><span>rss</span><span>><br> </span></pre>\n</blockquote>\n<p>wp:category 节点表示分类<br /> wp:tag 节点表示tag<br /> item节点表示文章<br /> 其中的wp:tag节点可以全部删除，因为在导入的时候是被忽略的。</p>\n<p>制作第一个xml，导入分类（在micolog 里叫目录）只保留wp:category 节点<br /> ，类似如下代码：</p>\n<blockquote>\n<pre><span><?</span><span>xml </span><span>version</span><span>=</span>\"<span>1.0</span>\" <span>encoding</span><span>=</span>\"<span>UTF-8</span>\"<span>?><br> <</span><span>rss </span><span>version</span><span>=</span>\"<span>2.0</span>\" <span>...</span><span>><br> <</span><span>channel</span><span>></span>.....<br><br><span><</span><span>wp:category</span><span>><br> </</span><span>wp:category</span><span>><br></span>...<br><br><span></</span><span>channel</span><span>><br> </</span><span>rss</span><span>></span></pre>\n</blockquote>\n<p>然后制作第二个xml，只保留一部分item节点（最好在50个item内，多了会导入失败），类似如下代码：</p>\n<blockquote>\n<pre><span><?</span><span>xml </span><span>version</span><span>=</span>\"<span>1.0</span>\" <span>encoding</span><span>=</span>\"<span>UTF-8</span>\"<span>?><br> <</span><span>rss </span><span>version</span><span>=</span>\"<span>2.0</span>\" <span>...</span><span>><br> <</span><span>channel</span><span>></span>.....<br><br><span><</span><span>item</span><span>><br> </</span><span>item</span><span>><br></span>..<br><span></</span><span>channel</span><span>><br> </</span><span>rss</span><span>></span></pre>\n</blockquote>\n<p>接下来制作第三个，方法类似，以此类推。</p>\n<p>2、在wordpress的导出xml文件中有些item节点有些问题（估计是wordpress的bug），这些有问题的item节点居然用图片文件做节点，例如</p>\n<pre><span><</span><span>item</span><span>><br>  <</span><span>title</span><span>></span>gohome.jpg<span></</span><span>title</span><span>><br>   </span>..<br>  <span></</span><span>item</span><span>></span></pre>\n<p>如果存在这样的item节点，会导致导入中止，因此在导入中止的时候，需要检查是否存在这样的item节点。</p>\n<p>3、永久链接（Permalink）不支持category参数，因此不能把永久链接设置为：%(category)s/%(postname)s.html，只用&#8221;<strong>%(year)s , %(month)s , %(day)s , %(postname)s , %(post_id)s</strong>&#8220;这几个参数。同时设置方式也和wordpress有些差别。</p>\n<p>等把所有的xml都导入完后，整个迁移的工作就算完成了。</p>\n<p>update 20090327:<br /> <strong>配置Windows live writer 支持micolog博客</strong><br /> 配置Windows live writer，Windows live writer中新增一个日志账户，其中提供者和接入地址，类型选择wordpress2.2+，接口为网址后面加/rpc，比如我的就是：http: //<a href=\"http://watch-life.appspot.com/rpc\">watch-life.appspot.com/rpc</a></p>\n<p>你有没有兴趣试试。:-)</p>\n<p>有关链接：</p>\n<p>1、Google App Engine：<a href=\"http://appengine.google.com/\">http://appengine.google.com/</a><br />  2、micolog博客程序：<a href=\"http://code.google.com/p/micolog/downloads/list\">http://code.google.com/p/micolog/downloads/list</a><br /> 3、python ：<a href=\"http://www.python.org/\">http://www.python.org</a></p>\n<p> </p>\n<div>敬请订阅中国数字时代中文版（http://chinadigitaltimes.net/chinese/feed），阅读最有价值的中文信息。下载TOR等翻墙软件，请访问Sesawe(http://fanqianggongju.info/)。需翻墙？请发电邮(最好用Gmail)到:CDTcaonima@gmail.com。GFW Blog订阅地址：http://feeds2.feedburner.com/chinagfwblog<img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-2742555693913380158?l=www.chinagfw.org\" width=\"1\" /></div>\n<p><img height=\"1\" src=\"http://feeds.feedburner.com/~r/chinagfwblog/~4/XwxdaqmR6G4\" width=\"1\" /></p>\n<h4>要翻墙? <a href=\"http://808080.biz\">用赛风</a>.</h4>\n","author":56,"categories":[15300],"tags":[5908,8795,8800]}