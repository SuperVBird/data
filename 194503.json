{"id":194503,"link":"https://chinadigitaltimes.net/chinese/2011/11/翻墙-cm7下使用openvpn/","date":"2011-11-07T08:00:51Z","modified":"2011-11-07T08:00:51Z","title":"翻墙 | CM7下使用OpenVPN","content":"<p><p>其实我对于刷机已然已经力不从心了，这是被水果惯坏了的后果。然而前些日子传出的消息称Google的大儿子Nexus One将不再得到Ice-Cream Sandwich (Android 4.0)更新，促使我决定尽早挪到CyanogenMod（CM）ROM这条船上去。。。省的夜长梦多。刷机过程就像当年折腾G1一样，不过有经验，少了 很多折腾，半小时内搞定所有，另外发现许久不刷机，CM的开机动画已经变得这么有爱了=v=。</p>\n<p>CM 7集成了OpenVPN和tun.ko，不过这个和在Android上使用OpenVPN Settings调用卡内的验证文件不太一样，需要事先使用OpenSSL打包成一个p12文件。</p>\n<p><span></span></p>\n<p>下面提供打包p12的方法，你需要：</p>\n<p>1、一个Unix终端，要装了OpenSSL的</p>\n<p>2、5分钟时间</p>\n<p>开终端，输入</p>\n<blockquote>\n<p>openssl pkcs12 -export -in [PathToClientCert] -inkey [PathToClientKey] -certfile [PathToCACert] -name [FriendlyName] -out certs.p12</p>\n</blockquote>\n<p>中括号内的内容请依据自己情况修改。</p>\n<p>把最后生成的certs.p12拷入手机SD卡内备用。</p>\n<p>手机拿出，依次进入Settings-Location &#038; security-Install from SD card</p>\n<div></div>\n<p>然后选择刚刚的certs.p12，按照提示设定存储密码即可导入。</p>\n<p>再依次进入Settings-Wireless &#038; Networks-VPN Settings-Add VPN</p>\n<p>选择OpenVPNAdd VPN，照下方法填写</p>\n<p>[VPN name] 任意</p>\n<p>[Set VPN server] 填写你配置文件中的remote后面跟的IP或地址</p>\n<p>[User authentication] 如果你用的用户名密码类型的，请打钩，否则留空</p>\n<p>[Set CA certificate] 点一下，选择刚刚导入的证书</p>\n<p>[Set user certificate] 点一下，选择刚刚导入的证书</p>\n<p>然后按一下menu，选Advanced，根据自己的ovpn配置文件详细配置高级选项，最后保存即可。</p>\n<p>友情提示：</p>\n<p>CM内置的OpenVPN在网络变化导致断开连接的时候并不会提示disconnected，如遇网络不通请手动重连，进入VPN选项，再点一下即可断开。</p>\n<p><strong>来源</strong>：<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.yeyaxi.com/2011/10/cm7-openvpn/\">http://www.yeyaxi.com/2011/10/cm7-openvpn/</a></p>\n<p>==========</p>\n<p><strong>CM7内置openvpn设置</strong></p>\n<p>CM7早已内置了openvpn的功能，但是似乎在官网上面没有写明如何使用，这给我的openvpn设置带来了一点麻烦，因为我openvpn总 共有四个文件：ca.crt, client.crt, client.key和client.ovpn，我找不到地方能把它们全部添加进android的存储凭证中。不过还好@<a rel=\"nofollow\" target=\"_blank\" href=\"https://twitter.com/#%21/dickeny/status/65096019158904835\">dickeny</a>给了我一点提示 ：打包成pkcs12格式放入SD卡中。接着就找到了篇文章参考：<a rel=\"nofollow\" target=\"_blank\" href=\"http://olorin.info/blog/2010/03/cyanogenmod-openvpn-gui-how-to-load-keyscerts\">CyanogenMod OpenVPN GUI – how to load keys&#038;certs</a>，还有openvpn上的文件功能解释：<a rel=\"nofollow\" target=\"_blank\" href=\"http://openvpn.net/index.php/open-source/documentation/howto.html#pki\">OpenVpn HOWTO</a>。</p>\n<p>简单的描述一下：</p>\n<ol>\n<li>准备好openvpn所需要的四个文件（可以没有其中的client.ovpn）</li>\n<li>制作pkcs12包\n<div>\n<div>\n<div>\n<table>\n<tbody>\n<tr>\n<td><code>1</code></td>\n<td><code>openssl pkcs12 -</code><code>export</code> <code>-</code><code>in</code> <code>client.crt -inkey client.key</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n<div>\n<table>\n<tbody>\n<tr>\n<td><code>2</code></td>\n<td><code> </code><code>-certfile ca.crt -name nameYouWant -out packName.p12</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n</div>\n</li>\n<li>将pkcs12包放进SD卡</li>\n<li>进入 设置 –> 位置和安全 –> 凭证存储 –> 从SD卡安装 –> 选择pkcs12包</li>\n<li>进入 设置 –> 无线和网络 –> 虚拟专用网设置 –> 添加虚拟专用网</li>\n<li>DONE!</li>\n</ol>\n<p>一般的openvpn的连接信息（IP地址，端口，协议等）均在ovpn文件里面有描述，或者向vpn提供商询问即可。</p>\n<p><strong>来源</strong>：<a rel=\"nofollow\" target=\"_blank\" href=\"http://b.crhan.com/2011/05/cm7_openvpn/\">http://b.crhan.com/2011/05/cm7_openvpn/</a></p>\n</p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=750556\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"750556\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n<input type=\"submit\" value=\"订阅!\"><br />\n</form>\n","author":983,"categories":[15300],"tags":[7775,8510,8795]}