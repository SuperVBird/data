{"id":159409,"link":"https://chinadigitaltimes.net/chinese/2011/06/ssh开设最低权限的上网代理帐号/","date":"2011-06-09T03:30:38Z","modified":"2011-06-09T03:30:38Z","title":"SSH开设最低权限的上网代理帐号","content":"<p><p>来源：<a href=\"http://www.yishanhome.com/archives/1460\">http://www.yishanhome.com/archives/1460</a></p>\n<pre>wget <a href=\"http://www.yishanhome.com/wp-content/uploads/2011/06/addsshproxy.sh;sh\">http://www.yishanhome.com/wp-content/uploads/2011/06/addsshproxy.sh;sh</a> addsshproxy.sh 你需要添加的帐号 该帐号的密码</pre>\n<p><a href=\"http://www.yishanhome.com/wp-content/uploads/2011/06/addsshproxy.jpg\"><img alt=\"\" height=\"202\" src=\"http://www.yishanhome.com/wp-content/uploads/2011/06/addsshproxy-300x202.jpg\" title=\"addsshproxy\" width=\"300\" /></a></p>\n<p>原文：<a href=\"http://www.deepvps.com/add-proxy-ssh-account-on-vps.html\">http://www.deepvps.com/add-proxy-ssh-account-on-vps.html</a></p>\n<p>1，增加一个linux用户，并赋予该用户一个nologin的shell权限。</p>\n<p>useradd username -s /sbin/nologin</p>\n<p>2，设置该用户密码。</p>\n<p>passwd username</p>\n<p>3，如果需要经常建立这种账户的话，建立一个脚本方便自己的操作。</p>\n<p>通过ssh终端root权限连接到vps后输入：</p>\n<p>vi ssh.sh</p>\n<p>编辑一个sh文件</p>\n<p>打开后，按 i 键进入编辑模式。</p>\n<p>然后将下面内容复制进去（终端内点下鼠标右键即可复制）</p>\n<p>#!/bin/bash</p>\n<p>cat >> /etc/shells << END</p>\n<p>/sbin/nologin</p>\n<p>END</p>\n<p>useradd $1 -s /sbin/nologin</p>\n<p>echo $1:$2 | chpasswd</p>\n<p>然后保存退出编辑模式。</p>\n<p>这样，输入下面命令就可以方便建立ssh代理帐号：</p>\n<p>bash ssh.sh username password</p>\n<p>username和password就是你自己要设置的帐号和对应的密码，可以替换。</p>\n<p>上面脚本中$1，就是对应的username，$2，就是对应的password</p>\n<p>$0哪里去了？ssh.sh即是也。</p>\n<p>$1，$2，$0，是bash脚本中约定的参数标志，分别表示第几个参数。</p>\n<p>  <a href=\"http://feeds.wordpress.com/1.0/gocomments/xijie.wordpress.com/4584/\" rel=\"nofollow\"><img alt=\"\" border=\"0\" src=\"http://feeds.wordpress.com/1.0/comments/xijie.wordpress.com/4584/\" /></a> <a href=\"http://feeds.wordpress.com/1.0/godelicious/xijie.wordpress.com/4584/\" rel=\"nofollow\"><img alt=\"\" border=\"0\" src=\"http://feeds.wordpress.com/1.0/delicious/xijie.wordpress.com/4584/\" /></a> <a href=\"http://feeds.wordpress.com/1.0/gofacebook/xijie.wordpress.com/4584/\" rel=\"nofollow\"><img alt=\"\" border=\"0\" src=\"http://feeds.wordpress.com/1.0/facebook/xijie.wordpress.com/4584/\" /></a> <a href=\"http://feeds.wordpress.com/1.0/gotwitter/xijie.wordpress.com/4584/\" rel=\"nofollow\"><img alt=\"\" border=\"0\" src=\"http://feeds.wordpress.com/1.0/twitter/xijie.wordpress.com/4584/\" /></a> <a href=\"http://feeds.wordpress.com/1.0/gostumble/xijie.wordpress.com/4584/\" rel=\"nofollow\"><img alt=\"\" border=\"0\" src=\"http://feeds.wordpress.com/1.0/stumble/xijie.wordpress.com/4584/\" /></a> <a href=\"http://feeds.wordpress.com/1.0/godigg/xijie.wordpress.com/4584/\" rel=\"nofollow\"><img alt=\"\" border=\"0\" src=\"http://feeds.wordpress.com/1.0/digg/xijie.wordpress.com/4584/\" /></a> <a href=\"http://feeds.wordpress.com/1.0/goreddit/xijie.wordpress.com/4584/\" rel=\"nofollow\"><img alt=\"\" border=\"0\" src=\"http://feeds.wordpress.com/1.0/reddit/xijie.wordpress.com/4584/\" /></a> <img alt=\"\" border=\"0\" height=\"1\" src=\"http://stats.wordpress.com/b.gif?host=xijie.wordpress.com&#038;blog=10068099&#038;post=4584&#038;subd=xijie&#038;ref=&#038;feed=1\" width=\"1\" /></p>\n<p><img src=\"http://chinadigitaltimes.net/chinese/files/2011/06/fab25c15oxy-300x202.jpg-150x150.jpg\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=750556\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"750556\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n<input type=\"submit\" value=\"订阅!\"><br />\n</form>\n","author":273,"categories":[15300],"tags":[8795]}