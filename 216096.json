{"id":216096,"link":"https://chinadigitaltimes.net/chinese/2012/03/翻墙-goagent小结�技术篇和统计篇/","date":"2012-03-18T12:04:44Z","modified":"2012-03-18T12:04:44Z","title":"翻墙 | GoAgent小结�技术篇和统计篇","content":"<p>来源：<a rel=\"nofollow\" target=\"_blank\" href=\"http://igfw.net/archives/8374\">http://igfw.net/archives/8374</a></p>\n<div>\n<p><strong>GoAgent小结�技术篇</strong></p>\n<p> <strong>2011/12/8 Update</strong><br />具体实现细节，请访问goagent-dev之<a rel=\"nofollow\" target=\"_blank\" href=\"https://mail.google.com/mail/u/0/#label/Maillist%2Fgoagent-dev/1341c1b697a45aa9\" title=\"goagent-dev\">goagent做了哪些改进？</a></p>\n<p>GoAgent 一直号称简单快速，不是没有道理的。proxy.py不到800行的代码实现了：跨平台运行、多appid负载均衡、RangeFetch、支持NTLM、支持内网代理、支持ipv6、支持php fetch等诸多feature，其考虑到的一个重要原则是依赖尽可能小，这体现在了：</p>\n<blockquote>\n<p>0.代码即程序，Windows下绿色运行，连GAE的sdk都不用装，这得益于先进的打包技术。<br />1.实现基本上都是标准库，openssl库也很常见，移植容易。<br />2.fetch.php对服务器端的要求较低。需要preg/zlib/curl模块支持，前两个属于标准模块，curl也是常见模块。<br /> 3.合理的默认值，只需要配置appid就可以用了。<br />4.不支持gfwlist</p>\n</blockquote>\n<p>GoAgent 另一个原则就是追求速度，不断在优化，看看<a rel=\"nofollow\" target=\"_blank\" href=\"https://code.google.com/p/goagent/wiki/ChangeLog\">ChangeLog</a>就知道了：</p>\n<blockquote>\n<p>0.压缩传输，不支持强加密，因为连GMail都被天朝黑客入侵过，保证local到AppEngine的绝对完全并没有太多的意义。。<br />1.再如之前整合了gevent或者线程池，为了速度后来又拿掉了；<br />2.为了加快启动速度，将读取proxy.ini 放入了全局变量中，代码因此丑陋了；<br /> 3.修正了socket关闭速度慢的问题；<br />4.多次重新打包python解释器(proxy.exe)；<br />5.简单到极致的GUI，在启动时完成大部分初始化设置并减少if的使用；<br />6.为了优化php fetch的规则匹配，干脆将其和GAE的监听端口分开；</p>\n</blockquote>\n<p> GoAgent的优势在于在客户端做了大量工作，由本身维护session的状态， 因为GoAgent 既是Client又是Server，本地相当于一个http server（采用了BaseHTTPServer），同时又是Client端，与部署在AppEngine的fetch.py进行通信。所以当我得知有些代理软件使用mysql来维护代理服务器的session状态时，觉得有点惊讶，明显不合理了嘛。另外基于GAE的代理最快的就是直连北京google了，因为Google的很多服务都是云服务，所以一个IP能够提供多种服务，其中就包括AppEngine，因此访问google自家的服务速度很快，而GoAgent 从一开始就是这么做的。</p>\n<p>关于Porting的问题，比如支持iOS，我认为移植平台本身更为容易，所以才有很多人打Android应用的主意，比如最开始的Alien Dalvik，号称让MeeGo支持Andorid 25W应用的<a rel=\"nofollow\" target=\"_blank\" href=\"http://tech.weiphone.com/2011-09-23/translator_fail_241650.shtml\">ACL for MeeGo</a>，裁剪VirtualBox的<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.bluestack.com/\">BlueStack</a>，一直不温不火的<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.google.com/search?q=mobile+virtualization\">Mobile Virtualization</a>，尽管这些目前看来还不太实用，比如BlueStack，我就挺好奇它如何解决ABI不同的问题，但是都是移植平台的例子~</p>\n<p>咳，有点扯远了，所以支持iOS最关键的无非就是：1.交叉编译python2.6 for iOS 2.编译pyOpenSSL for iOS。其他的都是如何让设置变得简单，操作简便而已。顺带提一句，pyOpenSSL和SBSetting GoAgent toggle都是在我的ipod上编译的，越狱开发其实门槛也不高，只要搞定了toolchain就ok。</p>\n<p>最后再八卦几句，GoAgent 最开始是托管在github上（其实现在也是），后来为了不&#8221;牵连&#8221;github，迁移到了Google Code上，在首页上用了一个空的<a rel=\"nofollow\" target=\"_blank\" href=\"http://bit.ly\">bit.ly</a> 链接指向了真实的地址，原因也是如此；GoAgent 的名字是因为不想再用已经泛滥的proxy。。</p>\n<p><strong>原文</strong>：<a rel=\"nofollow\" target=\"_blank\" href=\"http://kernelpanic.im/blog/2011/10/08/goagent-summaries-technical/\">http://kernelpanic.im/blog/2011/10/08/goagent-summaries-technical/</a></p>\n<p>========</p>\n<p><strong>GoAgent小结�统计篇</strong></p>\n<p>GoAgent 发布快半年了，打算写两篇小结一下，<a rel=\"nofollow\" target=\"_blank\" href=\"http://kernelpanic.im/blog/2011/10/08/goagent-summaries-technical/\">另一篇</a>会讲技术相关的内容~</p>\n<p>如果没有最开始的随意<a rel=\"nofollow\" target=\"_blank\" href=\"http://internet.solidot.org/article.pl?sid=11/04/11/014244\">发布</a>，GoAgent 或许还只是个内部使用的小玩意，这是当时的新闻：<br /> <a rel=\"nofollow\" target=\"_blank\" href=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/solidot_news.png\"><img alt=\"\" height=\"193\" src=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/solidot_news.png\" style=\"border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-color:initial;\" title=\"solidot_news\" width=\"678\" /></a></p>\n<p>而现在，GoAgent 在Google Code上star数超过了850，issue数超过了1000，</p>\n<p> <a rel=\"nofollow\" target=\"_blank\" href=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/goagent_star.png\"><img alt=\"\" height=\"219\" src=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/goagent_star.png\" style=\"border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-color:initial;\" title=\"goagent_star\" width=\"573\" /></a></p>\n<p>这实在是有点意外，不信可以看看上千的都是什么project，CyanogenMod也不过860而已：</p>\n<p> <a rel=\"nofollow\" target=\"_blank\" href=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/famous_stars.png\"><img alt=\"\" height=\"907\" src=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/famous_stars.png\" style=\"border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-color:initial;\" title=\"famous_stars\" width=\"733\" /></a></p>\n<p>在Google Trends搜索流行度已经超过了老前辈gappproxy。<a rel=\"nofollow\" target=\"_blank\" href=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/trends.png\"><img alt=\"\" height=\"274\" src=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/trends.png\" style=\"border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-color:initial;\" title=\"trends\" width=\"591\" /></a></p>\n<p>和最流行的目田门相比，差距也有变小的趋势。</p>\n<p><a rel=\"nofollow\" target=\"_blank\" href=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/trends2.png\"><img alt=\"\" height=\"273\" src=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/trends2.png\" style=\"border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-color:initial;\" title=\"trends2\" width=\"589\" /></a></p>\n<p>根据Google Analytics 最近三个月的统计，GoAgent 首页PV有23W，独立访问才3.8W，可以推测除了作者之外，有人也每天刷GoAgent的首页。。中间的peak貌似是宣布支持iOS的时候，九月底的另一个peak貌似是支持php的延后效应。</p>\n<p><a rel=\"nofollow\" target=\"_blank\" href=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/overview.png\"><img alt=\"\" height=\"383\" src=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/overview.png\" style=\"border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-color:initial;\" title=\"overview\" width=\"724\" /></a></p>\n<p>GoAgent 的下载数和用户数很难估计，因为github并没有下载的统计，很多人更新GoAgent也是git remote update这种方式，而且下载了并不代表就会使用。几万用户估计应该有，分布在&#8221;全球&#8221;。。</p>\n<p> <a rel=\"nofollow\" target=\"_blank\" href=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/vistors.png\"><img alt=\"\" height=\"274\" src=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/vistors.png\" style=\"border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-color:initial;\" title=\"vistors\" width=\"726\" /></a></p>\n<p>很显然，Windows和Chrome用户是主流。</p>\n<p><a rel=\"nofollow\" target=\"_blank\" href=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/browsers_os.png\"><img alt=\"\" height=\"244\" src=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/browsers_os.png\" style=\"border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-color:initial;\" title=\"browsers_os\" width=\"738\" /></a></p>\n<p>GoAgent iOS好一点，提供了Google Code和cydia源的下载，结合Google code和这个简单的<a rel=\"nofollow\" target=\"_blank\" href=\"https://gist.github.com/1266796\">脚本</a>进行统计，GoAgent iOS大概下载了1500次，而python2.6下载2200次左右，用户数应该不到1千。。</p>\n<p><a rel=\"nofollow\" target=\"_blank\" href=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/goagent_ios_down.png\"><img alt=\"\" height=\"133\" src=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/goagent_ios_down.png\" style=\"border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-color:initial;\" title=\"goagent_ios_down\" width=\"734\" /></a></p>\n<p>GoAgent 的搜索流行度得到了Google Analytics数据的支持，一半以上流量都是通过搜索而来，说明在首页放置下载链接和Google +1是相当正确的。<a rel=\"nofollow\" target=\"_blank\" href=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/search_traffic.png\"><img alt=\"\" height=\"184\" src=\"http://kernelpanic.im/blog/wp-content/uploads/2011/10/search_traffic.png\" style=\"border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px;border-color:initial;\" title=\"search_traffic\" width=\"739\" /></a></p>\n<p>顺带提下，还有个ezproxy的事情，具体可以看v2ex的<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.v2ex.com/t/13674\">帖子</a>和这个<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.ufula.com/vip.html\">链接</a>，我根据淘宝显示的最近成交记录估算了一下，那个哥们利用GoAgent赚了大概1000块，不过这也从侧面证明了GoAgent的速度和可用性，都可以拿来卖钱了~</p>\n<p><strong>原文</strong>：<a rel=\"nofollow\" target=\"_blank\" href=\"http://kernelpanic.im/blog/2011/10/06/goagent-summary-statistics/\">http://kernelpanic.im/blog/2011/10/06/goagent-summary-statistics/</a></p>\n</p></div>\n<div>翻越防火长城，你可以到达世界上的每一个角落。（Across the Great Firewall, you can reach every corner in the world.）翻墙利器赛风3下载地址：<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima326\"> http://dld.bz/caonima326</a>，<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima745\">http://dld.bz/caonima745</a><img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-2196152485659506877?l=www.chinagfw.org\" width=\"1\" /></div>\n<p><img height=\"1\" src=\"http://feeds.feedburner.com/~r/ChinaGfw/~4/CoFb6fGSUO4\" width=\"1\" /></p>\n<p><img src=\"http://chinadigitaltimes.net/chinese/files/2012/03/9c0352e5olidot_news.png-150x150.png\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<p><iframe src=\"https://docs.google.com/spreadsheet/embeddedform?hl=zh-CN&#038;formkey=dGRpN3FrVThuMFFsZHBZcmNGLW94dEE6MQ\" width=\"510\" height=\"328\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading&#8230;</iframe></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=738338\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"738338\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n<input type=\"submit\" value=\"订阅!\"><br />\n</form>\n","author":726,"categories":[15300],"tags":[7775,5908,9250,18812,8795,8800,8817]}