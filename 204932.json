{"id":204932,"link":"https://chinadigitaltimes.net/chinese/2012/01/翻墙-ubuntu-vpn-设置/","date":"2012-01-04T10:24:49Z","modified":"2012-01-04T10:24:49Z","title":"翻墙 | Ubuntu VPN 设置","content":"<p>原文：<a rel=\"nofollow\" target=\"_blank\" href=\"http://bolsterhoo.com/ubuntu-vpn-setting/\">http://bolsterhoo.com/ubuntu-vpn-setting/</a></p>\n<div>\n<div>\n<div>\n<div>\n<p>装个VPN，平时可以用来翻翻墙什么的&#8230;<br /> A. 当然，首先是安装服务器程序：<span></span></p>\n<pre>apt-get install pptpd</pre>\n<p>B. 然后编辑 /etc/pptpd.conf 文件，设置客户端连接的IP地址，启用如下的 localip 和 remoteip：</p>\n<pre>localip 10.100.113.1 remoteip 10.100.113.2-4</pre>\n<p>C. 查看 /etc/resolv.conf 文件，看看系统的DNS是什么，然后编辑 /etc/ppp/pptpd-options 文件激活如下的ms-dns：</p>\n<pre>ms-dns 208.67.222.222 ms-dns 208.67.220.220</pre>\n<p>D. 通过编辑 /etc/ppp/chap-secrets 文件来设置VPN的帐号及密码等，比如一个帐号 &#8220;test&#8221; 给个密码 &#8220;TEST&#8221;，就如下：</p>\n<pre>test pptpd TEST *</pre>\n<p>第一个字符串就是用户名，第二个是服务器名，在那个options文件中可以设置，第三个就是密码，第四个是允许的客户端ip，为*则表示不限制。<br /> E. 重启服务器。</p>\n<pre>/etc/init.d/pptpd restart</pre>\n<p>F. 启用Internet连接转发，首先，编辑 /etc/sysctl.conf 文件以启用：</p>\n<pre>net.ipv4.ip_forward=1</pre>\n<p>使用sysctl -p可以查看是否启用了。<br /> 然后使用iptables（可能需要apt安装一下下）来创建个路由：</p>\n<pre>iptables -t nat -A POSTROUTING -s <a rel=\"nofollow\" target=\"_blank\" href=\"http://10.100.113.0/24\">10.100.113.0/24</a> -o eth0 -j MASQUERADE</pre>\n<p>G. 重启后自动启用iptables。首先我们还是保存一下现在用的iptables：</p>\n<pre>iptables-save > /etc/iptables-rules</pre>\n<p>然后，编辑一下 /etc/network/interfaces 让系统启动时自动启用我们自己的iptables。</p>\n<pre># Auto generated eth0 interfaces auto eth0 lo iface eth0 inet static         address 67.215.238.99         netmask 255.255.255.224         up route add -net 67.215.238.0 netmask 255.255.255.224 dev eth0         up route add default gw 67.215.238.97 pre-up iptables-restore < /etc/iptables-rules iface lo inet loopback</pre>\n<p>Ubuntu 9.04 中的pptpd貌似有个bug，需要禁用 /etc/pptpd.conf 文件中的日志，只要在 logwtmp 前加个注释即可。Ubuntu 9.10 没这个问题，无需修改。</p>\n<pre># TAG: logwtmp #       Use wtmp(5) to record client connections and disconnections. # # logwtmp  //加一个#注释掉这行</pre>\n<p>现在，VPN应该就可以连接了，赶紧试试看吧。</p>\n</div>\n</div>\n</div>\n</div>\n<p> </p>\n<div>翻越防火长城，你可以到达世界上的每一个角落。（Across the Great Firewall, you can reach every corner in the world.）翻墙利器赛风3下载地址：<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima326\"> http://dld.bz/caonima326</p>\n<p></a>，<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima745\">http://dld.bz/caonima745</a><img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-7479612996942271692?l=www.chinagfw.org\" width=\"1\" /></div>\n<p><img height=\"1\" src=\"http://feeds.feedburner.com/~r/ChinaGfw/~4/9ZP2wGt1WD8\" width=\"1\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<p><iframe src=\"https://docs.google.com/spreadsheet/embeddedform?formkey=dGRpN3FrVThuMFFsZHBZcmNGLW94dEE6MQ\" width=\"450\" height=\"309\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading...</iframe></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=750556\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"750556\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n<input type=\"submit\" value=\"订阅!\"><br />\n</form>\n","author":1005,"categories":[15300],"tags":[7775,8510,8795,8800]}