{"id":203564,"link":"https://chinadigitaltimes.net/chinese/2011/12/翻墙-linux-vps上使用kingate搭建http代理服务器/","date":"2011-12-29T00:16:10Z","modified":"2011-12-29T00:16:10Z","title":"翻墙 | Linux VPS上使用kingate搭建http代理服务器","content":"<p>原文：<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.sxhai.com/html/1027.html\">http://www.sxhai.com/html/1027.html</a></p>\n<p>最近弄了台84，所以对这些东西关注了一些，呵呵 这是个假设HTTP代理服务器的方法！<br /> kingate是一位国人开发的代理服务器，支持http，socks，ftp等多种协议。支持多线程、tcp端口映射、规则控制、时间控制、用户认证、http管理等功能。</p>\n<p>kingate官网：<a rel=\"nofollow\" target=\"_blank\" href=\"http://sourceforge.net/projects/kingate/\">http://sourceforge.net/projects/kingate/</a></p>\n<p>安装所需的依赖包</p>\n<p>Debian：</p>\n<div>apt-get install build-essential automake make gcc g++</div>\n<p>CentOS：</p>\n<div>yum install make automake gcc gcc-c++ gcc-g77</div>\n<p>安装kingate</p>\n<div>wget <a rel=\"nofollow\" target=\"_blank\" href=\"http://softlayer.dl.sourceforge.net/project/kingate/kingate/2.0/kingate-2.0.tar.gz\">http://softlayer.dl.sourceforge.net/project/kingate/kingate/2.0/kingate-2.0.tar.gz</a><br /> tar xzf kingate-2.0.tar.gz<br /> cd kingate-2.0/<br /> ./configure �prefix=/usr/local/kingate<br /> make &#038;&#038; make install</div>\n<p><span></span></p>\n<p> 配置kingate</p>\n<div>\n<p>修改/usr/local/kingate/etc/kingate.conf 为以下内容：</p>\n<p>http on<br /> ftp off<br /> pop3 off<br /> smtp off<br /> telnet off<br /> socks on<br /> mms off<br /> rtsp off<br /> manage on<br /> max 2000<br /> max_per_ip 0<br /> min_free_thread 3<br /> http_port 8082<br /> http_accelerate off<br /> x_forwarded_for on<br /> http_time_out 30<br /> ftp_port 2121<br /> ftp_time_out 300<br /> pop3_port 1100<br /> pop3_time_out 300<br /> smtp_port 2525<br /> smtp_time_out 300<br /> telnet_port 2323<br /> telnet_time_out 300<br /> socks_port 20120<br /> socks_time_out 300<br /> socks5_user off<br /> mms_port 1755<br /> mms_time_out 300<br /> rtsp_port 5540<br /> rtsp_time_out 300<br /> manage_port 8822<br /> manage_time_out 300<br /> log_model user<br /> log_level 0<br /> log_rotate 0 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23 * * * <br /> log_close_msg on<br /> mem_min_cache 50m<br /> mem_max_cache 12m<br /> disk_min_cache 20m<br /> disk_max_cache 30m<br /> use_disk_cache off<br /> refresh never<br /> refresh_time 300<br /> user_time_out 0<br /> mem_cache 50m<br /> disk_cache 100m<br /> max_deny_per_ip 0<br /> max_queue_thread 15<br /> min_limit_speed_size 1m<br /> limit_speed 20k<br /> max_request 50<br /> total_seconds 10<br /> bind_addr<br /> run_user<br /> insert_via off</p>\n</p></div>\n<p>以 上配置中，http on 表示启用http 代理（也可以根据你自己的需求开启其他类型的代理），socks_port 20120  表示http 代理的端口。manage on 为启用http管理，manage_port 8822 为http管理的端口。强烈建议修改端口号！</p>\n<p>kingate启动及管理</p>\n<p>下载启动脚本及添加权限</p>\n<div>wget <a rel=\"nofollow\" target=\"_blank\" href=\"http://soft.vpser.net/proxy/kingate/kingate.init.d\">http://soft.vpser.net/proxy/kingate/kingate.init.d</a><br /> mv kingate.init.d /etc/init.d/kingate<br /> chmod +x /etc/init.d/kingate</div>\n<p>kingate管理</p>\n<p>启动kingate：</p>\n<div>/etc/init.d/kingate start</div>\n<p>关闭kingate：</p>\n<div>/etc/init.d/kingate stop</div>\n<p>重启kingate：</p>\n<div>/etc/init.d/kingate restart</div>\n<p>http管理</p>\n<div>管理地址：<a rel=\"nofollow\" target=\"_blank\" href=\"http://ip:8822\">http://ip:8822</a> ，如果修改过配置，8822端口修改为你设置的端口号。</div>\n<p>加入开机启动</p>\n<p>Debian执行：</p>\n<div>update-rc.d -f nginx defaults</div>\n<p>CentOS执行：</p>\n<div>chkconfig �level 345 kingate on</div>\n<p> </p>\n<div>翻越防火长城，你可以到达世界上的每一个角落。（Across the Great Firewall, you can reach every corner in the world.）翻墙利器赛风3下载地址：<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima326\"> http://dld.bz/caonima326</p>\n<p></a>，<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima745\">http://dld.bz/caonima745</a><img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-2123599150477006828?l=www.chinagfw.org\" width=\"1\" /></div>\n<p><img height=\"1\" src=\"http://feeds.feedburner.com/~r/ChinaGfw/~4/Cd4fHimG80Q\" width=\"1\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=738338\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"738338\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n<input type=\"submit\" value=\"订阅!\"><br />\n</form>\n","author":1005,"categories":[15300],"tags":[8800,8817]}