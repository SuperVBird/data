{"id":431056,"link":"https://chinadigitaltimes.net/chinese/2016/03/科学上网的一些原理/","date":"2016-03-06T14:20:57Z","modified":"2016-03-06T14:20:57Z","title":"科学上网的一些原理","content":"<p><div dir=\"ltr\" trbidi=\"on\">&#26469;&#28304;&#65306;<a href=\"http://hengyunabc.github.io/something-about-science-surf-the-internet/\">http://hengyunabc.github.io/something-about-science-surf-the-internet/</a></p>\n<h2>&#30693;&#20854;&#25152;&#20197;&#28982;</h2>\n<div>&#26412;&#25991;&#19981;&#26159;&#25945;&#31243;&#21521;&#65292;&#20542;&#21521;&#20110;&#20998;&#26512;&#31185;&#23398;&#19978;&#32593;&#30340;&#19968;&#20123;&#21407;&#29702;&#12290;&#30693;&#20854;&#25152;&#20197;&#28982;&#65292;&#25165;&#33021;&#26356;&#22909;&#22320;&#20351;&#29992;&#24037;&#20855;&#65292;&#20063;&#21487;&#20197;&#21019;&#20316;&#20986;&#33258;&#24049;&#30340;&#24037;&#20855;&#12290;</div>\n<div>&#31185;&#23398;&#19978;&#32593;&#30340;&#24037;&#20855;&#24456;&#22810;&#65292;&#20843;&#20185;&#36807;&#28023;&#65292;&#21508;&#26174;&#31070;&#36890;&#65292;&#32780;&#19988;&#32508;&#21512;&#20102;&#21508;&#31181;&#25216;&#26415;&#12290;&#23581;&#35797;&#20174;&#20197;&#19979;&#22235;&#20010;&#26041;&#38754;&#26469;&#35299;&#26512;&#19968;&#20123;&#20854;&#20013;&#30340;&#21407;&#29702;&#12290;&#22823;&#33268;&#20808;&#21407;&#29702;&#65292;&#20877;&#24037;&#20855;&#30340;&#39034;&#24207;&#12290;</div>\n<ul>\n<li>dns</li>\n<li>http/https proxy</li>\n<li>vpn</li>\n<li>socks proxy</li>\n</ul>\n<h2>&#19968;&#20010;http&#35831;&#27714;&#21457;&#29983;&#20102;&#20160;&#20040;&#65311;</h2>\n<div>&#36825;&#20010;&#26159;&#20010;&#27604;&#36739;&#27969;&#34892;&#30340;&#38754;&#35797;&#39064;&#65292;&#20174;&#20013;&#21487;&#20197;&#24341;&#20986;&#24456;&#22810;&#30340;&#20869;&#23481;&#12290;&#22823;&#33268;&#20998;&#20026;&#19979;&#38754;&#22235;&#20010;&#27493;&#39588;&#65306;</div>\n<ul>\n<li>dns&#35299;&#26512;&#65292;&#24471;&#21040;IP</li>\n<li>&#21521;&#30446;&#26631;IP&#21457;&#36215;TCP&#35831;&#27714;</li>\n<li>&#21457;&#36865;http request</li>\n<li>&#26381;&#21153;&#22120;&#22238;&#24212;&#65292;&#27983;&#35272;&#22120;&#35299;&#26512;</li>\n</ul>\n<div>&#36824;&#26377;&#24456;&#22810;&#32454;&#33410;&#65292;&#26356;&#22810;&#21442;&#32771;&#65306;</div>\n<div><a href=\"http://fex.baidu.com/blog/2014/05/what-happen/\" rel=\"external\" target=\"_blank\">http://fex.baidu.com/blog/2014/05/what-happen/</a></div>\n<div><a href=\"http://stackoverflow.com/questions/2092527/what-happens-when-you-type-in-a-url-in-browser\" rel=\"external\" target=\"_blank\">http://stackoverflow.com/questions/2092527/what-happens-when-you-type-in-a-url-in-browser</a></div>\n<div><a href=\"http://div.io/topic/609?page=1\" rel=\"external\" target=\"_blank\">http://div.io/topic/609?page=1</a> &#20174;FE&#30340;&#35282;&#24230;&#19978;&#20877;&#30475;&#36755;&#20837;url&#21518;&#37117;&#21457;&#29983;&#20102;&#20160;&#20040;</div>\n<h2>DNS/&#22495;&#21517;&#35299;&#26512;</h2>\n<div>&#21487;&#20197;&#30475;&#21040;dns&#35299;&#26512;&#26159;&#26368;&#21021;&#30340;&#19968;&#27493;&#65292;&#20063;&#26159;&#26368;&#37325;&#35201;&#30340;&#19968;&#27493;&#12290;&#27604;&#22914;&#35775;&#38382;&#20146;&#21451;&#65292;&#35201;&#30693;&#36947;&#20182;&#30340;&#27491;&#30830;&#30340;&#20303;&#22336;&#65292;&#25165;&#33021;&#27491;&#30830;&#22320;&#19978;&#38376;&#25308;&#35775;&#12290;</div>\n<div>dns&#26377;&#20004;&#31181;&#21327;&#35758;&#65292;&#19968;&#31181;&#26159;UDP&#65288;&#40664;&#35748;&#65289;&#65292;&#19968;&#31181;&#26159;TCP&#12290;</div>\n<h3>udp &#26041;&#24335;&#65292;&#20808;&#22238;&#24212;&#30340;&#25968;&#25454;&#21253;&#34987;&#24403;&#20570;&#26377;&#25928;&#25968;&#25454;</h3>\n<div>&#22312;linux&#19979;&#21487;&#20197;&#29992;dig&#26469;&#26816;&#27979;dns&#12290;&#22269;&#20869;&#30340;DNS&#26381;&#21153;&#22120;&#36890;&#24120;&#19981;&#20250;&#36820;&#22238;&#27491;&#24120;&#30340;&#32467;&#26524;&#12290;<br />&#19979;&#38754;&#20197;google&#30340;8.8.8.8 dns&#26381;&#21153;&#22120;&#26469;&#20570;&#27979;&#35797;&#65292;&#24182;&#29992;wireshark&#26469;&#25235;&#21253;&#65292;&#20998;&#26512;&#32467;&#26524;&#12290;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>dig @8.8.8.8  www.youtube.com</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div><a href=\"http://hengyunabc.github.io/img/dns-udp-youtube-badresponse-fast.png\" rel=\"article0\" title=\"dns-udp-youtube\"><img alt=\"dns-udp-youtube\" src=\"http://hengyunabc.github.io/img/dns-udp-youtube-badresponse-fast.png\"></a><span>dns-udp-youtube</span></div>\n<div>&#20174;wireshark&#30340;&#32467;&#26524;&#65292;&#21487;&#20197;&#30475;&#21040;&#36820;&#22238;&#20102;&#19977;&#20010;&#32467;&#26524;&#65292;<strong>&#21069;&#38754;&#20004;&#20010;&#26159;&#38169;&#35823;&#30340;&#65292;&#21518;&#38754;&#30340;&#26159;&#27491;&#30830;&#30340;</strong>&#12290;</div>\n<div>&#20294;&#26159;&#65292;&#23545;&#20110;dns&#23458;&#25143;&#31471;&#26469;&#35828;&#65292;&#23427;&#21482;&#20250;&#21462;&#26368;&#24555;&#22238;&#24212;&#30340;&#30340;&#32467;&#26524;&#65292;&#21518;&#38754;&#30340;&#27491;&#30830;&#32467;&#26524;&#34987;&#20002;&#24323;&#25481;&#20102;&#12290;<strong>&#22240;&#20026;&#20013;&#38388;&#34987;&#25554;&#20837;&#20102;&#27745;&#26579;&#21253;&#65292;&#25152;&#20197;&#21363;&#20351;&#25105;&#20204;&#37197;&#32622;&#20102;&#27491;&#30830;&#30340;dns&#26381;&#21153;&#22120;&#65292;&#20063;&#35299;&#26512;&#19981;&#21040;&#27491;&#30830;&#30340;IP&#12290;</strong></div>\n<h3>tcp &#26041;&#24335;&#65292;&#26377;&#26102;&#26377;&#25928;&#65292;&#21487;&#33021;&#34987;rest</h3>\n<div>&#20877;&#29992;TCP&#19979;&#30340;DNS&#26469;&#27979;&#35797;&#19979;:</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>dig @8.8.8.8 +tcp   www.youtube.com</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div><a href=\"http://hengyunabc.github.io/img/dns-tcp-youtube-reset.png\" rel=\"article0\" title=\"dns-tcp-youtube-reset\"><img alt=\"dns-tcp-youtube-reset\" src=\"http://hengyunabc.github.io/img/dns-tcp-youtube-reset.png\"></a><span>dns-tcp-youtube-reset</span></div>\n<div>&#20174;wireshark&#30340;&#32467;&#26524;&#65292;&#21487;&#20197;&#30475;&#20986;&#22312;TCP&#19977;&#27425;&#25569;&#25163;&#25104;&#21151;&#26102;&#65292;&#26412;&#22320;&#21457;&#20986;&#20102;&#19968;&#20010;&#26597;&#35810;www.youtube.com&#30340;dns&#35831;&#27714;&#65292;&#32467;&#26524;&#65292;&#24456;&#24555;&#25910;&#21040;&#20102;&#19968;&#20010;RST&#22238;&#24212;&#12290;&#32780;RST&#22238;&#24212;&#26159;&#22312;TCP&#36830;&#25509;&#26029;&#24320;&#26102;&#65292;&#25165;&#20250;&#21457;&#20986;&#30340;&#12290;&#25152;&#20197;&#21487;&#20197;&#30475;&#20986;&#65292;<strong>TCP&#36890;&#35759;&#21463;&#21040;&#20102;&#24178;&#25200;&#65292;DNS&#23458;&#25143;&#31471;&#22240;&#20026;&#25910;&#21040;RST&#22238;&#24212;&#65292;&#35748;&#20026;&#23545;&#26041;&#26029;&#24320;&#20102;&#36830;&#25509;&#65292;&#22240;&#27492;&#20063;&#26080;&#27861;&#25910;&#21040;&#21518;&#38754;&#27491;&#30830;&#30340;&#22238;&#24212;&#25968;&#25454;&#21253;&#20102;&#12290;</strong></div>\n<div>&#20877;&#26469;&#30475;&#19979;&#35299;&#26512;twitter&#30340;&#32467;&#26524;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>dig @8.8.8.8 +tcp  www.twitter.com</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#32467;&#26524;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>www.twitter.com.        590     IN      CNAME   twitter.com.<br>twitter.com.            20      IN      A       199.59.150.7 80<br>twitter.com.            20      IN      A       199.59.150.7<br>twitter.com.            20      IN      A       199.59.149.230<br>twitter.com.            20      IN      A       199.59.150.39</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#36825;&#27425;&#36820;&#22238;&#30340;IP&#26159;&#27491;&#30830;&#30340;&#12290;&#20294;&#26159;&#23581;&#35797;&#29992;telnet &#21435;&#36830;&#25509;&#26102;&#65292;&#20250;&#21457;&#29616;&#36830;&#25509;&#19981;&#19978;&#12290;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>telnet 199.59.150.7 80</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#20294;&#26159;&#65292;&#22312;&#22269;&#22806;&#26381;&#21153;&#22120;&#21435;&#36830;&#25509;&#26102;&#65292;&#21487;&#20197;&#27491;&#24120;&#36830;&#25509;&#65292;&#23436;&#25104;&#19968;&#20010;http&#35831;&#27714;&#12290;<strong>&#21487;&#35265;&#19968;&#20123;IP&#30340;&#35775;&#38382;&#34987;&#31105;&#27490;&#20102;</strong>&#12290;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>$ telnet 199.59.150.7 80<br>Trying 199.59.150.7...<br>Connected to 199.59.150.7.<br>Escape character is '^]'.<br>GET / HTTP/1.0<br>HOST:www.twitter.com<br><br>HTTP/1.0 301 Moved Permanently<br>content-length: 0<br>date: Sun, 08 Feb 2015 06:28:08 UTC<br>location: https://www.twitter.com/<br>server: tsa_a<br>set-cookie: guest_id=v1%3A142337688883648506; Domain=.twitter.com; Path=/; Expires=Tue, 07-Feb-2017 06:28:08 UTC<br>x-connection-hash: 0f5eab0ea2d6309109f15447e1da6b13<br>x-response-time: 2</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<h3>&#40657;&#21517;&#21333;/&#30333;&#21517;&#21333;</h3>\n<div>&#24819;&#35201;&#33719;&#21462;&#21040;&#27491;&#30830;&#30340;IP&#65292;&#33258;&#28982;&#30340;&#40657;&#21517;&#21333;/&#30333;&#21517;&#21333;&#20004;&#31181;&#24605;&#36335;&#12290;</div>\n<div>&#19979;&#38754;&#21015;&#20986;&#19968;&#20123;&#30456;&#20851;&#30340;&#39033;&#30446;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>https://github.com/holmium/dnsforwarder<br>https://code.google.com/p/huhamhire-hosts/<br>https://github.com/felixonmars/dnsmasq-china-list</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<h3>&#26412;&#22320;DNS&#36719;&#20214;</h3>\n<ul>\n<li>&#20462;&#25913;hosts&#25991;&#20214;<br />&#30456;&#20449;&#22823;&#23478;&#37117;&#24456;&#29087;&#24713;&#65292;&#20063;&#26377;&#19968;&#20123;&#24037;&#20855;&#21487;&#20197;&#33258;&#21160;&#26356;&#26032;hosts&#25991;&#20214;&#30340;&#12290;</li>\n<li>&#27983;&#35272;&#22120;pac&#25991;&#20214;<br />&#20027;&#27969;&#27983;&#35272;&#22120;&#25110;&#32773;&#20854;&#25554;&#20214;&#65292;&#37117;&#21487;&#20197;&#37197;&#32622;pac&#25991;&#20214;&#12290;pac&#25991;&#20214;&#23454;&#38469;&#19978;&#26159;&#19968;&#20010;JS&#25991;&#20214;&#65292;&#21487;&#20197;&#36890;&#36807;&#32534;&#31243;&#30340;&#26041;&#24335;&#26469;&#25511;&#21046;dns&#35299;&#26512;&#32467;&#26524;&#12290;&#20854;&#25928;&#26524;&#31867;&#20284;hosts&#25991;&#20214;&#65292;&#19981;&#36807;pac&#25991;&#20214;&#36890;&#24120;&#37117;&#26159;&#30001;&#25554;&#20214;&#25511;&#21046;&#33258;&#21160;&#26356;&#26032;&#30340;&#12290;&#21482;&#33021;&#25511;&#21046;&#27983;&#35272;&#22120;&#30340;dns&#35299;&#26512;&#12290;</li>\n<li>&#26412;&#22320;dns&#26381;&#21153;&#22120;&#65292;dnsmasq<br />&#22312;linux&#19979;&#65292;&#21487;&#20197;&#33258;&#24049;&#37197;&#32622;&#19968;&#20010;dnsmasq&#26381;&#21153;&#22120;&#65292;&#28982;&#21518;&#33258;&#24049;&#31649;&#29702;dns&#12290;&#19981;&#36807;&#27604;&#36739;&#39640;&#32423;&#65292;&#20063;&#27604;&#36739;&#40635;&#28902;&#12290;</li>\n</ul>\n<div>&#39034;&#20415;&#25552;&#19968;&#19979;&#65292;&#23454;&#38469;&#19978;&#65292;kubuntu&#30340;NetworkManager&#20250;&#33258;&#24049;&#21551;&#21160;&#19968;&#20010;&#31169;&#26377;&#30340;dnsmasq&#36827;&#31243;&#26469;&#20570;dns&#35299;&#26512;&#12290;&#19981;&#36807;&#23427;&#20390;&#21548;&#30340;&#26159;127.0.1.1&#65292;&#25152;&#20197;&#24182;&#19981;&#20250;&#36896;&#25104;&#20914;&#31361;&#12290;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>/usr/sbin/dnsmasq --no-resolv --keep-in-foreground --no-hosts --bind-interfaces --pid-file=/run/sendsigs.omit.d/network-manager.dnsmasq.pid --listen-address=127.0.1.1 --conf-file=/var/run/NetworkManager/dnsmasq.conf</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<h3>&#36335;&#30001;&#22120;&#26234;&#33021;DNS</h3>\n<div>&#22522;&#20110;OpenWRT/Tomoto&#30340;&#36335;&#30001;&#22120;&#21487;&#20197;&#22312;&#19978;&#38754;&#37197;&#32622;dns server&#65292;&#20174;&#32780;&#23454;&#29616;&#22312;&#36335;&#30001;&#22120;&#32423;&#21035;&#26234;&#33021;dns&#35299;&#26512;&#12290;&#29616;&#22312;&#22269;&#20869;&#30340;&#19968;&#20123;&#36335;&#30001;&#22120;&#26159;&#22522;&#20110;OpenWRT&#30340;&#65292;&#22240;&#27492;&#25903;&#25345;&#37197;&#32622;dns&#26381;&#21153;&#22120;&#12290;<br />&#21442;&#32771;&#39033;&#30446;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>https://github.com/clowwindy/ChinaDNS</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<h2>http proxy</h2>\n<h3>http proxy&#35831;&#27714;&#21644;&#27809;&#26377;proxy&#30340;&#35831;&#27714;&#30340;&#21306;&#21035;</h3>\n<div>&#22312;chrome&#37324;&#27809;&#26377;&#35774;&#32622;http proxy&#30340;&#35831;&#27714;&#22836;&#20449;&#24687;&#26159;&#36825;&#26679;&#30340;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>GET /nocache/fesplg/s.gif<br>Host: www.baidu.com</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#22312;&#35774;&#32622;&#20102;http proxy&#20043;&#21518;&#65292;&#21457;&#36865;&#30340;&#35831;&#27714;&#22836;&#26159;&#36825;&#26679;&#30340;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>GET http://www.baidu.com//nocache/fesplg/s.gif<br>Host: www.baidu.com<br>Proxy-Connection: keep-alive</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#21306;&#21035;&#26159;&#37197;&#32622;http proxy&#20043;&#21518;&#65292;&#20250;&#22312;&#35831;&#27714;&#37324;&#21457;&#36865;&#23436;&#25972;&#30340;url&#12290;</div>\n<div>client&#22312;&#21457;&#36865;&#35831;&#27714;&#26102;&#65292;&#22914;&#26524;&#27809;&#26377;proxy&#65292;&#21017;&#30452;&#25509;&#21457;&#36865;path&#65292;&#22914;&#26524;&#26377;proxy&#65292;&#21017;&#35201;&#21457;&#36865;&#23436;&#25972;&#30340;url&#12290;</div>\n<div>&#23454;&#38469;&#19978;http proxy server&#21487;&#20197;&#22788;&#29702;&#20004;&#31181;&#24773;&#20917;&#65292;&#21363;&#20351;&#23458;&#25143;&#31471;&#27809;&#26377;&#21457;&#36865;&#23436;&#25972;&#30340;url&#65292;&#22240;&#20026;host&#23383;&#27573;&#37324;&#65292;&#24050;&#32463;&#26377;host&#20449;&#24687;&#20102;&#12290;</div>\n<div>&#20026;&#20160;&#20040;&#35831;&#27714;&#37324;&#35201;&#26377;&#23436;&#25972;&#30340;url&#65311;</div>\n<div>&#21382;&#21490;&#21407;&#22240;&#12290;</div>\n<h3>&#30446;&#26631;&#26381;&#21153;&#22120;&#33021;&#21542;&#24863;&#30693;&#21040;http proxy&#30340;&#23384;&#22312;&#65311;</h3>\n<div>&#24403;&#25105;&#20204;&#20351;&#29992;http proxy&#26102;&#65292;&#26377;&#20010;&#38382;&#39064;&#21487;&#33021;&#20250;&#20851;&#24515;&#30340;&#65306;&#30446;&#26631;&#26381;&#21153;&#22120;&#33021;&#21542;&#24863;&#30693;&#21040;http proxy&#30340;&#23384;&#22312;&#65311;</div>\n<div>&#19968;&#20010;&#37197;&#32622;&#20102;proxy&#30340;&#27983;&#35272;&#22120;&#35831;&#27714;&#22836;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>GET http://55.75.138.79:9999/ HTTP/1.1<br>Host: 55.75.138.79:9999<br>Proxy-Connection: keep-alive</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#23454;&#38469;&#19978;&#30446;&#26631;&#26381;&#21153;&#22120;&#25509;&#25910;&#21040;&#30340;&#20449;&#24687;&#26159;&#36825;&#26679;&#23376;&#30340;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>GET / HTTP/1.1<br>Host: 55.75.138.79:9999<br>Connection: keep-alive</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#21487;&#35265;&#65292;http proxy&#26381;&#21153;&#22120;&#24182;&#27809;&#26377;&#25226;proxy&#30456;&#20851;&#20449;&#24687;&#21457;&#36865;&#21040;&#30446;&#26631;&#26381;&#21153;&#22120;&#19978;&#12290;</div>\n<div>&#22240;&#27492;&#65292;&#30446;&#26631;&#26381;&#21153;&#22120;&#26159;&#27809;&#26377;&#21150;&#27861;&#30693;&#36947;&#29992;&#25143;&#26159;&#21542;&#20351;&#29992;&#20102;http proxy&#12290;</div>\n<h3>http proxy keep-alive</h3>\n<div>&#23454;&#38469;&#19978;Proxy-Connection: keep-alive&#36825;&#20010;&#35831;&#27714;&#22836;&#26159;&#38169;&#35823;&#30340;&#65292;&#19981;&#22312;&#26631;&#20934;&#37324;&#65306;</div>\n<div>&#22240;&#20026;http1.1 &#40664;&#35748;&#23601;&#26159;Connection: keep-alive</div>\n<div>&#22914;&#26524;client&#24819;&#35201;http proxy&#22312;&#35831;&#27714;&#20043;&#21518;&#20851;&#38381;connection&#65292;&#21487;&#20197;&#29992;Proxy-Connection: close &#26469;&#25351;&#26126;&#12290;</div>\n<div><a href=\"http://homepage.ntlworld.com/jonathan.deboynepollard/FGA/web-proxy-connection-header.html\" rel=\"external\" target=\"_blank\">http://homepage.ntlworld.com/jonathan.deboynepollard/FGA/web-proxy-connection-header.html</a></div>\n<h3>http proxy authentication</h3>\n<div>&#24403;http proxy&#38656;&#35201;&#23494;&#30721;&#26102;&#65306;</div>\n<div>&#31532;&#19968;&#27425;&#35831;&#27714;&#27809;&#26377;&#23494;&#30721;&#65292;&#21017;&#20250;&#22238;&#24212;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>HTTP/1.1 407 Proxy authentication required<br>Proxy-Authenticate: Basic realm=\"Polipo\"</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#27983;&#35272;&#22120;&#20250;&#24377;&#20986;&#31383;&#21475;&#65292;&#35201;&#27714;&#36755;&#20837;&#23494;&#30721;&#12290;<br />&#22914;&#26524;&#23494;&#30721;&#38169;&#35823;&#30340;&#35805;&#65292;&#22238;&#24212;&#22836;&#26159;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>HTTP/1.1 407 Proxy authentication incorrect</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#22914;&#26524;&#26159;&#37197;&#32622;&#20102;&#23494;&#30721;&#65292;&#21457;&#36865;&#30340;&#35831;&#27714;&#22836;&#21017;&#26159;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>GET http://www.baidu.com/ HTTP/1.1<br>Host: www.baidu.com<br>Proxy-Connection: keep-alive<br>Proxy-Authorization: Basic YWRtaW46YWRtaW4=</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>Proxy-Authorization&#23454;&#38469;&#26159;Base64&#32534;&#30721;&#12290;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>base64(\"admin:admin\") == \"YWRtaW46YWRtaW4=\"</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<h3>http proxy&#23545;&#20110;&#19981;&#35748;&#35782;&#30340;header&#21644;&#26041;&#27861;&#30340;&#22788;&#29702;&#65306;</h3>\n<div>http proxy&#36890;&#24120;&#20250;&#23613;&#37327;&#21407;&#26679;&#21457;&#36865;&#65292;&#22240;&#20026;&#24456;&#22810;&#31243;&#24207;&#37117;&#25193;&#23637;&#20102;http method&#65292;&#22914;&#26524;&#19981;&#25903;&#25345;&#65292;&#24456;&#22810;&#31243;&#24207;&#37117;&#19981;&#33021;&#27491;&#24120;&#24037;&#20316;&#12290;</div>\n<div>&#23458;&#25143;&#31471;&#29992;OPTIONS &#35831;&#27714;&#21487;&#20197;&#25506;&#27979;&#26381;&#21153;&#22120;&#25903;&#25345;&#30340;&#26041;&#27861;&#12290;&#20294;&#26159;&#24847;&#20041;&#19981;&#22823;&#12290;</div>\n<h2>https proxy</h2>\n<div>&#24403;&#35775;&#38382;&#19968;&#20010;https&#32593;&#31449;&#26102;&#65292;<a href=\"https://github.com/\" rel=\"external\" target=\"_blank\">https://github.com</a></div>\n<div>&#20808;&#21457;&#36865;connect method&#65292;&#22914;&#26524;&#25903;&#25345;&#65292;&#20250;&#36820;&#22238;200</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>CONNECT github.com:443 HTTP/1.1<br>Host: github.com<br>Proxy-Connection: keep-alive<br>User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36<br><br>HTTP/1.1 200 OK</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<h3>http tunnel</h3>\n<div><a href=\"http://en.wikipedia.org/wiki/HTTP_tunnel#HTTP_CONNECT_tunneling\" rel=\"external\" target=\"_blank\">http://en.wikipedia.org/wiki/HTTP_tunnel#HTTP_CONNECT_tunneling</a></div>\n<div>&#36890;&#36807;connect method&#65292;http proxy server&#23454;&#38469;&#19978;&#20805;&#24403;tcp&#36716;&#21457;&#30340;&#20013;&#38388;&#20154;&#12290;<br />&#27604;&#22914;&#65292;&#29992;nc &#36890;&#36807;http proxy&#26469;&#36830;42&#31471;&#21475;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>$ nc -x10.<span>2.3</span>.<span>4</span>:<span>8080</span> -Xconnect host.example.com <span>42</span></span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#21407;&#29702;&#26159;&#21033;&#29992;CONNECT&#26041;&#27861;&#65292;&#35753;http proxy&#26381;&#21153;&#22120;&#20805;&#24403;&#20013;&#38388;&#20154;&#12290;</div>\n<h3>https proxy&#30340;&#23433;&#20840;&#24615;&#65311;</h3>\n<div>proxy server&#21487;&#20197;&#25343;&#21040;&#20160;&#20040;&#20449;&#24687;&#65311;</div>\n<div>&#36890;&#36807;&#19968;&#20010;http proxy&#21435;&#35775;&#38382;&#25903;&#20184;&#23453;&#26159;&#21542;&#23433;&#20840;&#65311;</div>\n<ul>\n<li>&#21487;&#20197;&#30693;&#36947;host&#65292;&#21363;&#35201;&#35775;&#38382;&#30340;&#26159;&#21738;&#20010;&#32593;&#31449;</li>\n<li>&#25343;&#19981;&#21040;url&#20449;&#24687;</li>\n<li>https&#21327;&#35758;&#20445;&#35777;&#19981;&#20250;&#27844;&#38706;&#36890;&#20449;&#20869;&#23481;</li>\n<li>TLS(Transport Layer Security) &#22312;&#25569;&#25163;&#26102;&#65292;&#29983;&#25104;&#24378;&#24230;&#36275;&#22815;&#30340;&#38543;&#26426;&#25968;</li>\n<li>TLS &#27599;&#19968;&#20010;record&#37117;&#35201;&#26377;&#19968;&#20010;sequence number&#65292;&#27599;&#21457;&#19968;&#20010;&#22686;&#21152;&#19968;&#20010;&#65292;&#24182;&#19988;&#26159;&#19981;&#33021;&#32763;&#36716;&#30340;&#12290;</li>\n<li>TLS &#20445;&#35777;&#19981;&#20250;&#20986;&#29616;&#37325;&#25918;&#25915;&#20987;</li>\n</ul>\n<div>TLS&#30340;&#20869;&#23481;&#24456;&#22810;&#65292;&#36825;&#37324;&#35828;&#21040;&#20851;&#20110;&#23433;&#20840;&#30340;&#19968;&#20123;&#20851;&#38190;&#28857;&#12290;</div>\n<div>&#27880;&#24847;&#20107;&#39033;&#65306;</div>\n<ul>\n<li>&#30830;&#20445;&#26159;https&#35775;&#38382;</li>\n<li>&#30830;&#20445;&#35775;&#38382;&#32593;&#31449;&#30340;&#35777;&#20070;&#27809;&#26377;&#38382;&#39064;</li>\n</ul>\n<div>&#26159;&#21542;&#30495;&#30340;&#23433;&#20840;&#20102;&#65311;&#26356;&#24378;&#30340;&#25915;&#20987;&#32773;&#65281;</div>\n<div>&#27969;&#37327;&#21163;&#25345; &mdash;&mdash; &#28014;&#23618;&#30331;&#24405;&#26694;&#30340;&#38544;&#24739;</div>\n<div><a href=\"http://fex.baidu.com/blog/2014/06/danger-behind-popup-login-dialog/\" rel=\"external\" target=\"_blank\">http://fex.baidu.com/blog/2014/06/danger-behind-popup-login-dialog/</a></div>\n<div><strong>&#25152;&#20197;&#65292;&#23613;&#37327;&#19981;&#35201;&#20351;&#29992;&#26469;&#36335;&#19981;&#26126;&#30340;http/https proxy&#65292;&#20351;&#29992;&#20844;&#24320;&#30340;wifi&#20063;&#35201;&#23567;&#24515;&#12290;</strong></div>\n<h2>goagent&#24037;&#20316;&#21407;&#29702;</h2>\n<ul>\n<li>local http/https proxy</li>\n<li>&#20266;&#36896;https&#35777;&#20070;&#65292;&#23548;&#20837;&#27983;&#35272;&#22120;&#20449;&#20219;&#21015;&#34920;&#37324;</li>\n<li>&#27983;&#35272;&#22120;&#37197;&#32622;http/https proxy</li>\n<li>&#35299;&#26512;&#20986;http/https request&#30340;&#20869;&#23481;&#12290;&#28982;&#21518;&#25226;&#36825;&#20123;&#35831;&#27714;&#20869;&#23481;&#25171;&#21253;&#65292;&#21457;&#32473;GAE&#26381;&#21153;&#22120;</li>\n<li>&#19982;GAE&#36890;&#20449;&#36890;&#36807;http/https&#65292;&#20869;&#23481;&#29992;RC4&#31639;&#27861;&#21152;&#23494;</li>\n<li>GAE&#26381;&#21153;&#22120;&#65292;&#20877;&#35843;&#29992;google&#25552;&#20379;&#30340; urlfetch&#65292;&#26469;&#33719;&#24471;&#35831;&#27714;&#30340;&#22238;&#24212;&#65292;&#28982;&#21518;&#20877;&#25226;&#22238;&#24212;&#25171;&#21253;&#65292;&#36820;&#22238;&#32473;&#23458;&#25143;&#31471;&#12290;</li>\n<li>&#23458;&#25143;&#31471;&#25226;&#22238;&#24212;&#20256;&#32473;&#27983;&#35272;&#22120;</li>\n<li>&#33258;&#24102;dns&#35299;&#26512;&#26381;&#21153;&#22120;</li>\n<li>&#22312;local/certs/ &#30446;&#24405;&#19979;&#21487;&#20197;&#25214;&#21040;&#32531;&#23384;&#30340;&#20266;&#36896;&#30340;&#35777;&#20070;</li>\n</ul>\n<div>fiddler&#25235;&#21462;https&#25968;&#25454;&#21253;&#26159;&#21516;&#26679;&#21407;&#29702;&#12290;</div>\n<div>goagent&#20250;&#20026;&#27599;&#19968;&#20010;https&#32593;&#31449;&#20266;&#36896;&#19968;&#20010;&#35777;&#20070;&#65292;&#24182;&#32531;&#23384;&#36215;&#26469;&#12290;&#27604;&#22914;&#19979;&#38754;&#36825;&#20010;github&#30340;&#35777;&#20070;&#65306;<br /><a href=\"http://hengyunabc.github.io/img/goagent-github-cert.png\" rel=\"article0\" title=\"goagent-github-cert.png\"><img alt=\"goagent-github-cert.png\" src=\"http://hengyunabc.github.io/img/goagent-github-cert.png\"></a><span>goagent-github-cert.png</span></div>\n<div>goagent&#30340;&#20195;&#30721;&#22312;3.0&#20043;&#21518;&#65292;&#25903;&#25345;&#20102;&#24456;&#22810;&#20854;&#23427;&#21151;&#33021;&#65292;&#21464;&#24471;&#26377;&#28857;&#28151;&#20081;&#20102;&#12290;</div>\n<div>&#20197;3.2.0 &#29256;&#26412;&#20026;&#20363;&#65306;</div>\n<div>&#20027;&#35201;&#30340;&#20195;&#30721;&#26159;&#22312;server/gae/gae.py &#37324;&#12290;<br /><a href=\"https://github.com/goagent/goagent/blob/v3.2.0/server/gae/gae.py#L107\" rel=\"external\" target=\"_blank\">https://github.com/goagent/goagent/blob/v3.2.0/server/gae/gae.py#L107</a></div>\n<div>&#19968;&#20123;&#20195;&#30721;&#23454;&#29616;&#30340;&#32454;&#33410;&#65306;</div>\n<ul>\n<li>&#25903;&#25345;&#26368;&#38271;&#30340;url&#26159;2083&#65292;&#22240;&#20026;gae sdk&#30340;&#38480;&#21046;&#12290;<br /><a href=\"https://github.com/AppScale/gae_sdk/blob/master/google/appengine/api/taskqueue/taskqueue.py#L241\" rel=\"external\" target=\"_blank\">https://github.com/AppScale/gae_sdk/blob/master/google/appengine/api/taskqueue/taskqueue.py#L241</a></li>\n<li>&#22914;&#26524;&#22238;&#24212;&#30340;&#20869;&#23481;&#26159;/text, json, javascript&#65292;&#19988; &gt; 512&#20250;&#29992;gzip&#26469;&#21387;&#32553;</li>\n<li>&#22788;&#29702;&#19968;&#20123;Content-Range &#30340;&#22238;&#24212;&#20869;&#23481;&#12290;Content-Range &#30340;&#20195;&#30721;&#34429;&#28982;&#21482;&#26377;&#19968;&#28857;&#28857;&#65292;&#20294;&#26159;&#22914;&#26524;&#26159;&#19981;&#29087;&#24713;&#30340;&#35805;&#65292;&#35201;&#33457;&#19978;&#19981;&#23569;&#24037;&#22827;&#12290;</li>\n<li>goagent&#30340;&#29983;&#25104;&#35777;&#20070;&#30340;&#20195;&#30721;&#22312; local/proxylib.py&#30340;&#36825;&#20010;&#20989;&#25968;&#37324;&#65306;</li>\n</ul>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span><br><span>2</span></pre>\n</td>\n<td>\n<pre><span><span>@staticmethod</span></span><br><span><span><span>def</span> <span>_get_cert</span><span>(commonname, sans=<span>()</span>)</span>:</span></span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<h3>&#20026;&#20160;&#20040;goagent&#21487;&#20197;&#30475;&#35270;&#39057;&#65311;</h3>\n<div>&#22240;&#20026;&#24456;&#22810;&#32593;&#31449;&#37117;&#26159;http&#21327;&#35758;&#30340;&#12290;&#26377;&#23569;&#37096;&#20998;&#26159;rmtp&#21327;&#35758;&#30340;&#65292;&#20063;&#26377;&#26159;rmtp over http&#30340;&#12290;</div>\n<div>&#22312;youku&#30475;&#35270;&#39057;&#30340;&#19968;&#20010;&#35831;&#27714;&#25968;&#25454;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>http://14.152.72.22/youku/65748B784A636820C5A81B41C7/030002090454919F64A167032DBBC7EE242548-46C9-EB9D-916D-D8BA8D5159D3.flv?&amp;start=158<br>response&#65306;<br>Connection:close<br>Content-Length:7883513<br>Content-Type:video/x-flv<br>Date:Wed, 17 Dec 2014 17:55:24 GMT<br>ETag:\"316284225\"<br>Last-Modified:Wed, 17 Dec 2014 15:21:26 GMT<br>Server:YOUKU.GZ</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#21487;&#20197;&#30475;&#21040;&#65292;&#26377;ETag&#65292;&#26377;&#38271;&#24230;&#20449;&#24687;&#31561;&#12290;</div>\n<h3>goagent&#32570;&#28857;</h3>\n<ul>\n<li>&#21482;&#26159;http proxy&#65292;&#19981;&#33021;&#20195;&#29702;&#20854;&#23427;&#21327;&#35758;</li>\n<li>google&#30340;IP&#32463;&#24120;&#22833;&#25928;</li>\n<li>&#19981;&#25903;&#25345;websocket&#21327;&#35758;</li>\n<li>&#37197;&#32622;&#22797;&#26434;</li>\n</ul>\n<h2>vpn</h2>\n<h3>&#27969;&#34892;&#30340;vpn&#31867;&#22411;</h3>\n<ul>\n<li>PPTP&#65292;linux pptpd&#65292;&#23433;&#20840;&#24615;&#20302;&#65292;&#19981;&#33021;&#20445;&#35777;&#25968;&#25454;&#23436;&#25972;&#24615;&#25110;&#32773;&#26469;&#28304;&#65292;MPPE&#21152;&#23494;&#26292;&#21147;&#30772;&#35299;</li>\n<li>L2TP&#65292;linux xl2tpd&#65292;&#39044;&#20849;&#20139;&#23494;&#38053;&#21487;&#20197;&#20445;&#35777;&#23433;&#20840;&#24615;</li>\n<li>SSTP&#65292;&#22522;&#20110;HTTPS&#65292;&#24494;&#36719;&#25552;&#20986;&#12290;linux&#24320;&#28304;&#23454;&#29616;SoftEther VPN</li>\n<li>OPENVPN&#65292;&#22522;&#20110;SSL&#65292;&#39044;&#20849;&#20139;&#23494;&#38053;&#21487;&#20197;&#20445;&#35777;&#23433;&#20840;&#24615;</li>\n<li>&#25152;&#35859;&#30340;SSL VPN&#65292;&#21508;&#23478;&#21378;&#21830;&#26377;&#33258;&#24049;&#30340;&#23454;&#29616;&#65292;&#27809;&#26377;&#32479;&#19968;&#30340;&#26631;&#20934;</li>\n<li>&#26032;&#22411;&#30340;staless VPN&#65292;&#20687;sigmavpn/ShadowVPN&#31561;</li>\n</ul>\n<div>&#29616;&#29366;&#65306;</div>\n<ul>\n<li>PPTP/L2TP &#21487;&#29992;&#65292;&#20294;&#21487;&#33021;&#20250;&#19981;&#31649;&#29992;</li>\n<li>SoftEther VPN/OPENVPN &#21487;&#33021;&#20250;&#23548;&#33268;&#26381;&#21153;&#22120;&#34987;&#23553;IP&#65292;&#36830;&#19981;&#19978;&#65292;&#24910;&#29992;</li>\n<li>ShadowVPN&#21487;&#29992;&#65292;sigmavpn&#27809;&#26377;&#27979;&#35797;</li>\n</ul>\n<div>&#29468;&#27979;&#19979;&#20026;&#20160;&#20040;PPTP&#65292;L2TP&#36825;&#20123;&#26041;&#26696;&#23481;&#26131;&#34987;&#26816;&#27979;&#21040;&#65311;</div>\n<div>&#21487;&#33021;&#26159;&#22240;&#20026;&#23427;&#20204;&#30340;&#21327;&#35758;&#37117;&#26377;&#26126;&#26174;&#30340;&#26631;&#22836;&#65306;</div>\n<ul>\n<li>&#36716;&#21457;&#30340;&#26159;ppp&#21327;&#35758;&#25968;&#25454;&#65292;&#25569;&#25163;&#26377;&#29305;&#24449;</li>\n<li>PPTP&#21327;&#35758;&#26377;GRE&#26631;&#22836;&#21644;PPP&#26631;&#22836;</li>\n<li>L2TP&#26377;L2TP&#26631;&#22836;&#21644;PPP&#26631;&#22836;</li>\n<li>L2TP&#35201;&#29992;&#21040;IPsec</li>\n</ul>\n<div>&#21442;&#32771;&#65306;</div>\n<div><a href=\"https://technet.microsoft.com/zh-cn/library/cc771298(v=ws.10).aspx\" rel=\"external\" target=\"_blank\">https://technet.microsoft.com/zh-cn/library/cc771298(v=ws.10).aspx</a></div>\n<h3>&#32593;&#39029;&#29256;&#30340;SSL VPN</h3>\n<div>&#26377;&#20123;&#20225;&#19994;&#65292;&#25110;&#32773;&#23398;&#26657;&#37324;&#65292;&#20250;&#26377;&#36825;&#31181;VPN&#65306;</div>\n<ul>\n<li>&#32593;&#39029;&#30331;&#38470;&#24080;&#21495;</li>\n<li>&#35774;&#32622;IE&#20195;&#29702;&#65292;&#20026;&#36828;&#31243;&#26381;&#21153;&#22120;&#22320;&#22336;</li>\n<li>&#36890;&#36807;&#20195;&#29702;&#27983;&#35272;&#20869;&#37096;&#32593;&#39029;</li>\n</ul>\n<div>&#36825;&#31181;SSL VPN&#21407;&#29702;&#24456;&#31616;&#21333;&#65292;&#23601;&#26159;&#19968;&#20010;&#30331;&#38470;&#39564;&#35777;&#30340;http proxy&#65292;&#20854;&#23454;&#24182;&#19981;&#33021;&#31639;&#26159;VPN&#65311;</div>\n<h3>&#26032;&#22411;&#30340;staless vpnVPN&#65292;sigmavpn/ShadowVPN</h3>\n<div>&#36825;&#31181;&#26032;&#22411;VPN&#30340;&#21407;&#29702;&#26159;&#65292;&#21033;&#29992;&#34394;&#25311;&#30340;&#32593;&#32476;&#35774;&#22791;TUN&#21644;TAP&#65292;&#25226;&#35831;&#27714;&#25968;&#25454;&#20808;&#21457;&#32473;&#34394;&#25311;&#35774;&#22791;&#65292;&#28982;&#21518;&#25226;&#25968;&#25454;&#21152;&#23494;&#36716;&#21457;&#21040;&#36828;&#31243;&#26381;&#21153;&#22120;&#12290;&#65288;VPN&#37117;&#36825;&#21407;&#29702;&#65311;&#65289;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>you &lt;-&gt; local &lt;-&gt; protocol &lt;-&gt; remote &lt;-&gt; ...... &lt;-&gt; remote &lt;-&gt; protocol &lt;-&gt; local &lt;-&gt; peer</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div>&#36825;&#31181;&#26032;&#22411;VPN&#30340;&#29305;&#28857;&#26159;&#24456;&#36731;&#37327;&#65292;&#27809;&#26377;&#20256;&#32479;VPN&#37027;&#20040;&#22797;&#26434;&#30340;&#25569;&#25163;&#21152;&#23494;&#25511;&#21046;&#31561;&#65292;&#32780;&#21521;&#20010;&#20154;&#65292;&#32780;&#38750;&#20225;&#19994;&#12290;SigmaVPN&#21495;&#31216;&#21482;&#26377;&#20960;&#30334;&#34892;&#20195;&#30721;&#12290;</div>\n<div>&#21442;&#32771;&#65306;</div>\n<div><a href=\"http://zh.wikipedia.org/wiki/TUN%E4%B8%8ETAP\" rel=\"external\" target=\"_blank\">http://zh.wikipedia.org/wiki/TUN%E4%B8%8ETAP</a></div>\n<div><a href=\"https://code.google.com/p/sigmavpn/wiki/Introduction\" rel=\"external\" target=\"_blank\">https://code.google.com/p/sigmavpn/wiki/Introduction</a></div>\n<h3>ubuntu pptp vpn server&#23433;&#35013;</h3>\n<div>ubuntu&#23448;&#26041;&#21442;&#32771;&#25991;&#26723;&#65306;<br /><a href=\"https://help.ubuntu.com/community/PPTPServer\" rel=\"external\" target=\"_blank\">https://help.ubuntu.com/community/PPTPServer</a></div>\n<ul>\n<li>\n<div>vps &#35201;&#24320;&#21551;ppp&#21644;nat&#32593;&#32476;&#36716;&#21457;&#30340;&#21151;&#33021;</div>\n</li>\n<li>\n<div><strong>&#35774;&#32622;MTU&#65292;&#24314;&#35758;&#35774;&#32622;&#20026;1200&#20197;&#19979;</strong>&#65292;&#22240;&#20026;&#20013;&#38388;&#32593;&#32476;&#21487;&#33021;&#24456;&#22797;&#26434;&#65292;MTU&#22826;&#22823;&#21487;&#33021;&#23548;&#33268;&#36830;&#25509;&#22833;&#36133;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>iptables -A FORWARD -p tcp --syn -s 192.168.0.0/24 -j TCPMSS --set-mss 1200</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n</li>\n</ul>\n<h2>socks proxy</h2>\n<ul>\n<li>rfc &#25991;&#26723;&#65306; <a href=\"http://tools.ietf.org/html/rfc1928\" rel=\"external\" target=\"_blank\">http://tools.ietf.org/html/rfc1928</a></li>\n<li>\n<div>wiki&#19978;&#30340;&#31616;&#20171;&#65306; <a href=\"http://en.wikipedia.org/wiki/SOCKS#SOCKS5\" rel=\"external\" target=\"_blank\">http://en.wikipedia.org/wiki/SOCKS#SOCKS5</a></div>\n</li>\n<li>\n<div>socks4/socks4a &#24050;&#32463;&#36807;&#26102;</div>\n</li>\n<li>socks5</li>\n</ul>\n<div>socks5&#25903;&#25345;udp&#65292;&#25152;&#20197;&#22914;&#26524;&#23458;&#25143;&#31471;&#25226;dns&#26597;&#35810;&#20063;&#36208;socks&#30340;&#35805;&#65292;&#37027;&#20040;&#23601;&#21487;&#20197;&#30452;&#25509;&#35299;&#20915;dns&#30340;&#38382;&#39064;&#20102;&#12290;</div>\n<h3>socks proxy &#25569;&#25163;&#30340;&#36807;&#31243;</h3>\n<div>socks5&#27969;&#31243;</div>\n<ul>\n<li>&#23458;&#25143;&#31471;&#26597;&#35810;&#26381;&#21153;&#22120;&#25903;&#25345;&#30340;&#35748;&#35777;&#26041;&#24335;</li>\n<li>&#26381;&#21153;&#22120;&#22238;&#24212;&#25903;&#25345;&#30340;&#35748;&#35777;&#26041;&#24335;</li>\n<li>&#23458;&#25143;&#31471;&#21457;&#36865;&#35748;&#35777;&#20449;&#24687;&#65292;&#26381;&#21153;&#22120;&#22238;&#24212;</li>\n<li>\n<div>&#22914;&#26524;&#36890;&#36807;&#65292;&#23458;&#25143;&#31471;&#30452;&#25509;&#21457;&#36865;TCP/UDP&#30340;&#21407;&#22987;&#25968;&#25454;&#65292;&#20197;&#21518;proxy&#21482;&#21333;&#32431;&#36716;&#21457;&#25968;&#25454;&#27969;&#65292;&#19981;&#20570;&#20219;&#20309;&#22788;&#29702;&#20102;</div>\n</li>\n<li>\n<div><strong>socks proxy &#33258;&#36523;&#27809;&#26377;&#21152;&#23494;&#26426;&#21046;&#65292;&#31616;&#21333;&#30340;TCP/UDP forward</strong></div>\n</li>\n</ul>\n<div>socks&#21327;&#35758;&#20854;&#23454;&#26159;&#30456;&#24403;&#31616;&#21333;&#30340;&#65292;&#29992;wireshark&#25235;&#21253;&#65292;&#32467;&#21512;netty-codec-socks&#65292;&#24456;&#23481;&#26131;&#21487;&#20197;&#29702;&#35299;&#20854;&#24037;&#20316;&#36807;&#31243;&#12290;<br /><a href=\"https://github.com/netty/netty/tree/master/codec-socks\" rel=\"external\" target=\"_blank\">https://github.com/netty/netty/tree/master/codec-socks</a></div>\n<h3>ssh socks proxy</h3>\n<div>&#22914;&#26524;&#26377;&#19968;&#20010;&#22806;&#22269;&#30340;&#26381;&#21153;&#22120;&#65292;&#21487;&#20197;&#36890;&#36807;ssh&#36830;&#25509;&#30331;&#38470;&#65292;&#37027;&#20040;&#21487;&#20197;&#24456;&#31616;&#21333;&#22320;&#25645;&#24314;&#19968;&#20010;&#26412;&#22320;&#30340;socks5&#20195;&#29702;&#12290;</div>\n<div>XShell&#21487;&#20197;&#36890;&#36807;&ldquo;&#36716;&#31227;&#35268;&#21017;&rdquo;&#26469;&#37197;&#32622;&#26412;&#22320;socks&#26381;&#21153;&#22120;&#65292;putty&#20063;&#26377;&#31867;&#20284;&#30340;&#37197;&#32622;&#65306;<br /><a href=\"http://hengyunabc.github.io/img/xshell-sock5-proxy.png\" rel=\"article0\" title=\"xshell-sock5-proxy.png\"><img alt=\"xshell-sock5-proxy.png\" src=\"http://hengyunabc.github.io/img/xshell-sock5-proxy.png\"></a><span>xshell-sock5-proxy.png</span></div>\n<div>linux&#19979;&#21629;&#20196;&#34892;&#21551;&#21160;&#19968;&#20010;&#26412;&#22320;sock5&#26381;&#21153;&#22120;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>ssh -D <span>1080</span> user@romoteHost</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>ssh&#36824;&#26377;&#19968;&#20123;&#31471;&#21475;&#36716;&#21457;&#30340;&#25216;&#24039;&#65292;&#36825;&#23545;&#20110;&#27979;&#35797;&#32593;&#32476;&#31243;&#24207;&#65292;&#32469;&#36807;&#38450;&#28779;&#22681;&#20063;&#26159;&#24456;&#26377;&#24110;&#21161;&#30340;&#12290;</div>\n<div>&#21442;&#32771;&#65306;<a href=\"http://www.ibm.com/developerworks/cn/linux/l-cn-sshforward/\" rel=\"external\" target=\"_blank\">http://www.ibm.com/developerworks/cn/linux/l-cn-sshforward/</a></div>\n<h3>shadowsocks&#30340;&#24037;&#20316;&#21407;&#29702;</h3>\n<div>shadowsocks&#26159;&#38750;&#24120;&#27969;&#34892;&#30340;&#19968;&#20010;&#20195;&#29702;&#24037;&#20855;&#65292;&#20854;&#21407;&#29702;&#38750;&#24120;&#31616;&#21333;&#12290;</div>\n<ul>\n<li>&#23458;&#25143;&#31471;&#26381;&#21153;&#22120;&#39044;&#20849;&#20139;&#23494;&#30721;</li>\n<li>&#26412;&#22320;socks5 proxy server&#65288;&#26377;&#27809;&#26377;&#24819;&#36215;&#22312;&#23398;&#26657;&#26102;&#29992;&#30340;ccproxy&#65311;&#65289;</li>\n<li>&#36719;&#20214;/&#27983;&#35272;&#22120;&#37197;&#32622;&#26412;&#22320;socks&#20195;&#29702;</li>\n<li>&#26412;&#22320;socks server&#25226;&#25968;&#25454;&#21253;&#35013;&#65292;AES256&#21152;&#23494;&#65292;&#21457;&#36865;&#21040;&#36828;&#31243;&#26381;&#21153;&#22120;</li>\n<li>&#36828;&#31243;&#26381;&#21153;&#22120;&#35299;&#23494;&#65292;&#36716;&#21457;&#32473;&#23545;&#24212;&#30340;&#26381;&#21153;&#22120;</li>\n</ul>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>app =&gt; local socks server(encrypt) =&gt; shadowsocks server(decrypt) =&gt; real host<br><br>app &lt;= (decrypt) local socks server &lt;= (encrypt) shadowsocks server &lt;= real host</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div>&#20854;&#23427;&#30340;&#19968;&#20123;&#19996;&#19996;&#65306;</div>\n<ul>\n<li>&#19968;&#20010;&#31471;&#21475;&#19968;&#20010;&#23494;&#30721;&#65292;&#27809;&#26377;&#29992;&#25143;&#30340;&#27010;&#24565;</li>\n<li>&#25903;&#25345;&#22810;&#20010;workder&#24182;&#21457;</li>\n<li>&#21327;&#35758;&#31616;&#21333;&#65292;&#27604;socks&#21327;&#35758;&#36824;&#35201;&#31616;&#21333;&#65292;&#25277;&#21462;&#20102;socks&#21327;&#35758;&#30340;&#37096;&#20998;</li>\n</ul>\n<h3>shadowsoks&#30340;&#20248;&#28857;</h3>\n<ul>\n<li>&#20013;&#38388;&#27809;&#26377;&#20219;&#20309;&#25569;&#25163;&#30340;&#29615;&#33410;&#65292;&#30452;&#25509;&#26159;TCP&#25968;&#25454;&#27969;</li>\n<li>&#36895;&#24230;&#24555;</li>\n</ul>\n<h3>shadowsocks&#30340;&#23433;&#20840;&#24615;</h3>\n<ul>\n<li>&#26381;&#21153;&#22120;&#21487;&#20197;&#35299;&#20986;&#25152;&#26377;&#30340;TCP/UDP&#25968;&#25454;</li>\n<li>&#20013;&#38388;&#20154;&#25915;&#20987;&#65292;&#37325;&#25918;&#25915;&#20987;</li>\n</ul>\n<div>&#25152;&#20197;&#65292;<strong>&#23545;&#20110;&#31532;&#19977;&#26041;shadow socks&#26381;&#21153;&#22120;&#65292;&#35201;&#24910;&#37325;&#20351;&#29992;&#12290;</strong></div>\n<div>&#22312;&#20351;&#29992;shadowsocks&#30340;&#24773;&#20917;&#19979;&#65292;https&#36890;&#36805;&#26159;&#23433;&#20840;&#30340;&#65292;&#20294;&#26159;&#20173;&#28982;&#26377;&#21361;&#38505;&#65292;&#21442;&#35265;&#19978;&#38754;http proxy&#23433;&#20840;&#30340;&#20869;&#23481;&#12290;</div>\n<h3>vpn&#21644;socks&#20195;&#29702;&#30340;&#21306;&#21035;</h3>\n<div>&#20174;&#21407;&#29702;&#19978;&#26469;&#35828;&#65292;socks&#20195;&#29702;&#20250;&#26356;&#24555;&#65292;&#22240;&#20026;&#36716;&#21457;&#30340;&#25968;&#25454;&#26356;&#23569;&#12290;</div>\n<div>&#22240;&#20026;vpn&#36716;&#21457;&#30340;&#26159;ppp&#25968;&#25454;&#21253;&#65292;ppp&#21327;&#35758;&#26159;&#25968;&#25454;&#38142;&#36335;&#23618;(data link layer)&#30340;&#21327;&#35758;&#12290;socks&#36716;&#21457;&#30340;&#26159;TCP/UDP&#25968;&#25454;&#65292;&#26159;&#20256;&#36755;(transport)&#23618;&#12290;</div>\n<div>VPN&#30340;&#20248;&#28857;&#26159;&#24456;&#23481;&#26131;&#37197;&#32622;&#25104;&#20840;&#23616;&#30340;&#65292;&#36825;&#23545;&#20110;&#24456;&#22810;&#19981;&#33021;&#37197;&#32622;&#20195;&#29702;&#30340;&#31243;&#24207;&#26469;&#35828;&#24456;&#26041;&#20415;&#12290;&#32780;&#37197;&#32622;&#20840;&#23616;&#30340;socks proxy&#27604;&#36739;&#40635;&#28902;&#65292;&#30446;&#21069;&#35980;&#20284;&#36824;&#27809;&#26377;&#31616;&#21333;&#30340;&#26041;&#26696;&#12290;</div>\n<h3>linux&#19979;&#19968;&#20123;&#36719;&#20214;&#37197;&#32622;&#20195;&#29702;&#30340;&#26041;&#27861;</h3>\n<ul>\n<li>bash/shell</li>\n</ul>\n<div>&#23545;&#20110;shell&#65292;&#26368;&#31616;&#21333;&#30340;&#21150;&#27861;&#26159;&#22312;&#21629;&#20196;&#30340;&#21069;&#38754;&#35774;&#32622;&#19979;http_porxy&#30340;&#29615;&#22659;&#21464;&#37327;&#12290;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>http_proxy=http://<span>127.0</span>.<span>0.1</span>:<span>8123</span> wget http://test.com</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#25512;&#33616;&#30340;&#20570;&#27861;&#26159;&#22312;~/.bashrc &#25991;&#20214;&#37324;&#35774;&#32622;&#20004;&#20010;&#21629;&#20196;&#65292;&#24320;&#20851;http proxy&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span><br><span>2</span></pre>\n</td>\n<td>\n<pre><span><span>alias</span> proxyOn=<span>'export https_proxy=http://127.0.0.1:8123 &amp;&amp; http_proxy=http://127.0.0.1:8123'</span></span><br><span><span>alias</span> proxyOff=<span>'unset https_proxy &amp;&amp; unset  http_proxy'</span></span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#27880;&#24847;&#65292;&#22914;&#26524;&#24819;sudo&#30340;&#24773;&#20917;&#19979;&#65292;http proxy&#20173;&#28982;&#26377;&#25928;&#65292;&#35201;&#37197;&#32622;env_keep&#12290;</div>\n<div>&#22312;/etc/sudoers.d/&#30446;&#24405;&#19979;&#22686;&#21152;&#19968;&#20010;env_keep&#30340;&#25991;&#20214;&#65292;&#20869;&#23481;&#26159;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span></pre>\n</td>\n<td>\n<pre><span>Defaults env_keep += \" http_proxy https_proxy ftp_proxy \"</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<div></div>\n<div>&#21442;&#32771;&#65306;<br /><a href=\"https://help.ubuntu.com/community/AptGet/Howto#Setting_up_apt-get_to_use_a_http-proxy\" rel=\"external\" target=\"_blank\">https://help.ubuntu.com/community/AptGet/Howto#Setting_up_apt-get_to_use_a_http-proxy</a></div>\n<ul>\n<li>GUI&#36719;&#20214;</li>\n</ul>\n<div>&#29616;&#22312;&#22823;&#37096;&#20998;&#36719;&#20214;&#37117;&#21487;&#20197;&#35774;&#32622;&#20195;&#29702;&#12290;<br />gnome&#21644;kde&#37117;&#21487;&#20197;&#35774;&#32622;&#20840;&#23616;&#30340;&#20195;&#29702;&#12290;</div>\n<h3>linux&#19979;&#19981;&#25903;&#25345;&#20195;&#29702;&#30340;&#31243;&#24207;&#20351;&#29992;socks&#20195;&#29702;&#65306;tsocks</h3>\n<div>tsocks&#21033;&#29992;LD_PRELOAD&#26426;&#21046;&#65292;&#20195;&#29702;&#31243;&#24207;&#37324;&#30340;connect&#20989;&#25968;&#65292;&#28982;&#21518;&#23601;&#21487;&#20197;&#20195;&#29702;&#25152;&#26377;&#30340;TCP&#35831;&#27714;&#20102;&#12290;<br />&#19981;&#36807;dns&#35831;&#27714;&#65292;&#40664;&#35748;&#26159;&#36890;&#36807;udp&#26469;&#21457;&#36865;&#30340;&#65292;&#25152;&#20197;tsocks&#19981;&#33021;&#20195;&#29702;dns&#35831;&#27714;&#12290;</div>\n<div>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;tsocks&#20250;&#20808;&#21152;&#36733;~/.tsocks.conf&#65292;&#22914;&#26524;&#27809;&#26377;&#65292;&#20877;&#21152;&#36733;/etc/tsocks.conf&#12290;&#23545;&#20110;local ip&#19981;&#20250;&#20195;&#29702;&#12290;</div>\n<div>&#20351;&#29992;&#26041;&#27861;&#65306;</div>\n<figure>\n<table>\n<tbody>\n<tr>\n<td>\n<pre><span>1</span><br><span>2</span></pre>\n</td>\n<td>\n<pre><span>sudo apt-get install tsocks</span><br><span>LD_PRELOAD=/usr/lib/libtsocks.so wget http://www.facebook.com</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</figure>\n<h2>&#22522;&#20110;&#36335;&#30001;&#22120;&#30340;&#26041;&#26696;</h2>\n<div>&#22522;&#20110;&#36335;&#30001;&#22120;&#30340;&#26041;&#26696;&#26377;&#24456;&#22810;&#65292;&#21407;&#29702;&#21644;&#26412;&#26426;&#30340;&#26041;&#26696;&#26159;&#19968;&#26679;&#30340;&#65292;&#21482;&#19981;&#36807;&#25226;&#36825;&#20123;&#25514;&#26045;&#21069;&#31227;&#21040;&#36335;&#30001;&#22120;&#37324;&#12290;</div>\n<div>&#36335;&#30001;&#22120;&#30340;&#26041;&#26696;&#30340;&#20248;&#28857;&#26159;&#24456;&#26126;&#26174;&#30340;&#65306;</div>\n<ul>\n<li>&#25163;&#26426;/&#24179;&#26495;&#19981;&#29992;&#35774;&#32622;</li>\n<li>&#20844;&#21496;/&#23616;&#22495;&#32593;&#32423;&#30340;&#20195;&#29702;</li>\n</ul>\n<div>&#20294;&#26159;&#38656;&#35201;&#19987;&#38376;&#30340;&#36335;&#30001;&#22120;&#65292;&#21047;&#22266;&#20214;&#31561;&#12290;</div>\n<div>shadowsocks, shadowvpn&#37117;&#21487;&#20197;&#36305;&#22312;&#36335;&#30001;&#22120;&#19978;&#12290;</div>\n<div>&#19968;&#20123;&#39033;&#30446;&#25910;&#38598;&#65306;</div>\n<div><a href=\"https://github.com/lifetyper/FreeRouter_V2\" rel=\"external\" target=\"_blank\">https://github.com/lifetyper/FreeRouter_V2</a></div>\n<div><a href=\"https://gist.github.com/wen-long/8644243\" rel=\"external\" target=\"_blank\">https://gist.github.com/wen-long/8644243</a></div>\n<div><a href=\"https://github.com/ashi009/bestroutetb\" rel=\"external\" target=\"_blank\">https://github.com/ashi009/bestroutetb</a></div>\n<h2>&#25512;&#33616;&#30340;&#21150;&#27861;</h2>\n<div>&#23436;&#20840;&#20813;&#36153;</div>\n<ul>\n<li>chrome + switchsharp/SwitchyOmega + http proxy</li>\n<li>goagent</li>\n</ul>\n<div>&#31243;&#24207;&#21592;&#30340;&#25512;&#33616;</div>\n<ul>\n<li>chrome + switchsharp/SwitchyOmega + socks5 proxy</li>\n<li>aws&#20813;&#36153;&#19968;&#24180;&#30340;&#26381;&#21153;&#22120;/&#20854;&#23427;&#22269;&#22806;&#20813;&#36153;&#20113;&#20027;&#26426;&#65292;&#33410;&#28857;&#20301;&#32622;&#20915;&#23450;&#36895;&#24230;&#65292;&#25512;&#33616;&#19996;&#20140;&#26426;&#25151;</li>\n<li>shadowsocks</li>\n</ul>\n<div>&#31532;&#19977;&#26041;&#20813;&#36153;&#30340;&#26381;&#21153;&#22120;</div>\n<ul>\n<li>shadowsocks&#26381;&#21153;&#22120;&#65292;&#24494;&#20449;&#20844;&#20247;&#21495;&#65306;pennyjob</li>\n</ul>\n<div>&#25163;&#26426;&#36719;&#20214;&#65306;</div>\n<ul>\n<li>fqrouter</li>\n<li>shadowsocks client</li>\n</ul>\n<div>&#21830;&#19994;&#36719;&#20214;&#23433;&#20840;&#24615;&#33258;&#24049;&#32771;&#34385;</div>\n<h2>&#24635;&#32467;</h2>\n<ul>\n<li>&#26032;&#25216;&#26415;&#23618;&#20986;&#19981;&#31351;</li>\n<li>&#36234;&#27969;&#34892;&#65292;&#36234;&#23481;&#26131;&#22833;&#25928;</li>\n<li>&#23454;&#29616;&#19968;&#20010;proxy&#20854;&#23454;&#30456;&#24403;&#31616;&#21333;</li>\n<li>&#30693;&#20854;&#25152;&#20197;&#28982;&#65292;&#26356;&#22909;&#20351;&#29992;&#24037;&#20855;&#65292;&#20063;&#21487;&#20197;&#21019;&#20316;&#20986;&#33258;&#24049;&#30340;&#24037;&#20855;&#12290;</li>\n</ul>\n</div>\n<div>&#32763;&#22681;&#25216;&#26415;&#21338;&#23458;<a href=\"http://www.chinagfw.org/2013/09/blog-post.html\">&#35746;&#38405;&#22320;&#22336;&#21450;&#31038;&#20132;&#24080;&#21495;</a></div>\n</p>\n<p>请在<a href=\"https://getlantern.org\">这里</a>下载最新版Lantern 2.0，翻墙快速易用小巧安全。</p>\n","author":1005,"categories":[18270,18269,10466,15300],"tags":[7775,30463,8795]}