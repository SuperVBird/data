{"id":225277,"link":"https://chinadigitaltimes.net/chinese/2012/05/翻墙-用-stunnel-保护隐私/","date":"2012-05-09T13:10:14Z","modified":"2012-05-09T13:10:14Z","title":"翻墙 | 用 Stunnel 保护隐私","content":"<p>原文：<a rel=\"nofollow\" target=\"_blank\" href=\"http://igfw.net/archives/9024\">http://igfw.net/archives/9024</a></p>\n<div>\n<div>\n<div>\n<div>\n<div>\n<p>「因为我们要更好的上网，结果我们浪费了大量时间在跟GFW，联通，电信中斗争。」 -。-</p>\n<p>Stunnel 是个好东西，很小巧，它的原理是把服务器端的 http 代理加密成 https 代理，然后在本地也用 stunnel 把  https 代理转成 http 代理，这样在本地就有了一个 http  代理可用。goagent限制太多，自己搭建的服务器就是得花钱和浪费点时间。不过值得，相信我。</p>\n<p><span></span>服务器端搭建：</p>\n<p>1，http代理，用squid、polipo或者tinyporxy随便搞个http代理出来，此时这个代理是http的，直接用会被rst。<br /> 2，安装 stunnel ，配置大概如下，先用 openssl 产生一个证书：</p>\n<blockquote>\n<p>openssl req -new -x509 -days 365 -nodes -out /etc/stunnel.pem -keyout /etc/stunnel.pem</p>\n</blockquote>\n<blockquote>\n<p>cert = /etc/stunnel.pem<br /> chroot = /var/run/stunnel4/<br /> pid = /stunnel.pid<br /> client = no<br /> sslVersion = SSLv3<br /> socket = l:TCP_NODELAY=1<br /> socket = r:TCP_NODELAY=1<br /> socket = l:SO_LINGER=1:1<br /> socket = r:SO_LINGER=1:1</p>\n<p>[http]<br /> accept = 8888 #stunnel的端口<br /> connect = <a rel=\"nofollow\" target=\"_blank\" href=\"http://127.0.0.1:3128\">127.0.0.1:3128</a> #本地http端口</p>\n</blockquote>\n<p>然后启动 stunnel，服务器端就搭建好了。但此时代理是https的，必须在本地做好了 stunnel 客户端转成 http 才行。</p>\n<p>本地端：</p>\n<p>本地端其实超级简单了。Mac上直接用 macport，brew 安装个 stunnel 即可。如果不便，直接下我的编译好的，<a rel=\"nofollow\" target=\"_blank\" href=\"http://s.cn.gfw.io/sc/stunnel\">在这</a>。下载后 chmod +x stunnel</p>\n<p>写一个配置文件：</p>\n<p>client = yes #扮演客户端啦<br /> pid=/var/run/stunnel.pid<br /> debug = 7<br /> foreground = no #是否前台运行还是后台运行<br /> sslVersion = SSLv3<br /> verify=0<br /> [proxy]<br /> accept = <a rel=\"nofollow\" target=\"_blank\" href=\"http://127.0.0.1:9999\">127.0.0.1:9999</a><br /> connect = xxx.xxx.xxx.xxx:8888</p>\n<p>然后启动 stunnel 即可，执行 ./stunnel stunnel.conf</p>\n<p>这样，在本地就有一个 9999 端口的 http 代理，世界清净了，没有 rst 和偷窥。你懂的。</p>\n<p><strong>原文</strong>：<a rel=\"nofollow\" target=\"_blank\" href=\"http://w3.owind.com/pub/binary/2012/05/05/%E7%94%A8-stunnel-%E4%BF%9D%E6%8A%A4%E9%9A%90%E7%A7%81/\">http://w3.owind.com/pub/binary/2012/05/05/用-stunnel-保护隐私</a></p>\n<p>stunnel的Windows和Android版本可以在 <a rel=\"nofollow\" target=\"_blank\" href=\"ftp://ftp.stunnel.org/stunnel/\">ftp://ftp.stunnel.org/stunnel/</a> 下载。</p>\n</p></div>\n</div>\n</div>\n</div>\n</div>\n<p> </p>\n<div>请为我们投票：<a rel=\"nofollow\" target=\"_blank\" href=\"https://thebobs.com/chinese/category/2012/best-blog-2012/\">https://thebobs.com/chinese/category/2012/best-blog-2012/</a>。点击<a rel=\"nofollow\" target=\"_blank\" href=\"https://mycdt4.info/chinese/\">https://mycdt4.info/chinese/</a>，穿墙访问《中国数字时代》。《中国数字时代》开通IPv6，欢迎穿墙阅读。翻越防火长城，你可以到达世界上的每一个角落。（Across the Great Firewall, you can reach every corner in the world.）翻墙利器赛风3下载地址：<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima326\n\n\"> http://dld.bz/caonima326</p>\n<p></a>，<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima745\">http://dld.bz/caonima745</a><img width=\"1\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-8556062662027467117?l=www.chinagfw.org\" alt=\"\" /></div>\n</p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<p><iframe src=\"https://docs.google.com/spreadsheet/embeddedform?hl=zh-CN&#038;formkey=dGRpN3FrVThuMFFsZHBZcmNGLW94dEE6MQ\" width=\"510\" height=\"328\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading&#8230;</iframe></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=738338\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\">  <input type=\"submit\" id=\"in_post_subscribe\" value=\"订阅!\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"738338\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n</form>\n","author":1005,"categories":[18269,15300],"tags":[8795,8817]}