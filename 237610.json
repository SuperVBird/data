{"id":237610,"link":"https://chinadigitaltimes.net/chinese/2012/07/翻墙-openvpn-ipv6-安装方法/","date":"2012-07-04T12:30:12Z","modified":"2012-07-04T12:30:12Z","title":"翻墙 | OpenVPN IPv6 安装方法","content":"<p>原文：<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.cyups.com/?p=223\">http://www.cyups.com/?p=223</a></p>\n<div></div>\n<div><span>本方法只做参考，最新的openvpn 2.30方法有所改变。</span></p>\n<div>  <a rel=\"nofollow\" target=\"_blank\" href=\"http://logicmd.net/wp-content/uploads/2010/12/openvpn_logo.png\"><img title=\"openvpn_logo\" src=\"http://logicmd.net/wp-content/uploads/2010/12/openvpn_logo.png\" alt=\"openvpn_logo\" width=\"231\" height=\"54\" /></a><strong><a rel=\"nofollow\" title=\"查看 OpenVPN 中的全部文章\" target=\"_blank\" href=\"http://logicmd.net/tag/openvpn/\">OpenVPN</a></strong>是一个用于创建<a rel=\"nofollow\" title=\"查看 VPN 中的全部文章\" target=\"_blank\" href=\"http://logicmd.net/tag/vpn/\">VPN</a>加密通道的软件包，最早由James Yonan编写。大量使用了OpenSSL加密库中的SSLv3/TLSv1协议函数库。目前OpenVPN能在Solaris、Linux、OpenBSD、FreeBSD、NetBSD、Mac OS X与Windows 2000／XP／Vista上运行，�包含了许多安全性的功能。 </p>\n<h2>  服务端</h2>\n<h5><a rel=\"nofollow\" name=\"install\"></a>1.安装基础编译工具和OpenSSL</h5>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n<div>2</div>\n</td>\n<td>\n<div>\n<div><code>CentOS: yum </code><code>install</code> <code>gcc gcc-c++ kernel-devel openssl-devel</code></div>\n<div><code>Ubuntu: apt-get </code><code>install</code> <code>build-essential libssl-dev</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<h5>2. 下载LZO和OpenVPN以及<a rel=\"nofollow\" title=\"查看 IPv6 中的全部文章\" target=\"_blank\" href=\"http://logicmd.net/tag/ipv6/\">IPv6</a> Patch并编译安装</h5>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n<div>2</div>\n<div>3</div>\n<div>  4</div>\n<div>5</div>\n<div>6</div>\n<div>7</div>\n<div>8</div>\n<div>9</div>\n</td>\n<td>\n<div>\n<div><code>wget http:</code><code>//www</code><code>.<a rel=\"nofollow\" target=\"_blank\" href=\"http://oberhumer.com\">oberhumer.com</a></code><code>/opensource/lzo/download/lzo-2</code><code>.04.</code><code>tar</code><code>.gz</code></div>\n<div><code>wget http:</code><code>//openvpn</code><code>.net</code><code>/release/openvpn-2</code><code>.1.1.</code><code>tar</code><code>.gz</code></div>\n<div><code>wget https:</code><code>//github</code><code>.com</code><code>/downloads/jjo/openvpn-ipv6/openvpn-2</code><code>.1.1-ipv6-0.4.11.patch.gz –no-check-certificate</code></div>\n<div><code>gunzip -d openvpn-2.1.1-ipv6-0.4.11.patch.gz</code></div>\n<div><code>tar</code> <code>zxvf *.</code><code>tar</code><code>.gz</code></div>\n<div><code>patch –p0 < openvpn-2.1.1-ipv6-0.4.11.patch</code></div>\n<div><code>cd</code> <code>lzo-2.04 && .</code><code>/configure</code> <code>&& </code><code>make</code> <code>&& </code><code>make</code> <code>install</code></div>\n<div>  <code>cd</code> <code>..</code><code>/openvpn-2</code><code>.1.1 && .</code><code>/configure</code> <code>&& </code><code>make</code> <code>&& </code><code>make</code> <code>install</code></div>\n<div>  <code>cd</code> <code>.. && </code><code>cp</code> <code>-r .</code><code>/openvpn-2</code><code>.1.1</code><code>/easy-rsa/</code> <code>-r </code><code>/etc/openvpn</code>  <code>#拷贝配置文件到/etc/openvpn</code></div>\n</p></div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<blockquote><p>Tips:如果patch文件这样生成 <code>diff –uN from-file to-file > to-file.patch</code>则<code>patch –p0 < to-file.patch</code>如果patch文件这样生成 <code>diff –uNr from-docu to-docu >to-docu.patch</code>则<code>patch –p1 < to-docu.patch</code></p></blockquote>\n<h5>3.生成证书</h5>\n<p>初始化PKI</p>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>01</div>\n<div>02</div>\n<div>03</div>\n<div>04</div>\n<div>05</div>\n<div>06</div>\n<div>07</div>\n<div>08</div>\n<div>09</div>\n<div>10</div>\n<div>11</div>\n</td>\n<td>\n<div>\n<div><code>cd</code> <code>/etc/openvpn/2</code><code>.0/</code></div>\n<div><code>export</code> <code>D=`</code><code>pwd</code><code>`</code></div>\n<div><code>export</code> <code>KEY_CONFIG=$D</code><code>/openssl</code><code>.cnf</code></div>\n<div><code>export</code> <code>KEY_DIR=$D</code><code>/keys</code></div>\n<div>  <code>export</code> <code>KEY_SIZE=1024</code></div>\n<div><code>export</code> <code>KEY_COUNTRY=US</code></div>\n<div><code>export</code> <code>KEY_PROVINCE=CA</code></div>\n<div>  <code>export</code> <code>KEY_CITY=SanFrancisco</code></div>\n<div><code>export</code> <code>KEY_ORG=</code><code>\"logicmd\"</code> <code>#引号要用英文半角符号</code></div>\n<div><code>export</code> <code>KEY_EMAIL=</code><code>\"i[at]<a rel=\"nofollow\" target=\"_blank\" href=\"http://logicmd.net\">logicmd.net</a>\"</code> <code>#引号要用英文半角符号</code></div>\n<div><code>. vars</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<h5>4.创建证书颁发机构(CA)</h5>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n<div>2</div>\n</td>\n<td>\n<div>\n<div><code>.</code><code>/clean-all</code> <code>#这行命令是清空Keys文件夹下的所有文件</code></div>\n<div>  <code>.</code><code>/build-ca</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<p>接下来的信息你可以自己填写</p>\n<h5>5. 建立server key</h5>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n</td>\n<td>\n<div>\n<div><code>.</code><code>/build-key-server</code> <code>server</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<p>接下来的信息你可以自己填写</p>\n<h5>  6. 生成client key</h5>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n</td>\n<td>\n<div>\n<div>  <code>.</code><code>/build-key</code> <code>client1 </code><code># client1 可以自定义 这个是客户的名字</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<p>接下来的信息你可以自己填写</p>\n<h5>7.以此类推建立其他客户端 key</h5>\n<p>当然你也可以不用，也可以在使用中在添加，不过比较麻烦，文章后会有教程</p>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n<div>2</div>\n</td>\n<td>\n<div>\n<div><code>.</code><code>/build-key</code> <code>client2</code></div>\n<div><code>.</code><code>/build-key</code> <code>client3</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<p>注意在进入 Common Name (eg, your name or your server’s hostname) []: 的输入时, 每个证书输入的名字必须不同.</p>\n<h5>  8. 生成Diffie Hellman参数 （这个很重要）</h5>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n</td>\n<td>\n<div>\n<div><code>.</code><code>/build-dh</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<p>(如果这里发生错误，请尝试：openssl dhparam -out ./keys/dh1024.pem 1024)</p>\n<h5>9. 将 keys 下的client.key/crt和ca.crt打包下载到本地(可以通过winscp,http,ftp等等……)</h5>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n<div>2</div>\n</td>\n<td>\n<div>\n<div>  <code>#排除掉ca.key和server.key</code></div>\n<div><code>find</code> <code>./ -name </code><code>\"*.crt\"</code> <code>-or -name </code><code>\"*.key\"</code> <code>-not -name </code><code>\"server.key\"</code> <code>-not -name </code><code>\"ca.key\"</code> <code>|  </code><code>xargs</code> <code>tar</code> <code>czvf yourkeys.</code><code>tar</code><code>.gz</code></div>\n</p></div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<h5>10.创建服务端配置文件</h5>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n<div>2</div>\n</td>\n<td>\n<div>\n<div><code>mkdir</code> <code>/etc/openvpn/2</code><code>.0</code><code>/conf</code></div>\n<div><code>cp</code> <code>/root/openvpn-2</code><code>.1.1</code><code>/sample-config-files/server</code><code>.conf </code><code>/etc/openvpn/2</code><code>.0</code><code>/conf/server</code><code>.conf</code></div>\n</p></div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<h5>11.用你最喜欢的编辑器编辑配置文件</h5>\n<p>（但是不建议记事本/notepad.exe），这里直接放出ipv4和ipv6的OpenVPN的配置文件</p>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<caption>\n<td>server-udp.conf</td>\n</caption>\n<tbody>\n<tr>\n<td>\n<div>01</div>\n<div>02</div>\n<div>03</div>\n<div>04</div>\n<div>  05</div>\n<div>06</div>\n<div>07</div>\n<div>08</div>\n<div>09</div>\n<div>10</div>\n<div>11</div>\n<div>  12</div>\n<div>13</div>\n<div>14</div>\n<div>15</div>\n<div>16</div>\n<div>17</div>\n<div>18</div>\n<div>  19</div>\n<div>20</div>\n<div>21</div>\n<div>22</div>\n<div>23</div>\n<div>24</div>\n<div>25</div>\n<div>  26</div>\n</td>\n<td>\n<div>\n<div><code>local</code> <code>YOUR.SERVER.IPV4.ADDRESS</code></div>\n<div><code>port 8888</code></div>\n<div><code>proto udp</code></div>\n<div><code>dev tun</code></div>\n<div><code>ca </code><code>/etc/openvpn/2</code><code>.0</code><code>/keys/ca</code><code>.crt</code></div>\n<div><code>cert </code><code>/etc/openvpn/2</code><code>.0</code><code>/keys/server</code><code>.crt</code></div>\n<div><code>key </code><code>/etc/openvpn/2</code><code>.0</code><code>/keys/server</code><code>.key  </code><code># This file should be kept secret</code></div>\n<div><code>dh </code><code>/etc/openvpn/2</code><code>.0</code><code>/keys/dh1024</code><code>.pem</code></div>\n<div><code>server 10.8.0.0 255.255.255.0</code></div>\n<div><code>ifconfig</code><code>-pool-persist </code><code>/var/log/openvpn/ipp-udp</code><code>.txt</code></div>\n<div>  <code>push </code><code>\"redirect-gateway def1 bypass-dhcp\"</code></div>\n<div><code>push </code><code>\"dhcp-option DNS 10.8.0.1\"</code></div>\n<div><code>push </code><code>\"dhcp-option DNS 8.8.8.8\"</code></div>\n<div><code>push </code><code>\"dhcp-option DNS 8.8.4.4\"</code></div>\n<div><code>keepalive 10 120</code></div>\n<div><code>cipher AES-128-CBC   </code><code># AES</code></div>\n<div><code>comp-lzo</code></div>\n<div><code>;max-clients 100</code></div>\n<div><code>user nobody</code></div>\n<div><code>group nobody</code></div>\n<div>  <code>persist-key</code></div>\n<div><code>persist-tun</code></div>\n<div><code>status openvpn-status-udp.log</code></div>\n<div><code>log         </code><code>/var/log/openvpn/openvpn-udp</code><code>.log</code></div>\n<div><code>;log-append  openvpn.log</code></div>\n<div><code>verb 3</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<caption>\n<td>server-udp6.conf</td>\n</caption>\n<tbody>\n<tr>\n<td>\n<div>01</div>\n<div>02</div>\n<div>03</div>\n<div>04</div>\n<div>  05</div>\n<div>06</div>\n<div>07</div>\n<div>08</div>\n<div>09</div>\n<div>10</div>\n<div>11</div>\n<div>  12</div>\n<div>13</div>\n<div>14</div>\n<div>15</div>\n<div>16</div>\n<div>17</div>\n<div>18</div>\n<div>  19</div>\n<div>20</div>\n<div>21</div>\n<div>22</div>\n<div>23</div>\n<div>24</div>\n<div>25</div>\n<div>  26</div>\n</td>\n<td>\n<div>\n<div><code>local</code> <code>YOUR.SERVER.IPV6.ADDRESS</code></div>\n<div><code>port 9999</code></div>\n<div><code>proto udp6</code></div>\n<div><code>dev tun</code></div>\n<div><code>ca </code><code>/etc/openvpn/2</code><code>.0</code><code>/keys/ca</code><code>.crt</code></div>\n<div><code>cert </code><code>/etc/openvpn/2</code><code>.0</code><code>/keys/server</code><code>.crt</code></div>\n<div><code>key </code><code>/etc/openvpn/2</code><code>.0</code><code>/keys/server</code><code>.key  </code><code># This file should be kept secret</code></div>\n<div><code>dh </code><code>/etc/openvpn/2</code><code>.0</code><code>/keys/dh1024</code><code>.pem</code></div>\n<div><code>server 10.8.1.0 255.255.255.0</code></div>\n<div><code>ifconfig</code><code>-pool-persist </code><code>/var/log/ipp-udp6</code><code>.txt</code></div>\n<div>  <code>push </code><code>\"redirect-gateway def1 bypass-dhcp\"</code></div>\n<div><code>push </code><code>\"dhcp-option DNS 10.8.1.1\"</code></div>\n<div><code>push </code><code>\"dhcp-option DNS 8.8.8.8\"</code></div>\n<div><code>push </code><code>\"dhcp-option DNS 8.8.4.4\"</code></div>\n<div><code>keepalive 10 120</code></div>\n<div><code>cipher AES-128-CBC   </code><code># AES</code></div>\n<div><code>comp-lzo</code></div>\n<div><code>;max-clients 100</code></div>\n<div><code>user nobody</code></div>\n<div><code>group nobody</code></div>\n<div>  <code>persist-key</code></div>\n<div><code>persist-tun</code></div>\n<div><code>status </code><code>/var/log/openvpn-status-udp6</code><code>.log</code></div>\n<div><code>log         </code><code>/var/log/openvpn/openvpn-udp6</code><code>.log</code></div>\n<div><code>;log-append  openvpn.log</code></div>\n<div><code>verb 3</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<h5>12.OpenVPN 访问外网的设置（如果不设置，你连上后只能在你和VPS之间建立VPN）</h5>\n<p>  如果你跟偶一样很多类型VPN，很多NAT的话直接</p>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n</td>\n<td>\n<div>\n<div>  <code>iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<p>如果你想精细控制不同NAT地址转发情况的话，可以分别设置</p>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n<div>2</div>\n<div>3</div>\n<div>4</div>\n</td>\n<td>\n<div>\n<div><code>#OpenVPN IPv4</code></div>\n<div><code>iptables -t nat -A POSTROUTING -s 10.8.0.0</code><code>/24</code> <code>-o eth0 -j MASQUERADE</code></div>\n<div><code>#OpenVPN IPv6</code></div>\n<div><code>iptables -t nat -A POSTROUTING -s 10.8.1.0</code><code>/24</code> <code>-o eth0 -j MASQUERADE</code></div>\n</p></div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<p>（如果你运行上面的出现 iptables: Unknown error 4294967295 这样的错误，可以尝试下面的）/sbin/iptables -t nat -A POSTROUTING -s <a rel=\"nofollow\" target=\"_blank\" href=\"http://10.8.0.0/255.255.255.0\">10.8.0.0/255.255.255.0</a> -j SNAT –to-source [你的IP地址]对于OpenVZ的VPS讲eth0换成venet0即可继续输入</p>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n<div>2</div>\n</td>\n<td>\n<div>\n<div><code>service iptables save</code></div>\n<div><code>service iptables restart</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<p>修改包转发设置</p>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n</td>\n<td>\n<div>\n<div><code>sysctl -w net.ipv4.ip_forward=1</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<h5>13. 设置 OpenVPN 服务器 reboot后自动启动 openvpn</h5>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n<div>2</div>\n<div>3</div>\n<div>  4</div>\n<div>5</div>\n<div>6</div>\n</td>\n<td>\n<div>\n<div><code>vim </code><code>/etc/rc</code><code>.</code><code>local</code></div>\n<div>  <code>#添加以下内容</code></div>\n<div><code>/usr/local/sbin/openvpn</code> <code>--config </code><code>/etc/openvpn/2</code><code>.0</code><code>/conf/server-udp</code><code>.conf &</code></div>\n<div>  <code>/usr/local/sbin/openvpn</code> <code>--config </code><code>/etc/openvpn/2</code><code>.0</code><code>/conf/server-udp6</code><code>.conf &</code></div>\n<div><code>sysctl -w net.ipv4.ip_forward=1</code></div>\n<div><code>iptables --table nat --append POSTROUTING --jump MASQUERADE</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<p>虽说是前面save了iptables到系统文件，但是根据我的经验，VPS down掉重启后，还是需要重新设置iptables。</p>\n<h5>  14.最后启动 OpenVPN</h5>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n<div>2</div>\n<div>  3</div>\n<div>4</div>\n<div>5</div>\n<div>6</div>\n</td>\n<td>\n<div>\n<div><code>/usr/local/sbin/openvpn</code> <code>--config </code><code>/etc/openvpn/2</code><code>.0</code><code>/conf/server-udp</code><code>.conf &</code></div>\n<div><code>/usr/local/sbin/openvpn</code> <code>--config </code><code>/etc/openvpn/2</code><code>.0</code><code>/conf/server-udp6</code><code>.conf &</code></div>\n<div><code>#如要看到日志可以如此观看</code></div>\n<div><code>tail</code> <code>-f </code><code>/var/log/openvpn/openvpn-udp</code><code>.log</code></div>\n<div><code>#或者</code></div>\n<div><code>tail</code> <code>-f </code><code>/var/log/openvpn/openvpn-udp6</code><code>.log</code></div>\n</p></div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<h5>15.添加一个小脚本，用于继续添加客户端的KEY</h5>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>  01</div>\n<div>02</div>\n<div>03</div>\n<div>04</div>\n<div>05</div>\n<div>06</div>\n<div>07</div>\n<div>  08</div>\n<div>09</div>\n<div>10</div>\n<div>11</div>\n<div>12</div>\n<div>13</div>\n</td>\n<td>\n<div>\n<div>  <code>#!/bin/bash</code></div>\n<div><code>cd</code> <code>/etc/openvpn/2</code><code>.0/</code></div>\n<div><code>export</code> <code>D=`</code><code>pwd</code><code>`</code></div>\n<div>  <code>export</code> <code>KEY_CONFIG=$D</code><code>/openssl</code><code>.cnf</code></div>\n<div><code>export</code> <code>KEY_DIR=$D</code><code>/keys</code></div>\n<div><code>export</code> <code>KEY_SIZE=1024</code></div>\n<div><code>export</code> <code>KEY_ORG=</code><code>\"logicmd\"</code></div>\n<div><code>export</code> <code>KEY_EMAIL=</code><code>\"i[at]<a rel=\"nofollow\" target=\"_blank\" href=\"http://logicmd.net\">logicmd.net</a>\"</code></div>\n<div><code>export</code> <code>KEY_COUNTRY=US</code></div>\n<div><code>export</code> <code>KEY_PROVINCE=CA</code></div>\n<div><code>export</code> <code>KEY_CITY=SanFrancisco</code></div>\n<div><code>.</code><code>/vars</code></div>\n<div><code>.</code><code>/build-key</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<h2>客户端</h2>\n<h5>1.分发配置文件给用户</h5>\n<p>  将配置文件vpn.ovpn，证书 ca.crt client.crt client.key分发给用户。</p>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<caption>\n<td>vpn.ovpn</td>\n</caption>\n<tbody>\n<tr>\n<td>\n<div>01</div>\n<div>02</div>\n<div>03</div>\n<div>04</div>\n<div>05</div>\n<div>06</div>\n<div>07</div>\n<div>08</div>\n<div>09</div>\n<div>10</div>\n<div>11</div>\n<div>12</div>\n<div>13</div>\n<div>14</div>\n<div>15</div>\n<div>16</div>\n<div>17</div>\n<div>18</div>\n<div>19</div>\n<div>20</div>\n<div>21</div>\n<div>22</div>\n</td>\n<td>\n<div>\n<div><code>client</code></div>\n<div><code>dev tun</code></div>\n<div><code>proto udp</code></div>\n<div>  <code>remote YOUR.SERVERS.IPV4.DOMAINNAME 8888</code></div>\n<div><code>resolv-retry infinite</code></div>\n<div><code>nobind</code></div>\n<div><code>#个人感觉客户端不必，降权后不利于路由表管理</code></div>\n<div><code>;user nobody</code></div>\n<div><code>;group nobody</code></div>\n<div><code>persist-key</code></div>\n<div><code>persist-tun</code></div>\n<div>  <code>ca ca.crt</code></div>\n<div><code>cert logicmd.crt</code></div>\n<div><code>key logicmd.key</code></div>\n<div><code>ns-cert-</code><code>type</code> <code>server</code></div>\n<div><code>cipher AES-128-CBC   </code><code># AES</code></div>\n<div><code>comp-lzo</code></div>\n<div><code>verb 2</code></div>\n<div><code>mute 20</code></div>\n<div><code>script-security 2</code></div>\n<div><code># Here comes the route table.</code></div>\n<div><code>max-routes 1500</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table></div>\n</div>\n<p>接下来按照 <a rel=\"nofollow\" target=\"_blank\" href=\"http://logicmd.net/2010/10/add-route-table-and-auto-replace-dns-while-connecting-to-vpn/\">给VPN添加路由表</a> 添加路由表即可。</p>\n<h5>2.客户端的安装</h5>\n<p>  具体详见<a rel=\"nofollow\" target=\"_blank\" href=\"http://logicmd.net/2010/08/config-handbook-for-ssh-and-vpn/\">VPN配置手册</a></p>\n<ul>\n<li>Windows用户需要下载<a rel=\"nofollow\" target=\"_blank\" href=\"http://openvpn.net/release/openvpn-2.1.1-install.exe\">官网安装包</a> 对于需要使用VPN Over IPv6的童鞋下载<a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/downloads/jjo/openvpn-ipv6/openvpn.exe-2.1.1-ipv6-0.4.11.zip\">IPv6 Patched的openvpn.exe</a> 替换掉X:Program FilesOpenVPNbin相应文件。</li>\n<li><a rel=\"nofollow\" title=\"查看 Linux 中的全部文章\" target=\"_blank\" href=\"http://logicmd.net/tag/linux/\">Linux</a>用户则应该按照<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.cyups.com/#install\">本文开始服务器端的安装方法</a>同样在客户端安装OpenVPN。Linux中OpenVPN的配置文件证书位置似乎不支持相对路径。</li>\n</ul>\n<h2>FAQ</h2>\n<p>1.Windows路由表速度过慢删掉以下</p>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n<div>  2</div>\n</td>\n<td>\n<div>\n<div><code>route-method exe</code></div>\n<div><code>route-delay 2</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<p>2.满屏幕的路由信息看着烦.opvn改成</p>\n<div>\n<div>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n<div>2</div>\n</td>\n<td>\n<div>\n<div><code>verb 2</code></div>\n<div><code>mute 20</code></div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n</div>\n</div>\n<div>请点击<a rel=\"nofollow\" target=\"_blank\" href=\"https://mycdt4.info/chinese/\">https://mycdt4.info/chinese/</a>，穿墙访问《中国数字时代》。《中国数字时代》开通IPv6，欢迎穿墙阅读。翻越防火长城，你可以到达世界上的每一个角落。（Across the Great Firewall, you can reach every corner in the world.）翻墙利器赛风3下载地址：<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima326\n\n\"> http://dld.bz/caonima326</p>\n<p></a>，<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima745\">http://dld.bz/caonima745</a><img width=\"1\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-735860425632439276?l=www.chinagfw.org\" alt=\"\" /></div>\n</p>\n<p><img src=\"http://chinadigitaltimes.net/chinese/files/2012/07/110c34cfpenvpn_logo.png-150x67.png\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<p><iframe src=\"https://docs.google.com/spreadsheet/embeddedform?hl=zh-CN&#038;formkey=dGRpN3FrVThuMFFsZHBZcmNGLW94dEE6MQ\" width=\"510\" height=\"328\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading...</iframe></p>\n<form method=\"POST\" action=\"http://chinadigitaltimes.us4.list-manage.com/subscribe/post?u=17daa75df533f6c6ff72e51ab&#038;id=b4fd4ae247\">\n定期获得翻墙信息？<a href=\"http://eepurl.com/mstlf\">请电邮订阅数字时代</a><br />\n <br /><input type=\"email\" value=\"\" name=\"EMAIL\" id=\"mce-EMAIL_in_post\" size=\"25\" style=\"display:block;\" placeholder=\"请输入您的邮件地址\" required><br />\n\t<input type=\"submit\" value=\"点击订阅\" name=\"subscribe\" style=\"height: 20px;\" id=\"in_post_subscribe\"><br />\n</form>\n","author":1005,"categories":[18269,15300],"tags":[8510,8795,8817]}