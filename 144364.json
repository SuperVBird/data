{"id":144364,"link":"https://chinadigitaltimes.net/chinese/2011/04/翻墙利器，proxy-auto-config/","date":"2011-04-13T03:31:12Z","modified":"2011-04-13T03:31:12Z","title":"翻墙利器，Proxy Auto Config","content":"<p>来源：<a href=\"http://rndz.org/%E7%BF%BB%E5%A2%99%E5%88%A9%E5%99%A8%EF%BC%8Cproxy-auto-config/\">http://rndz.org/%E7%BF%BB%E5%A2%99%E5%88%A9%E5%99%A8%EF%BC%8Cproxy-auto-config/</a></p>\n<div>\n<p>使用 Google 搜索时总是很容易碰触到 GFW 脆弱的神经，解决这个问题的办法是使用代理服务器。对于 Chrome 和 Firefox 来说，有大把的扩展来设置代理服务器，其它浏览器呢？</p>\n<p>其实主流的浏览器都支持一种智能的代理设置方式：Proxy Auto Config。pac 是一个 JavaScript 脚本文件，它提供了一个函数FindProxyForUrl，根据浏览器访问的 url 返回不同的代理地址。FindProxyForUrl 可以返回下面三种形式的代理：</p>\n<ul>\n<li>DIRECT\t\t// 不使用代理，直接访问</li>\n<li>PROXY HOST:PORT\t// 使用代理，HOST为服务器地址，PORT为代理端口</li>\n<li>SOCKS HOST:PORT\t//  使用SOCKS代理，同上</li>\n</ul>\n<p>在网上找个代理服务器是简单的，也是很麻烦的。你总能找到大把大把的代理服务器列表，但是并不是全部都是有效的，实际上只有极少部分短期有效。于是有了各种 VPN 实现方案，比如 TOR。TOR 也不是很稳定，总要在使用和不使用代理间切换。</p>\n<p>这时就可以让 FindProxyForUrl 返回代理列表，每个代理使用分号隔开。浏览器将依次使用代理服务器尝试访问每个链接，直到成功访问或者代理列表结束。比如 “PROXY 127.0.0.1:8118;DIRECT” 先尝试使用 TOR 访问目标，失败的话再尝试直接访问。</p>\n<p>代理列表虽然可以解决服务器失效/不稳定的问题，但每一次尝试都要花费一些时间。为了减少花费的时间，你可以在 PAC 里对 URL 进行分析，对不同的域名、IP、内容返回不同的代理服务器。在 PAC 里除了正常的 JavaScript 函数外，还可以使用 PAC 特有的函数：</p>\n<ul>\n<li>isPlainHostName(host);\t\t// host 为不包含域名的主机名时返回真（没有点号）</li>\n<li>dnsDomainIs(host,domain);\t\t// host 为 domain 子域时返回真</li>\n<li>localHostOrDomainIs(host,hostdom);\t// host 和 hostdom 相同或 host 为 hostdom 的主机名时返回真</li>\n<li>isResolvable(host);\t\t\t// 尝试通过 DNS 解析 host，成功返回真</li>\n<li>isInNet(host,pattern,mask);\t\t// host 的 IP 在指定范围内时返回真（先解析 host 的 IP 地址，再与 mask 做按位与计算，结果与 pattern 比较）</li>\n<li>dnsResolve(host);\t\t\t// 解析 host，返回 IP 地址</li>\n<li>myIpAddress();\t\t\t// 返回本机 IP 地址</li>\n<li>dnsDomainLevels(host);\t\t// 根据 host 包含点号数量返回域名层级</li>\n<li>shExpMatch(str,shext);\t\t// 使用 shell 表达式对 str 和 shext 进行匹配</li>\n<li>weekdayRange();\t\t\t// 检查时间是否在指定范围（一周的第几天）</li>\n<li>dataRange();\t\t\t// 检查时间是否在指定范围（月、日）</li>\n<li>timeRange();\t\t\t\t// 检查时间是否在指定范围（时间）</li>\n</ul>\n<p>除了常规的使用外，FindProxyForUrl 还可以返回一个无效的代理服务器来过滤广告、不安全网址等内容。</p>\n</p></div>\n<p></p>\n<h4>—————————————————————————————————————————</h4>\n<h4>需要翻墙利器赛风? 请<a href=\"https://www.google.com/profiles/112915952962578336480\">阅读和关注中国数字时代</a>。</p>\n<p>推特用户请点击<a href=\"http://qinzhigang.in/login.php\">这里</a>免翻墙上推特</h4>\n<p>请点击<a href=\"https://sesawe.net/-Tools-zh-.html\">这里</a>下载翻墙软件 </p>\n<p>更多翻墙方法请发电邮(最好用Gmail)到：<a href=\"mailto:fanqiang70ma@gmail.com\">fanqiang70ma@gmail.com</a>  </p>\n<p>请阅读和关注<a href=\"https://www.google.com/profiles/112915952962578336480\">中国数字时代</a>、<small>翻墙技术博客<a href=\"https://www.google.com/profiles/chinagfwblog\">GFW BLOG</a>（免翻墙） <br /> </small></p>\n<p>请使用<a href=\"https://www.google.com/reader/view/\">Google Reader</a><a href=\"https://www.google.com/reader/view/feed/http://chinadigitaltimes.net/chinese/feed\">订阅中国数字时代中文版</a>（<a href=\"http://chinadigitaltimes.net/chinese/feed\">http://chinadigitaltimes.net/chinese/feed</a>），阅读最有价值的中文信息；以及<a href=\"https://www.google.com/reader/view/feed/http://feeds2.feedburner.com/chinagfwblog\">GFW BLOG（功夫网与翻墙）</a><a href=\"http://feeds2.feedburner.com/chinagfwblog\">http://feeds2.feedburner.com/chinagfwblog</a>，获取最新翻墙工具和翻墙技巧信息。</p>\n<p> </p>\n<div>要翻墙? <a href=\"http://ziyouxinxi.info/\">用赛风</a>.<br />\n推特用户请点击<a href=\"http://edu20.in/login.php\">这里</a>免翻墙上推特<wbr><br />\n点击<a href=\"http://fanqiangsesawe.info\">这里</a>下载翻墙软件<br />\n更多翻墙方法请发电邮(最好用Gmail)到:gongminshehui1@gmail.com<br />\n翻墙技术博客<a href=\"https://www.google.com/profiles/chinagfwblog\">GFW BLOG</a>（免翻墙）<br />\n阅读<a href=\"http://www.google.com/profiles/112915952962578336480\">中国数字时代</a>（免翻墙）<img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-1961386864126571726?l=www.chinagfw.org\" width=\"1\" /></div>\n<div>\n<a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=9fgPYNZwuig:CQh8BG5r5j4:yIl2AUoC8zA\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=yIl2AUoC8zA\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=9fgPYNZwuig:CQh8BG5r5j4:-BTjWOF_DHI\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=9fgPYNZwuig:CQh8BG5r5j4:-BTjWOF_DHI\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=9fgPYNZwuig:CQh8BG5r5j4:F7zBnMyn0Lo\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=9fgPYNZwuig:CQh8BG5r5j4:F7zBnMyn0Lo\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=9fgPYNZwuig:CQh8BG5r5j4:V_sGLiPBpWU\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=9fgPYNZwuig:CQh8BG5r5j4:V_sGLiPBpWU\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=9fgPYNZwuig:CQh8BG5r5j4:qj6IDK7rITs\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=qj6IDK7rITs\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=9fgPYNZwuig:CQh8BG5r5j4:l6gmwiTKsz0\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=l6gmwiTKsz0\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=9fgPYNZwuig:CQh8BG5r5j4:gIN9vFwOqvQ\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=9fgPYNZwuig:CQh8BG5r5j4:gIN9vFwOqvQ\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=9fgPYNZwuig:CQh8BG5r5j4:TzevzKxY174\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=TzevzKxY174\" /></a>\n</div>\n<p><img height=\"1\" src=\"http://feeds.feedburner.com/~r/chinagfwblog/~4/9fgPYNZwuig\" width=\"1\" /></p>\n<p><b>要翻墙？(发邮件到Gmail):fanqiangyakexi1ATgmail.com</b></p>\n","author":206,"categories":[15300],"tags":[8510,8795,8800]}