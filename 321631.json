{"id":321631,"link":"https://chinadigitaltimes.net/chinese/2013/11/翻墙-关于最近这次goagent波动的一些情况/","date":"2013-11-10T13:45:50Z","modified":"2013-11-12T08:32:34Z","title":"翻墙 | 关于最近这次GoAgent波动的一些情况","content":"<p>本来是想说GAE Proxy的波动，但由于没有在使用除GoAgent之外别的GAE代理软件，不好贸然下结论，所以单就在GoAgent上遇到的情况说一下。</p>\n<p>事情的开端大约在本周一（2013年11月04日），当时我偶然发现YouTube视频我无法观看了，而且几乎是所有的都无法观看。除了视频之外别的内容都是没有问题的。一个很正常的反应就是点开Chrome的“审查元素”，想看看是不是页面上有哪些js之类的东西下载失败了。</p>\n<p>一看，还真有下载失败的，大约是这样的链接：</p>\n<p><a rel=\"nofollow\" target=\"_blank\" href=\"http://r7---sn-a8au-p5qz.c.youtube.com/crossdomain.xml\">http://r7&#8212;sn-a8au-p5qz.c.youtube.com/crossdomain.xml</a></p>\n<p>这个是个XML，还有别的也有类似的下载失败的报错。失败的情况很诡异，感觉像是从GAE的服务器到r7&#8212;sn-a8au-p5qz.c.youtube.com这种主机的连接超时，仿佛被IP黑洞了。但我的GoAgent用的是国外的IP，不可能是GFW在干扰。所以有一种解释就是，Google不允许GAE服务端访问这些主机了。</p>\n<p>难道是Google发现天朝这边每天有N多人挂着GAE Proxy看YouTube，流量不堪重负了？</p>\n<p>然后就是昨天大规模的GoAgent用户出现403错误的情况了。具体地说，所有在GoAgent里面用的是google_cn的用户，都会遇到这个问题。我之前在Google+上也发PO说了。这个问题是因为北京谷翔那些所谓北京IP在GAE支持上出现了问题。同样的GET请求，有的时候它们能正常响应，有的时候会报403。当时我测下来觉得比例大概是1/2至1/3，现在再看似乎出错的机率更高了。这也许说明Google正在逐步关停这批服务器的GAE支持，再过一段时间可能就完全不能用了。到底是重启服务还是完全关闭，Google没放话，谁也不知道。</p>\n<p>注意到这些情况的同时，我自己GoAgent上用的那个国外IP好像也开始出现问题了。ping值开始变得很高，并且也开始丢包（以前这个IP虽然ping值也不小但从不丢包）。这些都没关系，可能是网络波动。但它现在不仅仅是YouTube视频看不到，连Twitter上的某些js文件也开始读不出来。</p>\n<p>我自己备有一些可用的Google服务器IP，是以前有一次特地花了大半天时间自己挖的。既然现在国内国外的Google服务器都开始出问题，那就有必要把这些IP全部拿出来再检查一遍。检查的结果是：</p>\n<blockquote>\n<ul>\n<li>至少有一个IP（目前用的这个），对于Internet上的部分内容无法读取了。</li>\n<li>有一部分IP，如果用在GoAgent上会报证书错误，说不是*.appspot.com的证书。</li>\n<li>cn段的IP，目前成功的比例已经掉到1/10左右，可以说已经是不可用的状态。</li>\n<li>其余的则没有问题，包括YouTube视频也能顺利播放。</li>\n</ul>\n</blockquote>\n<p>第一种情况，在昨天晚些时候已经得到了解决，似乎Google也发现了他们的GAE服务出了状况，参见<a rel=\"nofollow\" target=\"_blank\" href=\"https://groups.google.com/forum/#!topic/google-appengine-downtime-notify/aRJ9F1FJv2o\">这里</a>。</p>\n<p>对于那几个报证书错误的IP，用在hosts上却没有问题。包括cn段的IP用在hosts上也不会有问题。个人估计这应该跟SPDY协议有关系，因为用在IE上时证书也是不对的。</p>\n<p>所以目前的结论是：Google在对服务器集群做调整。到底最终会调整成什么样，还不知道，但目前起码导致了GAE服务可用性的一些变化。Google有可能在把某些服务器的可用范围收窄，至少在非SPDY协议上这样做了。在GoAgent的C/S通信能支持SPDY之前，可以更换GoAgent中使用的GAE服务器IP来解决这种问题（比如官方建议的改用google_hk的做法）。GFW至少目前还没把所有的GAE服务器IP给封掉。</p>\n<p><a rel=\"nofollow\" target=\"_blank\" href=\"http://blog.superliufa.com/2013/11/GAE-fluctuate.html\">http://blog.superliufa.com/2013/11/GAE-fluctuate.html</a></p>\n<p>翻墙技术博客<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.chinagfw.org/2013/09/blog-post.html\">订阅地址及社交帐号</a></p>\n<div>获取最新穿墙软件？请发电邮（建议用gmail）到：cdtcaonima@gmail.com。《中国数字时代》开通IPv6，欢迎穿墙阅读。翻越防火长城，你可以到达世界上的每一个角落。（Across the Great Firewall, you can reach every corner in the world.）</div>\n</p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<p>Loading&#8230;</p>\n<form method=\"POST\" action=\"http://chinadigitaltimes.us4.list-manage.com/subscribe/post?u=17daa75df533f6c6ff72e51ab&amp;id=b4fd4ae247\">\n<a href=\"http://eepurl.com/mstlf\">墙外新闻实时更新 欢迎订阅数字时代</a></p>\n</form>\n","author":1005,"categories":[18270,18269,15300],"tags":[8795]}