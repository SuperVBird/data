{"id":179979,"link":"https://chinadigitaltimes.net/chinese/2011/09/翻墙-linux-ssh帐号权限限制/","date":"2011-09-18T19:00:41Z","modified":"2011-09-18T19:00:41Z","title":"翻墙 | Linux SSH帐号权限限制","content":"<p>来源：<a rel=\"nofollow\" target=\"_blank\" href=\"http://feedproxy.google.com/~r/JoysBoy/~3/TdH16qMVTJk/\">http://feedproxy.google.com/~r/JoysBoy/~3/TdH16qMVTJk/</a></p>\n<p>在天朝用SSH来Proxy是家常便饭了，别跟我说你不知道怎么用</p>\n<p>我自己也经常在vps上开一些<span><a rel=\"nofollow\" target=\"_blank\" href=\"http://xfeng.me/tags/ssh/\" title=\"查看 ssh 中的全部文章\">ssh</a></span>帐号给朋友用，一般都把<span><a rel=\"nofollow\" target=\"_blank\" href=\"http://xfeng.me/tags/shell/\" title=\"查看 shell 中的全部文章\">shell</a></span>设置为nologin，这样来禁止他们登入服务器</p>\n<p>不过有一点很麻烦，密码只能由我设，当然也只能设个简单的，朋友不可能把自己平常用的密码随便告诉我，改密码也只能由我操作</p>\n<p>今天看到有人说把这种帐号的<span><a rel=\"nofollow\" target=\"_blank\" href=\"http://xfeng.me/tags/shell/\" title=\"查看 shell 中的全部文章\">shell</a></span>设置为passwd，登录服务器只能修改密码，其他啥都做不了</p>\n<p>试了一下，非常给力啊，这里记录下，顺便也分享一下</p>\n<p>首先需要把/usr/bin/passwd加入到/etc/<span><a rel=\"nofollow\" target=\"_blank\" href=\"http://xfeng.me/tags/shell/\" title=\"查看 shell 中的全部文章\">shell</a></span>s中</p>\n<div>\n<div>\n<pre><span>echo</span> <span>\"/usr/bin/passwd\"</span> <span>>></span> <span>/</span>etc<span>/</span>shells</pre>\n</p></div>\n</div>\n<p><span></span><br /> 新建账户的方法非常简单</p>\n<div>\n<div>\n<pre>useradd <span>-M</span> <span>-s</span> <span>/</span>usr<span>/</span>bin<span>/</span><span>passwd</span> username</pre>\n</p></div>\n</div>\n<p>如果已经建好账户，修改/etc/passwd，把对应帐号最后面的<span><a rel=\"nofollow\" target=\"_blank\" href=\"http://xfeng.me/tags/shell/\" title=\"查看 shell 中的全部文章\">shell</a></span>改为/usr/bin/passwd即可</p>\n<p>搞定，这些账户如果登录服务器，将直接提示修改密码，当然它也只能不停的修改密码</p>\n<div>\n<div>\n<pre>Last <span>login</span>: Mon Aug <span>15</span> <span>20</span>:<span>35</span>:<span>17</span> <span>2011</span> from <span>*</span>.<span>*</span>.<span>*</span>.<span>*</span> Could not chdir to home directory <span>/</span>home<span>/</span>xxx: No such <span>file</span> or directory Changing password <span>for</span> user xxx. Changing password <span>for</span> xxx <span>(</span>current<span>)</span> UNIX password:</pre>\n</div>\n</div>\n<p>这里会有个小报错，不过没关系，是由于我在新建账户时加了-M参数，不建立用户目录，的确也没必要建这个目录，所以这里warn忽略好了</p>\n<p> 如果你也有vps，也有这种给朋友开<span><a rel=\"nofollow\" target=\"_blank\" href=\"http://xfeng.me/tags/ssh/\" title=\"查看 ssh 中的全部文章\">ssh</a></span>帐号的事情，非常简易你尝试下</p>\n<p> </p>\n<div>推特用户请点击<a rel=\"nofollow\" target=\"_blank\" href=\"http://edu20.in/login.php\">这里</a>免翻墙上推特<br />\n点击<a rel=\"nofollow\" target=\"_blank\" href=\"http://fanqiangsesawe.info\">这里</a>下载翻墙软件<br />\n更多翻墙方法请发电邮(最好用Gmail)到:gongminshehui1@gmail.com<br />\n翻墙技术博客<a rel=\"nofollow\" target=\"_blank\" href=\"https://www.google.com/profiles/chinagfwblog\">GFW BLOG</a>（免翻墙）<br />\n阅读<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.google.com/profiles/112915952962578336480\">中国数字时代</a>（免翻墙）<img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-281694222093156795?l=www.chinagfw.org\" width=\"1\" /></div>\n<div>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=4fd5tQpkP64:WBlultHZuh4:yIl2AUoC8zA\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=yIl2AUoC8zA\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=4fd5tQpkP64:WBlultHZuh4:-BTjWOF_DHI\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=4fd5tQpkP64:WBlultHZuh4:-BTjWOF_DHI\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=4fd5tQpkP64:WBlultHZuh4:F7zBnMyn0Lo\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=4fd5tQpkP64:WBlultHZuh4:F7zBnMyn0Lo\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=4fd5tQpkP64:WBlultHZuh4:V_sGLiPBpWU\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=4fd5tQpkP64:WBlultHZuh4:V_sGLiPBpWU\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=4fd5tQpkP64:WBlultHZuh4:qj6IDK7rITs\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=qj6IDK7rITs\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=4fd5tQpkP64:WBlultHZuh4:l6gmwiTKsz0\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=l6gmwiTKsz0\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=4fd5tQpkP64:WBlultHZuh4:gIN9vFwOqvQ\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=4fd5tQpkP64:WBlultHZuh4:gIN9vFwOqvQ\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=4fd5tQpkP64:WBlultHZuh4:TzevzKxY174\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=TzevzKxY174\" /></a>\n</div>\n<p><img height=\"1\" src=\"http://feeds.feedburner.com/~r/chinagfwblog/~4/4fd5tQpkP64\" width=\"1\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=750556\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"750556\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n<input type=\"submit\" value=\"订阅!\"><br />\n</form>\n","author":983,"categories":[15300],"tags":[8795]}