{"id":242920,"link":"https://chinadigitaltimes.net/chinese/2012/07/翻墙-转）解决挂vpn-、ssh后仍然打不开facebook-tiwtter-youtub等网站/","date":"2012-07-26T04:45:18Z","modified":"2012-07-26T04:45:18Z","title":"翻墙 | (转）解决挂vpn 、ssh后仍然打不开facebook tiwtter youtub等网站","content":"<p>原文：<a rel=\"nofollow\" target=\"_blank\" href=\"http://voncheng.blogspot.com/2012/07/vpn-sshfacebook-tiwtter-youtub.html\">http://voncheng.blogspot.com/2012/07/vpn-sshfacebook-tiwtter-youtub.html</a></p>\n<div></div>\n<div><span>有的朋友用本站的方法申请了vcup的vpn后，安装教程配置好了vpn仍然不能连接facebook等国外网站，但是ip显示的是美国或者加拿大，搜寻了一番，终于找到解决办法，首先还是先看下原因吧，</span><br /> <span>域名服务器缓存污染（DNS cache poisoning），又名域名服务器快取侵害（DNS cache pollution），是指一些刻意制造或无意中制造出来的域名服务器分组，把域名指往不正确的IP地址（参考维基百科）。我博客里经常提到的GFW DNS污染，就是GFW通过一定手段将你的域名解析到错误的IP的情况，一般我们使用VPN/SSH过程中就可以防止DNS污染，不过如果VPN/SSH 配置不当连接VPN/SSH后依然会有DNS污染发生，这样就导致了像twitter这样被DNS污染的网站无法访问，而像我博客<a rel=\"nofollow\" target=\"_blank\" href=\"http://igfw.tk\">igfw.tk</a>这样域名 只是被关键词过滤的网站却可以打开的情况发生。</span><br /> <span>一、Windows XP系统PPTP/L2TP VPN问题</span><br /><span>Windows XP系统连接PPTP VPN或L2TP IPSec VPN后，会发现VPN接口配置的DNS的优先级不够而无法对内部主机进行解析（Windows 7系统不存在此问题）。如果你系统设置的默认DNS服务器是国内DNS服务器，就会导致虽然已经连上了VPN但是无法打开youtube、twitter 等网站的现象，这是因为系统默认的DNS还是原来的本地连接的国内DNS，依旧被劫持中。</span><br /> <span>要解决此问题，请编辑注册表以便将&#8221;远程访问服务&#8221;连接移至绑定顺序中的最优先位置：</span><br /> <span>单击&#8221;开始&#8221;，单击&#8221;运行&#8221;，在&#8221;打开&#8221;框中键入 regedit，也就是注册表设置，然后单击&#8221;确定&#8221;。</span><br /> <span>单击以下注册表子项：HKEY_LOCAL_MACHINESYSTEMCurrentControlSetServicesTcpipinkage</span><br /> <span>在右窗格中，双击&#8221;bind&#8221;。</span><br /><span>在&#8221;数值数据&#8221;框中，选择&#8221;devicendiswanip&#8221;项，按 ctrl+x，单击设备列表的顶部，然后按 ctrl+v。</span><br /> <span>单击&#8221;确定&#8221;，然后退出注册表编辑器。</span><br /><span>通过该操作，调整了tcp/ip的绑定序列，将vpn拨号等初级接口的优先级调整为第一。这样，通过该端口得到的tcp/ip属性会被优先使用。重启系统后再连接vpn你就可以打开youtube、twitter等网站了。</span><br /> <span>二、windows系统openvpn问题</span><br /><span>有些openvpn服务商的配置没有充分考虑我国特殊国情，导致openvpn连接上服务器之后dns解析依然使用本机默认dns服务器，如果你系统设置 的默认dns服务器是国内dns服务器，就会导致虽然已经连上了openvpn但是无法打开youtube、twitter等网站的现象。这个问题 openvpn服务商是完全可以避免的，即使你已经发生了这种情况也可以很容易地自行解决。解决方法很简单，在你openvpn配置文件（写字板打 开.ovpn文件修改）最顶端添加如下两行保存后重连vpn即可</span><br /> <span>route-method exe</span><br /><span>route-delay 2</span><br /> <span>三、使用chnroutes后的问题</span><br /><span>以前有网友反应使用chnroutes自动区分国内国外线路，实现vpn智能云梯后无法打开youtube、twitter等网站，我当时只是说更换本机 dns服务器为国外dns服务器即可解决，后来我发现是上面说的两种情况在作怪，按照上面的两种做法修改后，一般就不会出现此问题了。不过有时候vpn速 度过慢，导致dns在vpn通道dns服务器上查询超时，就依然会在本机dns服务器进行dns查询，如果你系统设置的默认dns服务器是国内dns服务 器，就依然会导致虽然已经连上了vpn但是无法打开youtube、twitter等网站的现象。所以如果可能尽量是设置本机dns服务器为国外dns服 务器，这样不需上述（一、二）两个问题中的设置，就可以打开youtube、twitter等网站了。</span><br /> <span>以上问题解决的前提是你vpn连接后的确设置了vpn的dns服务器（至于vpn不能设置其dns服务器的情况，可以自行设置，pptp/l2tp vpn直接在vpn拨号连接的internet协议里设置，openvpn可以在配置文件中加入dhcp-option dns 8.8.4.4 类似设置来设置），且连接vpn后查看ip为国外地址。</span><br /> <span>四、ssh代理问题</span><br /><span>我们一般使用的ssh代理都是socks5代理，直接设置浏览器代理都存在dns污染问题，因为此时socks5代理默认不加密地在本地进行dns查询， 不过firefox浏览器可以很容易地设置sock5远程dns解析，可以防dns污染，不过其他浏览用户就没有这么简单了。firefox远程dns解 析设置方法是：</span><br /> <span>在火狐地址栏输入</span><br /><span>about:config</span><br /> <span>点&#8221;我保证会小心&#8221;。</span><br /><span>在过滤器中输入</span><br /> <span>network.proxy.socks_remote_dns</span><br /><span>双击，修改值为ture，关闭页面。</span> </div>\n<div>请点击<a rel=\"nofollow\" target=\"_blank\" href=\" https://mycdt0.info\"> https://mycdt0.info</a>，穿墙访问《中国数字时代》（当看到“此网站的安全证书有问题”的提示时，请选择“继续浏览此网站(不推荐)”，忽略证书警告并继续访问网站）。《中国数字时代》开通ipv6，欢迎穿墙阅读。翻越防火长城，你可以到达世界上的每一个角落。（across the great firewall, you can reach every corner in the world.）翻墙利器赛风3下载地址：<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima326\n\n\"> http://dld.bz/caonima326</p>\n<p></a>，<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima745\">http://dld.bz/caonima745</a><img width=\"1\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-4909812363219317545?l=www.chinagfw.org\" alt=\"\" /></div>\n</p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<p><iframe src=\"https://docs.google.com/spreadsheet/embeddedform?hl=zh-CN&#038;formkey=dGRpN3FrVThuMFFsZHBZcmNGLW94dEE6MQ\" width=\"510\" height=\"328\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading&#8230;</iframe></p>\n<form method=\"POST\" action=\"http://chinadigitaltimes.us4.list-manage.com/subscribe/post?u=17daa75df533f6c6ff72e51ab&#038;id=b4fd4ae247\">\n定期获得翻墙信息？<a href=\"http://eepurl.com/mstlf\">请电邮订阅数字时代</a><br />\n <br /><input type=\"email\" value=\"\" name=\"EMAIL\" id=\"mce-EMAIL_in_post\" size=\"25\" style=\"display:block;\" placeholder=\"请输入您的邮件地址\" required><br />\n\t<input type=\"submit\" value=\"点击订阅\" name=\"subscribe\" style=\"height: 20px;\" id=\"in_post_subscribe\"><br />\n</form>\n","author":1005,"categories":[18269,15300],"tags":[5644,7775,8510,8795]}