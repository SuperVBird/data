{"id":122601,"link":"https://chinadigitaltimes.net/chinese/2010/11/不可忽视的-chrome-扩展安全性/","date":"2010-11-16T03:12:54Z","modified":"2010-11-16T03:12:54Z","title":"不可忽视的 Chrome 扩展安全性","content":"<p><p>来自: <a href=\"http://www.feedzshare.com/b/4458207/2\">www.guao.hk &#8211; FeedzShare</a>  <a href=\"http://www.feedzshare.com/b/805954/2\">谷奥聚合——谷奥主站+谷安 aggregator &#8211; FeedzShare</a>  <br />\n<br />发布时间:2010年11月14日,  已有 4 人推荐 </p>\n<hr>\n<div>\n<p><img alt=\"hacker\" border=\"0\" height=\"250\" src=\"http://www.guao.hk/wp-content/uploads/2010/11/hacker.png\" title=\"hacker\" width=\"400\" /> </p>\n<p>本文为<a href=\"https://chrome.google.com/extensions/detail/njcohodkobmakebdpjjkfndileomdcph\">谷奥 Chrome 扩展</a>作者 <a href=\"http://www.neverbest.com/\">im007boy</a> 特约撰稿，gkp 在原文基础上有小幅修改。</p>\n<p>Chrome 的安全性是有目共睹的，但这并不意味着它不会泄漏你的隐私：喜欢干坏事的人利用 Chrome 扩展，简单几行代码就能够窃取你的邮箱密码，浏览记录等。随着 Chrome 浏览器的普及以及近期出现的一些可疑扩展，我觉得需要郑重提醒大家谨慎安装扩展。</p>\n<h3>Chrome扩展能做什么？</h3>\n<p>Chrome 扩展可以引入 np 插件与系统交互，比如大家用的 <a href=\"https://chrome.google.com/extensions/detail/gmpllenfapkfpdkahamlbmbichihpmmg\">Chrome 下载助手</a>可以直接调用迅雷并新建一个任务。同理扫描银行记录、扫描你的 program 文件夹等一般软件可以做到的它也可以。不过，幸运的是使用 np 插件的扩展如果想要提交到 Chrome 扩展中心的话需要经过 Google 人肉审查，所以在这方面来说还是比较安全的。</p>\n<p>那么，如果不使用 npapi，Chrome 扩展还能做些什么呢？答案是：你的收藏夹，历史记录，web QQ 的聊天数据，甚至你的各类帐号密码都可以获取到——即使你使用某某加密代理或 vpn。</p>\n<p><a href=\"https://chrome.google.com/extensions/detail/nfhbogdceikhdejihpnpdpndofddclac\">这个</a>是我做的一个演示扩展。这个扩展安装后，可以在你登陆 QQ 邮箱时检测到你的帐号和密码。当然，这只是一个演示，稍微改一下就可以获取各种邮箱，BBS，甚至网上银行的密码，再加上几行简单的代码就可以直接把密码发送给扩展作者了。</p>\n<h3>如何防范？</h3>\n<p>作为普通的用户，也许无法通过检查源代码来保证扩展安全性，不过通过安装时的确认信息就可以识别出大部分不良扩展：比如<a href=\"https://chrome.google.com/extensions/detail/njcohodkobmakebdpjjkfndileomdcph\">谷奥 Chrome扩展</a> 只有获取谷奥网数据的权限。</p>\n<p><img alt=\"guao_chrome_extension\" border=\"0\" height=\"225\" src=\"http://www.guao.hk/wp-content/uploads/2010/11/guao_chrome_extension.jpg\" title=\"guao_chrome_extension\" width=\"395\" /> </p>\n<p>最近谷奥介绍过的两个（<a href=\"http://www.guao.hk/posts/taobao-discount-chrome-extension.html\">1</a>，<a href=\"http://www.guao.hk/posts/56zhe-taobao-discount-extension-for-chrome.html\">2</a>）帮助你检测淘宝上某些商品打折情况的扩展，理论上它们只需要获取淘宝的数据就可以了，但是实际情况却并非如此：</p>\n<p><img alt=\"56zhe_chrome_extension\" border=\"0\" height=\"251\" src=\"http://www.guao.hk/wp-content/uploads/2010/11/56zhe_chrome_extension.png\" title=\"56zhe_chrome_extension\" width=\"393\" /> </p>\n<p><img alt=\"57zhe_chrome_extension\" border=\"0\" height=\"249\" src=\"http://www.guao.hk/wp-content/uploads/2010/11/57zhe_chrome_extension.png\" title=\"57zhe_chrome_extension\" width=\"401\" /> </p>\n<p>当然这只是个初步判断，不能据此说某某扩展窃取用户隐私。比如扩展申请了新建一个标签的权限，但 Chrome 会解释为“您的浏览历史记录”权限。另外用户需要格外注意针对某些敏感网站的扩展，比如 gmail，网银等。</p>\n<h3>另一种风险</h3>\n<p>如果 Chrome 扩展被上传到扩展中心，即使它作恶，那也会留有痕迹（历史版本）。但有一些办法可以避开程序版本被记录，比如引入远程 JavaScript 。</p>\n<p>引入远程 JS 分两种情况，一种是引入到扩展页面（即 background.html，popup.html 等），另一种是引入到浏览的网页。</p>\n<h5>引入到扩展页面</h5>\n<p>这么做唯一的理由可能就是保证用户使用的最新的 JS。虽然 Chrome 会每隔一段时间自动更新扩展，但有些开发者也许并不满足，所以引入了远程 JS。但这么做的代价就是每当扩展启用时都会去开发者的服务器上下载 JS 文件，这样一旦连接不到服务器，扩展就完全不能用了，而且也会影响效率，更为重要的是某些扩展通过引入外部 JS 获得更大权限和更多数据，且用户无法追踪其代码。（下图仅是一个示范，并不代表谷奥认为56/57折的这两个扩展有恶意行为）</p>\n<p><img alt=\"56zhe_remote_js\" border=\"0\" height=\"300\" src=\"http://www.guao.hk/wp-content/uploads/2010/11/56zhe_remote_js.jpg\" title=\"56zhe_remote_js\" width=\"509\" /> </p>\n<p> <img alt=\"57zhe_remote_jss\" border=\"0\" height=\"300\" src=\"http://www.guao.hk/wp-content/uploads/2010/11/57zhe_remote_jss.jpg\" title=\"57zhe_remote_jss\" width=\"552\" /> </p>\n<h5>引入到浏览的网页</h5>\n<p>Chrome 扩展有一些机制保护用户数据安全，其中就包括扩展 JS 执行环境和网页的 JS 环境完全分隔，仅仅共享页面 DOM。比如，网页 JS 里有个变量 guao，那么在 Chrome 扩展的 JS 中是无法检测到这个变量的。但开发者如通过技术手段修改浏览网页的代码（很容易滴），使其引入一个开发者所指定的 JS，这样开发者就可以完全伪造网页的程序了。修改一些函数，使用户的密码、聊天记录等提交到开发者的服务器是非常容易就可以做到的。</p>\n<h3>结语</h3>\n<p>网络安全是每个人都不应该忽视的问题，虽然 <a href=\"http://www.guao.hk/tag/chrome\">Chrome</a> 本身十分安全，但是 Chrome 扩展却给了一些别有用心的人可乘之机。作为最终用户来说，最简单的预防方法就是只安装出自 Chrome 扩展中心的扩展，并且留意扩展所需要的运行权限。至于远程 JS 注入这样的手段，目前看来似乎没有太好的办法，只能靠各位扩展作者自律了。</p>\n<p>pic via <a href=\"http://www.crunchgear.com/2009/07/02/iphone-sms-vuln-could-let-haxrz-run-errant-code/\">crunchgear</a></p>\n<hr>\n<p><small>© gkp 发表于 <a href=\"http://www.guao.hk\">谷奥——探寻谷歌的奥秘 ( http://www.guao.hk )</a>, 2010.  |<br />\n<a href=\"http://www.guao.hk/posts/about-chrome-extension-security.html#comments\">12 条评论</a> |<br />\n<a href=\"http://www.guao.hk/posts/about-chrome-extension-security.html\">永久链接</a> |<br />\n<a href=\"http://google.org.cn/about/\">关于谷奥</a> |<br />\n<a href=\"http://google.org.cn/submit/\">投稿/爆料</a><br />\nPost tags: <a href=\"http://www.guao.hk/tag/chrome\" rel=\"tag\">Chrome</a>, <a href=\"http://www.guao.hk/tag/chrome-extensions\" rel=\"tag\">Chrome Extensions</a>, <a href=\"http://www.guao.hk/tag/guao\" rel=\"tag\">guao</a><br />\n</small></p>\n<p><img border=\"0\" height=\"0\" src=\"http://img.tongji.linezing.com/1105192/tongji.php\" width=\"0\" /></div>\n<p><img src=\"http://img.tongji.linezing.com/1017243/tongji.gif\" /><img src=\"http://img.tongji.linezing.com/997968/tongji.gif\" /></p>\n","author":176,"categories":[1],"tags":[8510]}