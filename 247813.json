{"id":247813,"link":"https://chinadigitaltimes.net/chinese/2012/08/翻墙-利用tunnelbroker让你的ssh代理支持ipv6/","date":"2012-08-19T15:15:29Z","modified":"2012-08-19T15:15:29Z","title":"翻墙 | 利用tunnelbroker让你的SSH代理支持IPV6","content":"<p>原文：<a rel=\"nofollow\" target=\"_blank\" href=\"http://qiong.info/archives/6480\">http://qiong.info/archives/6480</a></p>\n<div></div>\n<div>\n<p><img src=\"http://pic.qiong.info/imgdir/tunnelbroker.png\" alt=\"null\" /></p>\n<p>tunnelbroker是美国Hurricane Electric公司的旗下网站</p>\n<p>  下面简称<strong>HE</strong>：HE是全球领先的原生IPv6互联网骨干网和主机托管服务商。</p>\n<p>该隧道服务在已有的IPv4连接之上提供IPv6隧道接入。</p>\n<p>  用户需要一台能运行IPv6的主机(大多数平台已支持IPv6)或路由器,</p>\n<p>并且已有IPv4连接（对外可访问的独立IP地址，并且配置允许ICMP ping包请求）。</p>\n<p>  该服务面向需要稳定永久隧道的IPv6开发者和实验者。</p>\n<p>下面我们来介绍如何让你的SSH代理支持IPV6，能正常浏览IPv6网站</p>\n<p>  首先我们先在<strong>tunnelbroker</strong>注册一个账户,注册地址：<a rel=\"nofollow\" title=\"Qiong.info\" target=\"_blank\" href=\"http://tunnelbroker.net/register.php\">http://tunnelbroker.net/register.php</a></p>\n<p>  注册成功登录后在面板左边点击：<strong><a rel=\"nofollow\" title=\"Qiong.info\" target=\"_blank\" href=\"http://tunnelbroker.net/new_tunnel.php\">Create Regular Tunnel</a>】</strong></p>\n<p>  创建你的Ipv6隧道：</p>\n<p><span><strong>你的SSH代理IP地址：</strong></span></p>\n<p>  <img src=\"http://pic.qiong.info/imgdir/he-1.jpg\" alt=\"null\" /></p>\n<p><strong><span>与你的SSH代理服务器最近的地址：</span></strong></p>\n<p><img src=\"http://pic.qiong.info/imgdir/he-2.png\" alt=\"null\" /></p>\n<p>  <strong><span>创建成功后点击：</span></strong></p>\n<p><img src=\"http://pic.qiong.info/imgdir/he-3.png\" alt=\"null\" /></p>\n<p>进入到tunnel的详细信息页面，该页面上有配置好的所有tunnel信息。</p>\n<p>页面最下方有工具可以生成适用于不同设备和操作系统的配置脚本。</p>\n<p>选择适合你SSH服务器的配置脚本在SSH服务器上配置就行了</p>\n<p>如果没有合适你的脚本那请接着看下文：</p>\n<p>一般来说，成功创建Tunnel后只要按照网站上提供的Example Configurations就可以配置成功了</p>\n<p>  但是由于我的VPS不支持通过modprobe载入IPv6模块，只好放弃这么做而改用tb-tun</p>\n<p>先检查tun/tap设备是否已经打开，可以通过命令cat /dev/net/tun检测</p>\n<p>  如果返回File descriptor in bad state，则说明tun/tap设备已经打开，否则需要给客服发ticket开启。</p>\n<p>下载tb-tun</p>\n<p>  <code>wget <a rel=\"nofollow\" target=\"_blank\" href=\"http://tb-tun.googlecode.com/files/tb-tun_r18.tar.gz\">http://tb-tun.googlecode.com/files/tb-tun_r18.tar.gz</a></code></p>\n<p>  <code>tar xvf tb-tun_r18.tar.gz</code></p>\n<p>编译tb-tun</p>\n<p>  <code>gcc tb_userspace.c -l pthread -o tb_userspace</code></p>\n<p>假设VPS的Client IPv4 Address为<code>1.2.3.4</code>，而HE提供的Server IPv4 Address为<code>5.6.7.8</code>，</p>\n<p>且HE提供的Client IPv6 Address为<code>2001:a:b:c::2/64</code>，则只需如下设置</p>\n<p>  <code>setsid ./tb_userspace tb 5.6.7.8 1.2.3.4 sit</code></p>\n<p><code>ifconfig tb up</code></p>\n<p><code>ifconfig tb inet6 add 2001:a:b:c::2/64</code></p>\n<p>  <code>ifconfig tb mtu 1480</code></p>\n<p><code>route -A inet6 add ::/0 dev tb</code></p>\n<p>  即可创建IPv6 Tunnel</p>\n</div>\n<div>请点击<a rel=\"nofollow\" target=\"_blank\" href=\" https://mycdt0.info\"> https://mycdt0.info</a>，穿墙访问《中国数字时代》（当看到“此网站的安全证书有问题”的提示时，请选择“继续浏览此网站(不推荐)”，忽略证书警告并继续访问网站）。《中国数字时代》开通IPv6，欢迎穿墙阅读。翻越防火长城，你可以到达世界上的每一个角落。（Across the Great Firewall, you can reach every corner in the world.）翻墙利器赛风3下载地址：<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima326\n\n\"> http://dld.bz/caonima326</p>\n<p></a>，<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima745\">http://dld.bz/caonima745</a><img width=\"1\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-5028705783377925457?l=www.chinagfw.org\" alt=\"\" /></div>\n</p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<p><iframe src=\"https://docs.google.com/spreadsheet/embeddedform?hl=zh-CN&#038;formkey=dGRpN3FrVThuMFFsZHBZcmNGLW94dEE6MQ\" width=\"510\" height=\"328\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading&#8230;</iframe></p>\n<form method=\"POST\" action=\"http://chinadigitaltimes.us4.list-manage.com/subscribe/post?u=17daa75df533f6c6ff72e51ab&#038;id=b4fd4ae247\">\n定期获得翻墙信息？<a href=\"http://eepurl.com/mstlf\">请电邮订阅数字时代</a><br />\n <br /><input type=\"email\" value=\"\" name=\"EMAIL\" id=\"mce-EMAIL_in_post\" size=\"25\" style=\"display:block;\" placeholder=\"请输入您的邮件地址\" required><br />\n\t<input type=\"submit\" value=\"点击订阅\" name=\"subscribe\" style=\"height: 20px;\" id=\"in_post_subscribe\"><br />\n</form>\n","author":1005,"categories":[18269,15300],"tags":[8795,8817]}