{"id":195721,"link":"https://chinadigitaltimes.net/chinese/2011/11/翻墙-opera-mini-android-6-5-改服教程/","date":"2011-11-12T14:30:44Z","modified":"2011-11-12T14:30:44Z","title":"翻墙 | Opera mini Android 6.5 改服教程","content":"<p><p>推特上时常有朋友问我Opera mini Android 6.5修改服务器地址的方法，于是写下简要的步骤，供大家参考。</p>\n<p><strong>1.准备</strong></p>\n<p>首先，你需要的当然是一个在PHP空间中架设好的中转服务器，具体的方法可参考<a rel=\"nofollow\" target=\"_blank\" href=\"http://code.google.com/p/opm-server-mirror/\">这里</a>.假设我们上传好的服务器地址为：http://abc.com/loveopera/</p>\n<p>其次，要修改Opera mini的程序文件，需要以下工具</p>\n<blockquote>\n<p>Opera_Mini_6_5_Android.apk  (Opera mini 官方程序包)</p>\n<p>baksmali.jar (用于反编译.dex文件)</p>\n<p>smali.jar  （用于将修改好的文件重新打包成.dex文件)</p>\n<p>Auto-Sign  (用于对.apk文件进行签名)</p>\n</blockquote>\n<p><span></span></p>\n<p>注：我已将上述所有工具上传到<a rel=\"nofollow\" target=\"_blank\" href=\"https://github.com/miaoever/Opm-mod-tool\">这里</a>(Github)。此外，上述工具需要Java运行环境的支持，如果没有，请点击<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\">这里</a>下载最新的JDK并进行安装，具体方法请自行搜索。</p>\n<p><strong>2.反编译</strong></p>\n<p>首先，将Opera_Mini_6_5_Android.apk 扩展名改为.zip，即(Opera_Mini_6_5_Android.zip)，此时可以用任意的解压缩工具将其打开，提取出其中的 classes.dex文件，并与先前下载好的smali.jar和baksmali.jar放置于同一个文件夹下，如: c:opm  。</p>\n<p>打开CMD(开始-运行-CMD)，进入c:opm 文件夹（cd c:opm），输入以下命令：</p>\n<blockquote>\n<p>java -jar baksmali.jar classes.dex -o classes</p>\n</blockquote>\n<p>该指令会将classes.dex反编译为一系列文件并存放在 c:opmclasses 文件夹下。</p>\n<p><strong>3.修改</strong></p>\n<p>我们首先需要修改的文件包括.classes 目录下的a.smali、aq.smali、f.smali三个文件，以及.classescomoperaminiandroid目录下的 Code.smali 文件。</p>\n<p>用任意文本编辑器打开上述文件，并查找关键字 “http” (不含引号)。此时会找到若干行形如以下格式的文本：</p>\n<blockquote>\n<p>const-string v1, “http:“</p>\n<p>const-string v2, “http://10.72.2.2“</p>\n<p>…</p>\n</blockquote>\n<p>将所有找到的结果引号中的内容替换为你自己的服务器地址，如：</p>\n<blockquote>\n<p>const-string v1, “http://abc.com/loveopera/“</p>\n<p>const-string v2, “http://abc.com/loveopera/“</p>\n<p>…</p>\n</blockquote>\n<p><em>注意，在f.smali文件中有内容为”http://nada:4711”及”http://mini5resource.opera-mini.net”的两行，我没有对这两行进行修改，但并未影响最终的效果。</em></p>\n<p>同样的方法，在.classes路径下的aq.smali中搜索关键字”socket“，将所有搜索到的结果修改为如下形式：</p>\n<blockquote>\n<p>const-string v3, “socket://abc.com/loveopera/”</p>\n</blockquote>\n<p><em>同样，我没有修改其中内容为”socket://do_not_use_me:0″的一行，也没有影响最终的结果。</em></p>\n<p><strong>4.打包</strong></p>\n<p>保存所有的改动。再次回到CMD中，输入：</p>\n<blockquote>\n<p>java -jar smali.jar classes</p>\n</blockquote>\n<p>该命令将整个classes文件夹重新打包为.dex文件，此时在当前目录下会得到打包好的文件，名为: out.dex，将其重命名为classes.dex。</p>\n<p>再次打开Opera_Mini_6_5_Android.zip压缩包，删除压缩包中原有的classes.dex文件及META-INF文件夹，并将刚才修改好的classes.dex文件添加到压缩包中。</p>\n<p><strong>5.签名</strong></p>\n<p>解压缩签名工具Auto-Sign.zip，将上一步中修改好的Opera_Mini_6_5_Android.zip文件放入解压后的Auto-Sign文件夹中，双击运行其中的 sign.bat 。</p>\n<p><strong>6.完成</strong></p>\n<p>不出意外的话，在Auto-Sign目录下，你会得到一个名为 your_app_signed.apk 的文件，这就是你想要的，大功告成。</p>\n<p><strong>原文</strong>：<a rel=\"nofollow\" target=\"_blank\" href=\"http://miaoo.in/opera-mini-android-6-5-modify-server.html\">http://miaoo.in/opera-mini-android-6-5-modify-server.html</a></p>\n<p>在推特上看到有网友发给推号iGFW的信息，我转过来给大家分享。呵呵，顺便推广一下我的推特帐号是<a rel=\"nofollow\" target=\"_blank\" href=\"https://twitter.com/zzug\">zzug</a>，欢迎关注我，一起交流！</p>\n</p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=738338\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"738338\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n<input type=\"submit\" value=\"订阅!\"><br />\n</form>\n","author":983,"categories":[15300],"tags":[7775]}