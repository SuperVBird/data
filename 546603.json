{"id":546603,"link":"https://chinadigitaltimes.net/chinese/2016/12/gfw-blog-shadowsocks-chnroute-实现-openwrt-路由器自动翻墙/","date":"2016-12-15T02:07:47Z","modified":"2016-12-15T02:07:47Z","title":"GFW BLOG | Shadowsocks + ChnRoute 实现 OpenWRT 路由器自动翻墙","content":"<p><img alt=\"\" center=\"\" data-bd-imgshare-binded=\"1\" src=\"http://www.chinagfw.org/\" text-align:=\"\"><span>  </span></p>\n<div><a href=\"https://4.bp.blogspot.com/-MAzT_VW9Brs/WFFYqsugZvI/AAAAAAAADcE/zSw-YzTtJq8qwh4VnUWXeWzscJOscFycQCLcB/s1600/12.PNG\" imageanchor=\"1\"><img border=\"0\" src=\"https://4.bp.blogspot.com/-MAzT_VW9Brs/WFFYqsugZvI/AAAAAAAADcE/zSw-YzTtJq8qwh4VnUWXeWzscJOscFycQCLcB/s1600/12.PNG\"></a></div>\n<div><span><br /></span></div>\n<p><span>&#36825;&#31687;&#25991;&#31456;&#20171;&#32461;&#30340;&#26041;&#27861;&#22522;&#20110;aa65535&#30340;luci-app-shadowsocks&#65292;&#20171;&#32461;&#20102;&#22914;&#20309;&#22312;OpenWRT&#19979;&#37197;&#32622;&#33258;&#21160;&#32763;&#22681;&#65292;&#26032;&#29256;&#26412;&#25903;&#25345;&#22312;Luci&#19979;&#22270;&#24418;&#21270;&#37197;&#32622;&#65292;&#22823;&#22823;&#31616;&#21270;&#20102;&#37197;&#32622;&#36807;&#31243;&#12290;&#37197;&#32622;&#23436;&#25104;&#21518;&#65292;&#36335;&#30001;&#22120;&#26412;&#36523;&#33719;&#24471;&#33258;&#21160;&#32763;&#22681;&#33021;&#21147;&#65292;&#25152;&#26377;&#36830;&#20837;&#35813;&#36335;&#30001;&#30340;&#35774;&#22791;&#37117;&#21487;&#26080;&#38556;&#30861;&#35775;&#38382;&#34987;&#22681;&#30340;&#31449;&#28857;&#12290;&#26159;&#36816;&#34892;&#20110;&#36335;&#30001;&#22120;&#30340;&#36879;&#26126;&#20195;&#29702;&#12290;</span><br /><span><br /></span> <br /><a name=\"more\"></a><span> &#26469;&#28304;&#65306; <a href=\"https://cokebar.info/archives/664\">https://cokebar.info/archives/664</a></span><br /><span><br /><span><b>&#26041;&#26696;&#31616;&#20171;</b></span></span></p>\n<p><span>&#26041;&#26696;&#26681;&#25454;IP&#21028;&#26029;&#26159;&#21542;&#20195;&#29702;&#65292;&#22269;&#20869;IP&#19981;&#20195;&#29702;&#65292;&#22269;&#22806;IP&#36208;&#20195;&#29702;&#12290;&#20195;&#29702;&#36890;&#36807;shadowsocks&#25152;&#24102;ss-redir&#20570;TCP&#36716;&#21457;&#23454;&#29616;&#65292;&#20998;&#22269;&#20869;&#22806;IP&#36890;&#36807;&#22269;&#20869;IP&#27573;&#21015;&#34920;&#25991;&#20214;chnroute&#26469;&#21306;&#21035;&#65292;&#24182;&#36890;&#36807;iptables&#35268;&#21017;&#20998;&#21035;&#22788;&#29702;&#12290;&#30001;&#20110;&#26159;&#22522;&#20110;IP&#30340;&#21028;&#23450;&#65292;&#25925;&#38656;&#35201;&#35299;&#20915;DNS&#27745;&#26579;&#30340;&#38382;&#39064;&#65292;&#26412;&#26041;&#26696;&#20351;&#29992;&#20248;&#21270;&#30340;DNS&#35299;&#26512;&#26041;&#26696;&#65292;&#38500;&#36807;&#38450;DNS&#27745;&#26579;&#65292;&#21516;&#26102;&#20855;&#26377;&#33391;&#22909;&#30340;CDN&#20860;&#23481;&#24615;&#65292;&#22823;&#37096;&#20998;&#24773;&#20917;&#19979;&#26159;&#26368;&#20248;&#30340;&#35299;&#26512;&#32467;&#26524;&#65288;&#32570;&#28857;&#26159;&#37197;&#32622;&#36807;&#31243;&#31245;&#32321;&#29712;&#65289;&#12290;</span><br /><span>&#30001;&#20110;&#21482;&#35201;&#22269;&#22806;IP&#22343;&#36208;&#20195;&#29702;&#65292;&#32780;&#19981;&#26159;&#34987;&#22681;&#25165;&#36208;&#20195;&#29702;&#65292;&#37027;&#20040;&#26412;&#26041;&#26696;&#30340;&#20248;&#32570;&#28857;&#20063;&#23601;&#24456;&#26126;&#26174;&#20102;&#12290;</span><br /><span><br /></span> <span>&#20248;&#28857;&#65306;&#22522;&#26412;&#19981;&#20250;&#26377;&#28431;&#32593;&#20043;&#40060;&#65292;&#20445;&#35777;&#25152;&#26377;&#34987;&#22681;&#31449;&#28857;&#33021;&#35775;&#38382;&#65307;&#33021;&#22815;&#19968;&#23450;&#31243;&#24230;&#25913;&#21892;&#22269;&#20869;&#35775;&#38382;&#19968;&#20123;&#22269;&#22806;&#32593;&#31449;&#32531;&#24930;&#30340;&#38382;&#39064;&#65292;&#22914;&#26524;&#20320;&#30340;&#26381;&#21153;&#22120;&#36895;&#24230;&#24456;&#22909;&#65292;&#37027;&#20040;&#29978;&#33267;&#21487;&#20197;&#36215;&#21040;&#21152;&#36895;&#22269;&#22806;&#31449;&#28857;&#35775;&#38382;&#30340;&#20316;&#29992;&#12290;</span><br /><span><br /></span> <span></span><br /><span>&#32570;&#28857;&#65306;&#22914;&#26524;&#26381;&#21153;&#22120;&#36895;&#24230;&#19968;&#33324;&#65292;&#35775;&#38382;&#19968;&#20123;&#32593;&#31449;&#29978;&#33267;&#20250;&#20943;&#36895;&#65307;&#23545;&#19968;&#20123;&#38480;&#21046;IP&#30340;&#31449;&#28857;&#21644;&#36719;&#20214;&#24212;&#29992;&#21487;&#33021;&#20250;&#36896;&#25104;&#40635;&#28902;&#12290;&#24635;&#20043;&#65292;&#35831;&#37196;&#24773;&#36873;&#25321;&#12290;</span><br /><span><br /></span> <span><b>&#26412;&#26041;&#26696;&#20027;&#35201;&#28041;&#21450;&#21040;&#30340;&#24320;&#28304;&#39033;&#30446;</b></span></p>\n<div>\n<div>\n<ul>\n<li><span><a href=\"https://github.com/aa65535/openwrt-shadowsocks\">https://github.com/aa65535/openwrt-shadowsocks</a></span></li>\n<li><span><a href=\"https://github.com/shadowsocks/luci-app-shadowsocks\">https://github.com/shadowsocks/luci-app-shadowsocks</a></span></li>\n<li><span><a href=\"https://github.com/aa65535/openwrt-chinadns\">https://github.com/aa65535/openwrt-chinadns</a></span></li>\n<li><span><a href=\"https://github.com/aa65535/openwrt-dist-luci\">https://github.com/aa65535/openwrt-dist-luci</a></span></li>\n<li><span><a href=\"https://github.com/madeye/shadowsocks-libev\">https://github.com/madeye/shadowsocks-libev</a></span></li>\n<li><span><a href=\"https://github.com/clowwindy/ChinaDNS\">https://github.com/clowwindy/ChinaDNS</a></span></li>\n</ul>\n</div>\n</div>\n<p><span><b>&#20889;&#22312;&#21069;&#38754;</b></span><br /><span><br /></span> <span>&#22522;&#20110;luci-app-shadowsocks v1.3.7&#29256;&#26412;&#25776;&#20889;&#12290;&#30446;&#21069;&#30340;&#29256;&#26412;&#19981;&#24102;spec&#23383;&#30524;&#65292;&#22914;&#26524;&#26159;&#20174;spec&#29256;&#26412;&#26356;&#26032;&#33267;&#27492;&#29256;&#26412;&#65292;&#38656;&#20808;&#21368;&#36733;&#20043;&#21069;&#30340;spec&#29256;&#26412;&#65292;&#24182;&#21024;&#38500;&#37197;&#32622;&#25991;&#20214;&#65288;/etc/config/shadowsocks&#65289;&#21518;&#65292;&#20877;&#23433;&#35013;&#27492;&#29256;&#26412;&#12290;</span><br /><span><br /></span> <span><br /></span> <span><b>&#19968;&#12289;&#23433;&#35013;</b></span><br /><span><b><br /></b></span><span>&#25152;&#38656;&#36719;&#20214;&#21015;&#34920;&#65306;</span></p>\n<p><span><b>&#35814;&#32454;&#23433;&#35013;&#27493;&#39588;</b></span><br /><span><br /></span> <span>&#39318;&#27425;&#23433;&#35013;&#30340;&#35805;&#65292;&#20808;&#30830;&#20445;&#36335;&#30001;&#22120;&#32852;&#32593;&#65292;&#24182;&#26356;&#26032;&#36719;&#20214;&#21253;&#21015;&#34920;&#65288;&#19979;&#36733;&#26377;&#38382;&#39064;&#30340;&#35831;&#25163;&#21160;&#21040;openwrt.org&#19979;&#36733;&#25152;&#26377;&#38656;&#35201;&#30340;&#21253;&#24182;&#19978;&#20256;&#21040;&#36335;&#30001;&#22120;&#19978;&#20351;&#29992;opkg install XXX.ipk&#21629;&#20196;&#23433;&#35013;&#65289;&#65306;</span><br /><span><br /></span> </p>\n<blockquote><p><span>1. opkg update</span></p></blockquote>\n<p><span>shadowsocks&#26377;&#22522;&#20110;openssl&#21644;mbedtls&#30340;&#20004;&#20010;&#29256;&#26412;&#65288;&#36825;&#20004;&#20010;&#26159;&#24320;&#28304;&#21152;&#23494;&#31639;&#27861;&#24211;&#65289;&#12290;&#33267;&#20110;polarssl&#65292;&#26159;mbedtls&#30340;&#21069;&#36523;&#65292;&#19981;&#25512;&#33616;&#20351;&#29992;&#12290;</span><br /><span><br /></span> <span>&#22914;&#26524;&#35201;&#29992;&#22522;&#20110;openssl&#30340;shadowsocks&#65292;&#37027;&#20040;&#20808;&#23433;&#35013;&#20381;&#36182;&#21253;&#65292;&#22914;&#19979;&#65306;&#65288;&#27880;&#65306;openssl&#26377;&#19968;&#23450;&#24180;&#22836;&#20102;&#65292;&#20063;&#26368;&#20026;&#20986;&#21517;&#65292;&#20860;&#23481;&#26356;&#22810;&#30340;&#21152;&#23494;&#26041;&#24335;&#65292;&#19981;&#36807;&#21382;&#21490;&#20037;&#20102;&#65292;&#20195;&#30721;&#25913;&#30340;&#27425;&#25968;&#22810;&#20102;&#23601;&#20250;&#30456;&#23545;&#33219;&#32959;&#19968;&#20123;&#65292;&#20986;&#28431;&#27934;&#21644;bug&#20063;&#20250;&#30456;&#23545;&#22810;&#19968;&#20123;&#65289;</span></p>\n<blockquote><p><span>1. opkg install ip ipset libopenssl iptables-mod-tproxy</span></p></blockquote>\n<p><span>&#22914;&#26524;&#35201;&#29992;mbedtls&#29256;&#26412;&#30340;shadowsocks&#65292;&#37027;&#20040;&#20808;&#23433;&#35013;&#20381;&#36182;&#21253;&#65292;&#22914;&#19979;&#65306;&#65288;&#27880;&#65306;mbedtls&#26159;ARM&#20844;&#21496;&#30340;TLS&#21152;&#23494;&#31639;&#27861;&#24211;&#65292;ARM&#22788;&#29702;&#22120;&#25512;&#33616;&#20351;&#29992;&#12290;&#19981;&#25903;&#25345;&#37096;&#20998;&#21152;&#23494;&#26041;&#24335;&#65292;&#22914;RC4-MD5&#65289;</span><br /><span><br /></span> </p>\n<blockquote><p><span>1. opkg install ip ipset libpcre libmbedtls iptables-mod-tproxy</span></p></blockquote>\n<p><span>&#26399;&#38388;&#21487;&#33021;&#20250;&#36935;&#21040;&#31867;&#20284;&#20197;&#19979;&#30340;&#38169;&#35823;&#25552;&#31034;&#65306;</span></p>\n<blockquote><p><span><span><span>1. kmod: failed to insert /lib/modules/3.10.44/ip_set.ko</span></span><span><span>2. kmod: failed to insert /lib/modules/3.10.44/ip_set_bitmap_ip.ko</span></span><span><span>3. kmod: failed to insert /lib/modules/3.10.44/ip_set_bitmap_ipmac.ko</span></span><span><span>4. </span></span><span>&#8230;</span></span></p></blockquote>\n<p><span>&#27809;&#20851;&#31995;&#65292;&#36825;&#26102;&#22240;&#20026;&#23433;&#35013;ipset&#21253;&#21518;&#38656;&#35201;&#37325;&#21551;&#65292;&#25105;&#20204;&#27492;&#26102;&#20808;&#37325;&#21551;&#19968;&#27425;&#36335;&#30001;&#22120;&#12290;</span><br /><span><br /></span> <span>&#27880;&#65306;&#37096;&#20998;ISP&#35775;&#38382;download.openwrt.org&#21487;&#33021;&#20250;&#38750;&#24120;&#32531;&#24930;&#29978;&#33267;&#19979;&#36733;&#22833;&#36133;&#65292;&#27492;&#26102;&#38656;&#35201;&#33258;&#34892;&#22312;PC&#19978;&#19979;&#36733;&#19978;&#38754;&#30340;&#20381;&#36182;&#21253;&#20197;&#21518;&#33258;&#34892;&#19978;&#20256;&#33267;&#36335;&#30001;&#22120;&#30446;&#24405;&#25163;&#21160;&#23433;&#35013;&#12290;&#20320;&#21487;&#33021;&#36824;&#38656;&#39069;&#22806;&#19979;&#36733;&#22914;&#19979;&#30340;&#20381;&#36182;&#21253;&#65306;</span></p>\n<blockquote><p><span>1. kmod-nfnetlink kmod-ipt-ipset kmod-ipt-tproxy libmnl libpthread</span></p></blockquote>\n<p><span>&#28982;&#21518;&#19979;&#36733;shadowsocks-libev&#21644;luci-app-shadowsocks&#65292;&#21069;&#32773;&#38656;&#35201;&#26681;&#25454;&#33258;&#24049;&#30340;CPU&#22411;&#21495;&#26469;&#36827;&#34892;&#36873;&#25321;&#12290;&#65288;&#19979;&#38754;&#36825;&#20010;&#22320;&#22336;&#20063;&#21487;&#20197;&#19979;&#36733;&#21040;mbedtls&#30340;&#20004;&#20010;&#20381;&#36182;&#21253;libpcre&#21644;libmbedtls&#65289;&#65306;</span></p>\n<blockquote><p><span><a href=\"https://bintray.com/aa65535/opkg/shadowsocks-libev#files\">https://bintray.com/aa65535/opkg/shadowsocks-libev#files</a></span></p></blockquote>\n<p><span>&#21478;&#22806;&#65292;&#25105;&#20204;&#35201;&#39034;&#36947;&#20934;&#22791;&#19968;&#19979;&#21478;&#22806;&#38656;&#35201;&#30340;&#36719;&#20214;ChinaDNS&#12289;DNS-forwarder&#31561;&#65292;&#21487;&#20197;&#20998;&#21035;&#22312;&#36825;&#20123;&#22320;&#26041;&#19979;&#36733;&#21040;&#65306;</span></p>\n<blockquote><p><span>ChinaDNS: <a href=\"https://github.com/aa65535/openwrt-chinadns/releases\">https://github.com/aa65535/openwrt-chinadns/releases</a></span><span><br /></span><span>DNS-Forwarder: <a href=\"https://github.com/aa65535/openwrt-dns-forwarder/releases\">https://github.com/aa65535/openwrt-dns-forwarder/releases</a></span><span><br /></span><span>&#23545;&#24212;&#30340;luci-app: <a href=\"https://github.com/aa65535/openwrt-dist-luci/releases\">https://github.com/aa65535/openwrt-dist-luci/releases</a></span></p></blockquote>\n<p><span><br /></span> <span>&#23558;&#19979;&#36733;&#30340;&#21253;&#36890;&#36807;WinSCP&#20043;&#31867;&#30340;&#24037;&#20855;&#19978;&#20256;&#33267;&#36335;&#30001;&#22120;&#30340;/tmp&#30446;&#24405;&#12290;</span><br /><span><br /></span> <span>&#23433;&#35013;shadowsocks, ChinaDNS&#20197;&#21450;dns-forwarder&#65306;</span></p>\n<blockquote><p><span><span>1. cd /tmp</span><span>2. opkg install shadowsocks-libev*.ipk luci-app-shadowsocks*.ipk</span><span>3. opkg install ChinaDNS*.ipk luci-app-chinadns*.ipk</span><span>4. opkg install dns-forwarder*.ipk luci-app-dns-forwarder*.ipk</span></span></p></blockquote>\n<p><b> <span>&#20108;&#12289;shadowsocks &#37197;&#32622;</span></b><br /><span><br /></span> <span>&#30331;&#24405;Luci&#65292;&#25351;&#21521;&ldquo;&#26381;&#21153;&rdquo;&#65292;&#27492;&#26102;&#24212;&#35813;&#33021;&#22815;&#30475;&#21040;shadowsocks&#65288;&#20013;&#25991;&#30028;&#38754;&#19979;&#26174;&#31034;&ldquo;&#24433;&#26797;&rdquo;&#65289;&#20102;&#12290;&#25509;&#19979;&#26469;&#36827;&#34892;shadowsocks&#30340;&#37197;&#32622;&#12290;</span><br /><span><br /></span> <span>&#35814;&#32454;&#37197;&#32622;&#27493;&#39588;&#28857;&#20987;&#23637;&#24320;</span><br /><span><br /></span> <span>I. &#28155;&#21152;&#26381;&#21153;&#22120;</span><br /><span><br /></span> <span>&#20999;&#25442;&#21040;&ldquo;&#26381;&#21153;&#22120;&#31649;&#29702;&rdquo;&#36873;&#39033;&#21345;&#65292;&#28857;&#20987;&ldquo;&#28155;&#21152;&rdquo;&#26469;&#22686;&#21152;&#19968;&#20010;&#26381;&#21153;&#22120;&#37197;&#32622;&#20449;&#24687;&#12290;&#20320;&#20063;&#21487;&#20197;&#21516;&#26102;&#28155;&#21152;&#22810;&#20010;&#26381;&#21153;&#22120;&#37197;&#32622;&#20449;&#24687;&#65292;&#22914;&#19979;&#22270;&#65306;</span><br /><span><br /></span> </p>\n<div><a href=\"https://4.bp.blogspot.com/-BwAB_bG1ehc/WFFWUM40-2I/AAAAAAAADbo/DXdgFarlgvcsAfv2UKRdG-w3Y73jPlGIQCLcB/s1600/%25E6%259C%258D%25E5%258A%25A1%25E5%2599%25A8%25E7%25AE%25A1%25E7%2590%25861-768x345.png\" imageanchor=\"1\"><img border=\"0\" src=\"https://4.bp.blogspot.com/-BwAB_bG1ehc/WFFWUM40-2I/AAAAAAAADbo/DXdgFarlgvcsAfv2UKRdG-w3Y73jPlGIQCLcB/s1600/%25E6%259C%258D%25E5%258A%25A1%25E5%2599%25A8%25E7%25AE%25A1%25E7%2590%25861-768x345.png\"></a></div>\n<p><span><br /></span><br /><span><br /></span> <span>&#28155;&#21152;&#19968;&#20010;&#26381;&#21153;&#22120;&#37197;&#32622;&#21518;&#65292;&#23601;&#35201;&#22635;&#20889;&#26381;&#21153;&#22120;&#37197;&#32622;&#65288;&#22914;&#19979;&#22270;&#65289;&#65292;&#26381;&#21153;&#22120;&#22320;&#22336;&#12289;&#26381;&#21153;&#22120;&#31471;&#21475;&#12289;&#23494;&#30721;&#12289;&#21152;&#23494;&#26041;&#24335;&#26159;&#24517;&#39035;&#30340;&#12290;&#24314;&#35758;&#22312;&#21035;&#21517;&#20013;&#20026;&#24403;&#21069;&#37197;&#32622;&#25991;&#20214;&#36215;&#19968;&#20010;&#21517;&#23383;&#65307;&#22635;&#20837;&#20449;&#24687;&#21518;&#20445;&#23384;&amp;&#24212;&#29992;&#65307;&#22914;&#26524;&#26381;&#21153;&#22120;&#25903;&#25345;&#19968;&#27425;&#39564;&#35777;&#65292;&#24314;&#35758;&#21246;&#36873;&#65292;&#22914;&#26524;&#19981;&#25903;&#25345;&#21017;&#19981;&#35201;&#25171;&#24320;&#21542;&#21017;&#26080;&#27861;&#36830;&#25509;&#65288;&#26377;&#20123;&#26381;&#21153;&#22120;&#24378;&#21046;&#25171;&#24320;&#19968;&#27425;&#39564;&#35777;&#30340;&#35805;&#21017;&#24517;&#39035;&#21246;&#36873;&#65289;&#12290;&#26381;&#21153;&#22120;&#22320;&#22336;&#38656;&#35201;&#22635;&#20837;IP&#22320;&#22336;&#12290;</span><br /><span><br /></span> </p>\n<div><a href=\"https://4.bp.blogspot.com/-vkFUa93CBzo/WFFWekSzldI/AAAAAAAADbs/Lxm0-lXpFt4emnwMeHcIzKJUZBHWYcX6gCLcB/s1600/%25E6%259C%258D%25E5%258A%25A1%25E5%2599%25A8%25E7%25AE%25A1%25E7%2590%25862-768x598.png\" imageanchor=\"1\"><img border=\"0\" src=\"https://4.bp.blogspot.com/-vkFUa93CBzo/WFFWekSzldI/AAAAAAAADbs/Lxm0-lXpFt4emnwMeHcIzKJUZBHWYcX6gCLcB/s1600/%25E6%259C%258D%25E5%258A%25A1%25E5%2599%25A8%25E7%25AE%25A1%25E7%2590%25862-768x598.png\"></a></div>\n<p><span><br /></span><br /><span><br /></span> <span>II. &#35774;&#32622;&#20195;&#29702;&#26041;&#26696;</span><br /><span><br /></span> <span>&#25509;&#30528;&#20999;&#25442;&#21040;&ldquo;&#35775;&#38382;&#25511;&#21046;&rdquo;&#39029;&#38754;&#65292;&#22914;&#19979;&#22270;&#65306;</span><br /><span><br /></span> </p>\n<div><a href=\"https://2.bp.blogspot.com/-pPRjuvT-3lI/WFFWp5SPsCI/AAAAAAAADbw/1op9JST371M3AY5xzstbCy69IJuBFDacgCLcB/s1600/%25E8%25AE%25BF%25E9%2597%25AE%25E6%258E%25A7%25E5%2588%25B6-768x843.png\" imageanchor=\"1\"><img border=\"0\" src=\"https://2.bp.blogspot.com/-pPRjuvT-3lI/WFFWp5SPsCI/AAAAAAAADbw/1op9JST371M3AY5xzstbCy69IJuBFDacgCLcB/s1600/%25E8%25AE%25BF%25E9%2597%25AE%25E6%258E%25A7%25E5%2588%25B6-768x843.png\"></a></div>\n<p><span><br /></span><br /><span><br /></span> <span>&#22806;&#32593;&#21306;&#22495;&#65306;&#21487;&#25511;&#21046;&#35775;&#38382;&#29305;&#23450;&#22806;&#32593;IP&#26102;&#65292;&#26159;&#21542;&#32463;&#36807;shadowsocks&#20195;&#29702;&#65288;&#20869;&#32593;&#21306;&#22495;&#20026;&#27491;&#24120;&#20195;&#29702;&#27169;&#24335;&#26102;&#29983;&#25928;&#65289;</span><br /><span><br /></span> <span>&#24573;&#30053;&#21015;&#34920;&#25991;&#20214;&#65306;&#35775;&#38382;&#22312;&#36825;&#20010;&#21015;&#34920;&#20013;&#30340;IP&#26102;&#65292;&#19981;&#32463;&#36807;shadowsocks&#20195;&#29702;&#12290;&#36825;&#20010;&#26041;&#26696;&#20351;&#29992;chnroute&#25991;&#20214;&#20316;&#20026;&#24573;&#30053;&#25991;&#20214;&#65292;&#21482;&#26377;&#37197;&#32622;&#20102;&#36825;&#20010;&#25991;&#20214;&#65292;shadowsocks&#25165;&#21487;&#20197;&#33258;&#21160;&#21306;&#20998;&#22269;&#20869;&#21644;&#22269;&#22806;IP&#12290;&#30001;&#20110;&#25105;&#20204;&#23433;&#35013;ChinaDNS&#30340;&#24102;&#26377;&#36825;&#20010;&#36335;&#30001;&#34920;&#25991;&#20214;&#65292;&#25105;&#20204;&#23601;&#36873;&#25321;&ldquo;ChinaDNS&#36335;&#30001;&#34920;&rdquo;&#12290;</span><br /><span><br /></span> <span>&#19981;&#36807;&#36825;&#20010;&#21015;&#34920;&#38656;&#35201;&#23450;&#26399;&#26356;&#26032;&#65292;ChinaDNS&#23433;&#35013;&#26102;&#20505;&#38468;&#24102;&#30340;&#37027;&#20010;&#27604;&#36739;&#32769;&#26087;&#20102;&#65292;&#38656;&#35201;&#26356;&#26032;&#65292;&#25191;&#34892;&#20197;&#19979;&#21629;&#20196;&#25163;&#21160;&#26356;&#26032;&#65306;</span></p>\n<blockquote><p><span><span>1. wget -O- &#8216;http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest&#8217; | awk -F| &#8216;/CN|ipv4/  printf(&#8220;%s/%dn&#8221;, $4, 32-log($5)/log(2)) &#8216; &gt; /etc/chinadns_chnroute.txt</span></span></p></blockquote>\n<p><span><br /></span> <span>&#39069;&#22806;&#34987;&#24573;&#30053;IP&#65306;&#36825;&#20010;&#21015;&#34920;&#20013;&#30340;IP&#24378;&#21046;&#32469;&#36807;shadowsocks&#20195;&#29702;&#65292;&#25353;&#38656;&#28155;&#21152;&#12290;</span><br /><span>&#24378;&#21046;&#36208;&#20195;&#29702;IP&#65306;&#36825;&#20010;&#21015;&#34920;&#20013;&#30340;IP&#24378;&#21046;&#36208;shadowsocks&#20195;&#29702;&#65292;&#25353;&#38656;&#28155;&#21152;&#12290;</span><br /><span>&#20869;&#32593;&#21306;&#22495;&#65306;&#25511;&#21046;&#29305;&#23450;&#20869;&#32593;IP&#30340;&#20195;&#29702;&#26041;&#24335;&#12290;</span><br /><span><br /></span> <span>&#20849;&#19977;&#31181;&#26041;&#24335;&#65306;</span><br /><span><br /></span> <span>1.&#27491;&#24120;&#20195;&#29702;&#65306;&#20351;&#29992;&#22806;&#32593;&#21306;&#22495;&#35774;&#32622;&#30340;&#26041;&#24335;&#12290;</span><br /><span><br /></span> <span>2.&#30452;&#25509;&#36830;&#25509;&#65306;&#24573;&#30053;&#22806;&#32593;&#21306;&#22495;&#30340;&#35774;&#32622;&#65292;&#19981;&#36208;&#20195;&#29702;&#12290;</span><br /><span><br /></span> <span>3.&#20840;&#23616;&#20195;&#29702;&#65306;&#24573;&#30053;&#22806;&#32593;&#21306;&#22495;&#30340;&#35774;&#32622;&#65292;&#24378;&#21046;&#36208;&#20195;&#29702;&#12290;</span><br /><span><br /></span> <span>&#32593;&#32476;&#25509;&#21475;&#65306;shadowsocks&#21482;&#20316;&#29992;&#20110;&#21246;&#36873;&#20102;&#30340;&#32593;&#32476;&#25509;&#21475;&#12290;&#40664;&#35748;OpenWRT&#21482;&#26377;&#19968;&#20010;LAN&#21306;&#22495;&#65292;&#27492;&#22788;&#20063;&#21482;&#20250;&#26174;&#31034;&#19968;&#20010;&#25509;&#21475;&#65292;&#20063;&#23601;&#26159;&#65306;&ldquo;&#26725;&#25509;&#65306;br-lan&rdquo;&#65307;&#19968;&#33324;&#24773;&#20917;&#21246;&#36873;&#23427;&#23601;&#34892;&#12290;&#24403;&#36335;&#30001;&#37197;&#32622;&#20102;&#22810;&#20010;LAN&#21306;&#22495;&#26102;&#20505;&#65292;&#21017;&#20250;&#26174;&#31034;&#22810;&#20010;&#12290;&#22312;&#22914;&#19979;&#24773;&#20917;&#19979;&#24456;&#26377;&#29992;&#65306;</span><br /><span><br /></span> <span>1. &#22810;LAN&#29615;&#22659;&#65292;&#22914;&#39069;&#22806;&#30340;&#26469;&#23486;&#32593;&#32476;&#12290;&#22914;&#19978;&#38754;&#22270;&#20013;&#65292;&#25105;&#39069;&#22806;&#37197;&#32622;&#20102;&#19968;&#20010;&#26469;&#23486;&#29992;&#30340;GUEST&#32593;&#32476;&#65292;&#27492;&#32593;&#32476;&#23646;&#20110;&#39069;&#22806;&#30340;LAN_GUEST&#21306;&#22495;&#12290;&#27492;&#26102;&#25105;&#19981;&#24819;&#35753;&#36830;&#25509;&#26469;&#23486;&#32593;&#32476;&#30340;&#29992;&#25143;&#20351;&#29992;shadowsocks&#65292;&#21017;&#19981;&#21246;&#36873;&#36825;&#20010;&#25509;&#21475;&#21363;&#21487;&#12290;</span><br /><span><br /></span> <span>2. &#36335;&#30001;&#22120;&#20316;&#20026;VPN&#26381;&#21153;&#22120;&#65292;&#20854;&#20182;&#35774;&#22791;&#38656;&#35201;&#20351;&#29992;VPN&#36830;&#25509;&#36335;&#30001;&#24182;&#20351;&#29992;shadowsocks&#26102;&#65292;&#22312;&#27492;&#22788;&#21246;&#36873;VPN&#36830;&#25509;&#23545;&#24212;&#30340;&#25509;&#21475;&#21363;&#21487;&#12290;</span><br /><span><br /></span> <span>&#20195;&#29702;&#31867;&#22411;&#65306;&#20869;&#32593;&#21306;&#22495;&#40664;&#35748;&#30340;&#20195;&#29702;&#26041;&#24335;&#12290;&#19977;&#31181;&#65306;&#27491;&#24120;&#20195;&#29702;&#12289;&#30452;&#25509;&#36830;&#25509;&#12289;&#20840;&#23616;&#20195;&#29702;&#12290;</span><br /><span><br /></span> <span>&#20195;&#29702;&#33258;&#36523;&#65306;&#36335;&#30001;&#35774;&#22791;&#33258;&#36523;&#30340;&#20195;&#29702;&#26041;&#24335;&#12290;</span><br /><span><br /></span> <span>&#20869;&#32593;&#20027;&#26426;&#65306;&#21333;&#29420;&#37197;&#32622;&#20869;&#32593;&#29305;&#23450;IP&#30340;&#20195;&#29702;&#26041;&#24335;&#12290;</span><br /><span><br /></span> <span>&#20840;&#37096;&#23436;&#25104;&#21518;&#65292;&#28857;&#20987;&#20445;&#23384;&amp;&#24212;&#29992;&#12290;</span><br /><span><br /></span> <span>III. &#24320;&#21551;&#20195;&#29702;&#26381;&#21153;</span><br /><span><br /></span> <span>&#26368;&#21518;&#20999;&#25442;&#21040;&#24120;&#35268;&#35774;&#32622;&#65292;&#26469;&#23436;&#25104;&#26368;&#32456;&#30340;&#37197;&#32622;&#65306;</span><br /><span><br /></span> </p>\n<div><a href=\"https://3.bp.blogspot.com/-HRdmpiCP7MY/WFFXCC-nOaI/AAAAAAAADb0/_mJFlto2TGAwbDz6dSakWKl9YCMDTfuAACLcB/s1600/%25E5%25B8%25B8%25E8%25A7%2584%25E8%25AE%25BE%25E7%25BD%25AE-662x1024.png\" imageanchor=\"1\"><img border=\"0\" height=\"320\" src=\"https://3.bp.blogspot.com/-HRdmpiCP7MY/WFFXCC-nOaI/AAAAAAAADb0/_mJFlto2TGAwbDz6dSakWKl9YCMDTfuAACLcB/s320/%25E5%25B8%25B8%25E8%25A7%2584%25E8%25AE%25BE%25E7%25BD%25AE-662x1024.png\" width=\"206\"></a></div>\n<p><span><br /></span><br /><span><br /></span> <span>&#36816;&#34892;&#29366;&#24577;&#65306;</span><br /><span><br /></span> <span>&#36879;&#26126;&#20195;&#29702;&#65306; ss-redir&#30340;&#36816;&#34892;&#29366;&#24577;&#65292;shadowosocks&#20195;&#29702;&#30340;&#22522;&#30784;&#26381;&#21153;&#65292;&#25552;&#20379;TCP/UDP&#36879;&#26126;&#20195;&#29702;&#12290;</span><br /><span><br /></span> <span>socks5&#20195;&#29702;&#65306;ss-local&#30340;&#36816;&#34892;&#29366;&#24577;&#65292;&#23558;shadowsocks&#36716;&#25104;socks5&#20195;&#29702;&#65292;&#36335;&#30001;&#22120;&#20316;&#20026;socks5&#26381;&#21153;&#22120;&#12290;</span><br /><span><br /></span> <span>&#31471;&#21475;&#36716;&#21457;&#65306;ss-tunnel&#30340;&#36816;&#34892;&#29366;&#24577;&#65292;&#36890;&#24120;&#29992;&#20316;&#36716;&#21457;DNS&#12290;</span><br /><span><br /></span> <span>&#36879;&#26126;&#20195;&#29702;&#65306;</span><br /><span><br /></span> <span>&#20027;&#26381;&#21153;&#22120;&#65306;&#36879;&#26126;&#20195;&#29702;&#20351;&#29992;&#30340;&#40664;&#35748;&#26381;&#21153;&#22120;&#65288;TCP&#36879;&#26126;&#20195;&#29702;&#12289;&#31471;&#21475;&#36716;&#21457;&#20004;&#20010;&#21151;&#33021;&#20250;&#20351;&#29992;&#36825;&#37324;&#36873;&#25321;&#30340;&#26381;&#21153;&#22120;&#65289;&#65292;&#27492;&#22788;&#20174;&#21015;&#34920;&#20013;&#36873;&#25321;&#20320;&#38656;&#35201;&#20351;&#29992;&#30340;&#26381;&#21153;&#22120;&#12290;</span><br /><span><br /></span> <span>UDP&#26381;&#21153;&#22120;&#65306;UDP&#36879;&#26126;&#20195;&#29702;&#20351;&#29992;&#30340;&#26381;&#21153;&#22120;&#65292;&#21487;&#20197;&#21644;&#20027;&#26381;&#21153;&#22120;&#19968;&#33268;&#65292;&#20063;&#21487;&#20197;&#19981;&#21516;&#65288;&#20063;&#23601;&#26159;&#21487;&#20197;&#20351;&#29992;&#19981;&#21516;&#30340;&#26381;&#21153;&#22120;&#20998;&#21035;&#20195;&#29702;TCP&#21644;UDP&#36830;&#25509;&#65289;&#12290;&#22312;&#20195;&#29702;&#19968;&#20123;&#22806;&#26381;&#32593;&#32476;&#28216;&#25103;&#30340;&#26102;&#20505;&#21487;&#33021;&#27604;&#36739;&#26377;&#29992;&#65292;&#20854;&#20182;&#22810;&#25968;&#24773;&#20917;&#19979;&#21487;&#20197;&#20851;&#38381;&#12290;&#24320;&#21551;&#27492;&#39033;&#38656;&#35201;&#26381;&#21153;&#22120;&#25903;&#25345;&#65292;&#26381;&#21153;&#22120;&#31471;&#38656;&#35201;&#24320;&#21551;UDP&#21151;&#33021;&#12290;</span><br /><span><br /></span> <span>&#26412;&#22320;&#31471;&#21475;&#65306;shadowsocks&#26381;&#21153;&#38656;&#35201;&#21344;&#29992;&#19968;&#20010;&#36335;&#30001;&#22120;&#31471;&#21475;&#65292;&#25512;&#33616;&#20445;&#30041;&#40664;&#35748;&#65292;&#20294;&#19981;&#33021;&#21644;&#20854;&#20182;&#36816;&#34892;&#30340;&#31243;&#24207;&#26377;&#20914;&#31361;&#65292;&#20063;&#19981;&#33021;&#21644;&#19979;&#38754;&rdquo;socks5&#20195;&#29702;&rdquo;&#21644;&ldquo;&#31471;&#21475;&#36716;&#21457;&rdquo;&#20013;&#30340;&#26412;&#22320;&#31471;&#21475;&#20914;&#31361;&#12290;</span><br /><span><br /></span> <span>socks5&#20195;&#29702;&#65306;</span><span>&#26377;&#38656;&#35201;&#23601;&#24320;&#21543;&#65292;&#19981;&#30693;&#36947;&#26377;&#29992;&#27809;&#30340;&#35805;&#23601;&#20572;&#29992;&#12290;</span><br /><span><br /></span> <span>&#31471;&#21475;&#36716;&#21457;&#65306;</span><span>DNS&#35299;&#26512;&#29992;&#24471;&#21040;&#65292;&#22312;&#21518;&#38754;DNS&#35774;&#32622;&#37096;&#20998;&#20250;&#26377;&#35828;&#26126;&#12290;</span><br /><span><br /></span> <span>&#26368;&#21518;&#20877;&#27425;&#20445;&#23384;&amp;&#24212;&#29992;&#65292;&#24182;&#21047;&#26032;&#39029;&#38754;&#65292;&#30475;&#21040;&ldquo;&#36816;&#34892;&#29366;&#24577;&rdquo;&#20013;&#23545;&#24212;&#30340;&#39033;&#30446;&#26174;&#31034;&#36816;&#34892;&#20013;&#21363;&#34920;&#31034;&#25104;&#21151;&#12290;</span><br /><span><br /></span> <span>IV. &#39069;&#22806;&#30340;&#20248;&#21270;</span><br /><span><br /></span> <span>&#36825;&#26679;&#37197;&#32622;&#30340;&#32467;&#26524;&#34429;&#28982;&#22269;&#22806;IP&#33258;&#21160;&#36208;&#20195;&#29702;&#65292;&#20294;&#26159;&#21487;&#33021;&#36935;&#21040;&#20351;&#29992;BT&#20043;&#31867;&#30340;&#19979;&#36733;&#36719;&#20214;&#26102;&#65292;&#20986;&#29616;&#36830;&#25509;&#22269;&#22806;Peer&#24182;&#36208;&#20195;&#29702;&#30340;&#24773;&#20917;&#65292;&#36825;&#31181;&#24773;&#20917;&#26159;&#25105;&#20204;&#24819;&#36991;&#20813;&#30340;&#12290;&#65288;P2P&#26159;&#35768;&#22810;&#32593;&#32476;&#26381;&#21153;&#22120;&#25552;&#20379;&#21830;&#26126;&#20196;&#31105;&#27490;&#30340;&#65292;&#24182;&#19988;&#22823;&#37096;&#20998;&#20195;&#29702;&#25552;&#20379;&#32773;&#20063;&#31105;&#27490;&#20351;&#29992;BT&#31561;&#19979;&#36733;&#36719;&#20214;&#65289;</span><br /><span><br /></span> <span>&#35299;&#20915;&#26041;&#27861;&#36824;&#26159;&#26377;&#30340;&#12290;&#30001;&#20110;&#27492;&#31867;&#36719;&#20214;&#24448;&#24448;&#21452;&#31471;&#37117;&#20351;&#29992;&#39640;&#31471;&#21475;&#65292;&#22240;&#27492;&#20351;&#29992;&#28304;&#31471;&#21475;&#21495;&#25110;&#32773;&#30446;&#30340;&#31471;&#21475;&#21495;&#31579;&#36873;&#21363;&#21487;&#12290;&#25552;&#20379;&#19968;&#20010;&#20363;&#23376;&#65306;</span><br /><span><br /></span> <span>&#22312;/etc/config/shadowsocks&#20013;&#30340;config access_control&#23383;&#27573;&#19979;&#38754;&#21152;&#20837;&#19968;&#34892;&#24182;&#37325;&#21551;&#20195;&#29702;&#26381;&#21153;&#21363;&#21487;&#65306;</span></p>\n<blockquote><p><span>1. option ipt_ext &#8216;&#8211;dport 21:1024&#8217;</span></p></blockquote>\n<p><span>&#19978;&#38754;&#19968;&#34892;&#30340;&#20316;&#29992;&#26159;&#65306;&#21482;&#26377;21&#21040;1024&#30340;&#31471;&#21475;&#36208;ss&#12290;&#31471;&#21475;&#33539;&#22260;&#21487;&#20197;&#33258;&#34892;&#25351;&#23450;&#12290;&#20063;&#21487;&#26681;&#25454;&#38656;&#27714;&#20351;&#29992;&#28304;&#31471;&#21475;&#26469;&#31579;&#36873;&#65288;dport&#25913;&#25104;sport&#65289;&#12290;</span><span>&#24403;&#28982;&#65292;&#20063;&#21487;&#20197;&#22312;&#31471;&#21475;&#21495;&#21069;&#38754;&#21152;&rdquo;!&rdquo;&#65288;&#21497;&#21495;&#65289;&#34920;&#31034;&#21462;&#21453;&#65292;&#36825;&#26679;&#30340;&#20316;&#29992;&#26159;&#25490;&#38500;&#19968;&#20123;&#31471;&#21475;&#19981;&#36208;ss&#65292;&#20854;&#20182;&#30340;&#36208;&#12290;</span></p>\n<p><span><br /></span><span><b>&#19977;&#12289;DNS&#37197;&#32622;</b></span><br /><span><br /></span> <span>&#21040;&#27492;&#34429;&#28982;shadowsocks&#37197;&#32622;&#23436;&#25104;&#65292;&#19981;&#36807;&#36824;&#27809;&#26377;&#36827;&#34892;DNS&#37096;&#20998;&#30340;&#37197;&#32622;&#65292;&#21482;&#26377;&#23436;&#25104;&#20102;DNS&#30340;&#37197;&#32622;&#25165;&#33021;&#35299;&#20915;DNS&#27745;&#26579;&#24182;&#20248;&#21270;DNS&#35299;&#26512;&#65292;&#25509;&#19979;&#26469;&#30340;&#37096;&#20998;&#26469;&#23545;DNS&#30340;&#37197;&#32622;&#36827;&#34892;&#35828;&#26126;&#12290;</span><br /><span><br /></span> <span>&#65288;&#26032;&#29256;&#26412;&#30340;DNS&#37197;&#32622;&#37096;&#20998;&#26410;&#32534;&#20889;&#23436;&#27605;&#65292;&#21487;&#20808;&#21442;&#32771;<a href=\"https://cokebar.info/archives/1704\">&#32769;&#29256;&#26412;</a>&#20197;&#21450;&#12298;<a href=\"https://cokebar.info/archives/1410\">OpenWRT &#33258;&#21160;&#32763;&#22681;&#36335;&#30001;&#22120; DNS &#35299;&#26512;&#30340;&#25913;&#21892;</a>&#12299;&#65289;</span><br /><span><br /></span> </p>\n<div>&#32763;&#22681;&#25216;&#26415;&#21338;&#23458;<a href=\"http://www.chinagfw.org/2013/09/blog-post.html\">&#35746;&#38405;&#22320;&#22336;&#21450;&#31038;&#20132;&#24080;&#21495;</a></div>\n</p>\n<p>请在<a href=\"http://onlineapk.com/download-freebrowser-apk/\">这里</a>下载FreeBrowser，将它的APK文件下载到本地然后传到手机中安装，即可翻墙。</p>\n","author":1005,"categories":[18270,18269,10466,15300],"tags":[32132,7775,31761,28377,8795]}