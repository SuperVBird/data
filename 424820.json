{"id":424820,"link":"https://chinadigitaltimes.net/chinese/2016/01/hosts-原理-通过编辑-hosts-访问-google-服务/","date":"2016-01-11T17:54:40Z","modified":"2016-01-11T18:28:52Z","title":"Hosts 原理 &#038; 通过编辑 Hosts 访问 Google 服务","content":"<div dir=\"ltr\">\n<div>来源： <a href=\"http://laod.cn/hosts/2016-google-hosts.html\">http://laod.cn/hosts/2016-google-hosts.html</a></div>\n<div>本文分两部分：第一部分介绍 Hosts 运行原理；第二部分介绍如果通过编辑 Hosts 文本获得在墙内访问 Google 服务的方法。</div>\n<div><b>第一部分</b></div>\n<div>Hosts文件是一个用于储存计算机网络中各节点信息的计算机文件。这个文件负责将主机名映射到相应的IP地址。hosts文件通常用于补充或取代网络中DNS的功能。和DNS不同的是，计算机的用户可以直接对hosts文件进行控制。</div>\n<div>\n<div><a href=\"http://1.bp.blogspot.com/-8kXbV7hdxHI/VpPab_Qw0YI/AAAAAAAACiM/Lyjumzty48k/s1600/hosts.png\"><img src=\"http://1.bp.blogspot.com/-8kXbV7hdxHI/VpPab_Qw0YI/AAAAAAAACiM/Lyjumzty48k/s320/hosts.png\" alt=\"\" width=\"320\" height=\"320\" border=\"0\" /></a></div>\n<div></div>\n<div>为了方便用户记忆，我们将IP变成一个个的域名来输入到浏览器进行访问。而这使得访问网站时要先将其域名解析成 IP 。DNS (Domain Name Server) 的作用就是进行 IP 解析，把域名对应到 IP。<br />\n在 Great FireWall 的 5 种封锁方法中，有一种简单而效果很好的方法是 DNS 污染。GFW 会对 DNS 的解析过程进行干扰，这会使对某些被干扰的域名返回一个错误的 IP 地址给你的主机，使你无法正确连接到你要的服务器上读取正确的信息。</div>\n<div></div>\n<div>Hosts 文件本来是用来提高解析效率。在进行 DNS 请求以前，系统会先检查自己的 Hosts 文件中是否有这个地址映射关系，如果有则调用这个 IP 地址映射，如果没有再向已知的 DNS 服务器提出域名解析。也就是说 Hosts 的请求级别比 DNS 高。当你的 Hosts 文件里面有对应的 IP 时，它就会直接访问那个 IP，而不用通过 DNS。</div>\n<div></div>\n<div>所以，<b>当我们直接将 Google、Twitter、Facebook 之类的 IP 放入 Hosts 文件后，就可以跳过 DNS 的解析这一步，直接就行 IP 访问，不受 GFW 的 DNS 污染干扰了。</b></div>\n<div>补充一条，就是为什么 Hosts 的 IP 要时不时更改，为什么 FB、Twitter 会仍旧上不去。是因为 GFW 的第二个大招，IP 封锁。比如访问国外一个 IP 无法访问，Ping 不通，tracert 这个 IP 后发现，全部在边缘路由器 (GFW) 附近被拦截。换言之，GFW 直接拦截带有这个 IP 头的数据包。所以，如果你更改的 IP 被封锁了，就算你过了 DNS 这一关，也仍旧不能翻过 GFW。</div>\n<div>所以hosts才会频繁的更新新的ip、域名。</div>\n</div>\n<div></div>\n<div><strong>有很多人问：“怎么制作<a title=\"浏览关于“Google hosts”的文章\" href=\"http://laod.cn/tag/google-hosts\" target=\"_blank\">Google hosts</a>？”</strong></div>\n<div></div>\n<div>\n<div>\n<div>首先要弄明白https、“google.com”(域名)、ip地址、ping都是做什么的。</div>\n<div></div>\n<div>1、先说https，<b>Hypertext Transfer Protocol Secure</b>是<u>超文本传输协议</u>和<u>SSL/TLS</u>的组合，用以提供加密通讯及对网络服务器身份的鉴定。简单的说就是加密的http协议。说到http协议，大家应该都知道默认是采用80端口，而https协议默认为443端口。</div>\n<div></div>\n<div>2、域名，简单说就是ip地址的名字，好记呗。上面问题中的“google.com”还 不算是完整域名，而是一个域 的名字（简称域）。有人说前面要加的“www”前缀，又叫主机，与域形成完整域名“www.google.com”。这就是为什么要加”www”,因为“google.com”是一个域，只有指出某一主机才能ping。问题又来了，可为什么有时只用域，如“google.com”也能ping，也能打开网页呢？这是因为在DNS中特别设置了主机解析记录。（个人自认为做了这个设置的都是注重细节的好网站）跑偏了。。。</div>\n<div></div>\n<div>3、ip地址，估计不需要多说了。</div>\n<div></div>\n<div>4、ping，网络测试工具，当然用来获得ip是可行的。</div>\n</div>\n</div>\n<div></div>\n<div>5、GoGo Tester寻找IP作为最后解决方案(目前成功率很低)</div>\n<div></div>\n<div></div>\n<div>\n<div>\n<div><strong>http与https</strong></div>\n<div>\n<div>\n<div></div>\n<div>\n<div>http是HTTP协议运行在TCP之上。所有传输的内容都是明文，客户端和服务器端都无法验证对方的身份。</div>\n<div>https是HTTP运行在SSL/TLS之上，SSL/TLS运行在TCP之上。所有传输的内容都经过加密，加密采用对称加密，但对称加密的密钥用服务器方的证书进行了非对称加密。此外客户端可以验证服务器端的身份，如果配置了客户端验证，服务器方也可以验证客户端的身份。</div>\n</div>\n<div></div>\n</div>\n</div>\n<div>封域名/内容过滤，用http协议发送数据的时候，墙检测到你要发送的域名，然后给你过滤掉，返回空或者出错等。用https可以解决这个问题，因为墙不知道你发送的是什么数据。如果用了https，因为无法检测内容，所以墙会在dns解析的时候，返回给你错误ip，dns没有加密，所以同样虽然用了https，但由于dns解析错误，还是无法访问网站。所以在hosts给域名指向正确的ip，那么我们就可以跨越过“长城”了。</div>\n</div>\n</div>\n<div></div>\n<div></div>\n<div>\n<div>\n<div><strong>https 网站如何制作hosts？如获得https://google.com 的ip地址，ping命令不行。</strong><br />\n从1中可知，http和https都是协议，区别只是对应端口不同。那么ip呢？其实“http://google.com“与“https://google.com“在ip解析时是一样的，只是指向了不同端口，这个端口是TCP端口。<br />\n所以在ping时，是不需要加协议前缀的。只需要ping域名就ok。<br />\nhosts中同理。</div>\n<div></div>\n<div><b>第二部分</b></div>\n<div><b> </b></div>\n<div>=================================</div>\n<div><b>Hosts 文件下载信息</b></div>\n<div>&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-</div>\n<div>更新日期：2016-01-06</div>\n<div>\n<div>百度网盘 Hosts 下载地址 ：<a href=\"http://pan.baidu.com/s/1i4iVWVV\">http://pan.baidu.com/s/1i4iVWVV</a></div>\n<div>百度提取码：g4jw</div>\n<div>文件解压缩密码：www.laod.cn</div>\n</div>\n<div>=================================</div>\n<div>\n<h3></h3>\n<div><b><a title=\"浏览关于“hosts”的文章\" href=\"http://laod.cn/tag/hosts\" target=\"_blank\">Hosts</a> 所在文件夹：</b></div>\n<ul>\n<li><strong>Windows</strong> 系统<a title=\"浏览关于“host”的文章\" href=\"http://laod.cn/tag/host\" target=\"_blank\">host</a>s位于 C:WindowsSystem32driversetchosts</li>\n<li><strong>Android</strong>（安卓）系统hosts位于 /system/etc/hosts</li>\n<li><strong>Mac</strong>（苹果电脑）系统hosts跟Linux一样位于 /etc/hosts</li>\n<li><strong>iPhone</strong>（iOS）系统hosts跟Linux Mac一样位于 /etc/hosts</li>\n<li><strong>Linux</strong>系统hosts位于 /etc/hosts</li>\n<li></li>\n</ul>\n<ul>\n<li>你也可以用 Notepad++ 自行转换文本编码和换行符格式。当然，老D分享的都转换好了。修改hosts后生效的方法：</li>\n</ul>\n<ul>\n<li>Windows</li>\n<li>开始 -&gt; 运行 -&gt; 输入cmd -&gt; 在CMD窗口输入</li>\n<li>\n<div>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n</td>\n<td>\n<div>ipconfig /flushdns</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</li>\n<li>Linux<br />\n终端输入</p>\n<div></div>\n<div>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n</td>\n<td>\n<div>sudo rcnscd restart</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n<div>对于systemd发行版，请使用命令</div>\n<div>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n</td>\n<td>\n<div>sudo systemctl restart NetworkManager</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n<div>如果不懂请都尝试下</div>\n</li>\n<li>Mac OS X终端输入</li>\n<li>\n<div>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td>\n<div>1</div>\n</td>\n<td>\n<div>sudo killall -HUP mDNSResponder</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</li>\n<li>Android<br />\n开启飞行模式 -&gt; 关闭飞行模式</li>\n<li>通用方法<br />\n拔网线(断网) -&gt; 插网线(重新连接网络) //有时候不需要这么做也可以的，反正老D很少刷新DNS，刷新可以更快的解析</li>\n<li></li>\n<li><b>修改hosts相关说明：</b></li>\n</ul>\n<div>\n<div>\n<div>注：Google、Gmail、维基百科、Twitter、Facebook等必须请用https 加密方式打开。<br />\n（一般这些网站都是SSL加密链接）如谷歌学术：https://scholar.google.com/</div>\n<div>如果不喜欢用谷歌香港，可以以 <a href=\"https://www.google.com/ncr\" target=\"_blank\" rel=\"nofollow\">https://www.google.com/ncr</a> 方式访问，(No Country Redirect)禁止国别跳转。</div>\n<div>另外可能有的地区&amp;网络（铁通、联通）hosts无法正常使用，这个不是你我能左右的！</div>\n<div>老D所提供的hosts仅限于学习使用，hosts里不会添加屏蔽广告条目，也不会劫持任何网站。</div>\n<div>重要的事情说三遍：</div>\n<div>由于DNS污染太严重，YouTube只能打开网页，视频无法播放！</div>\n<div>由于DNS污染太严重，YouTube只能打开网页，视频无法播放！</div>\n<div>由于DNS污染太严重，YouTube只能打开网页，视频无法播放！</div>\n<div>麻烦别问我为什么修改hosts不能加载YouTube视频啦，我去年回答了不下500次。</div>\n</div>\n</div>\n<div>\n<div>\n<div>对了，Google Play也不能正常下载，或者有时候图片加载不出来，通讯录不能同步。</div>\n<div>如果你真的想看YouTube或者需要用Google Play下载应用程序再或者需要同步通讯录或者国外的新闻网站、视频网站、1024等等…</div>\n<div>\n<p>那么我推荐你用SS翻墙（ShadowSocks 中文名稱：影梭）吧！（算是广告~）</p>\n<p>传送门：<a href=\"http://my.yizhihongxing.com/aff.php?aff=084\" target=\"_blank\" rel=\"nofollow\">http://my.yizhihongxing.com/aff.php?aff=084</a></p>\n<p>感觉速度还不错，也稳定，售后也很不错的说，一直在用这个。</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div>翻墙技术博客<a href=\"http://www.chinagfw.org/2013/09/blog-post.html\">订阅地址及社交帐号</a></div>\n<p>请点击<a href=\"https://link.getsync.com/#f=CDTD-ChinaDigitalTimesDaily&amp;sz=64E6&amp;t=2&amp;s=23CO2BME4HIWOMDT6RDKZ3LZZ4WBKS6IAGIQNXW2ICSRK576TILA&amp;i=CPFG6S6GPCWYK6BFRIZISD4M73AXZIVQ4&amp;v=2.0\">这里</a>使用P2P分享利器Sync，可以穿墙订阅数字时代每日电邮版。</p>\n","author":1005,"categories":[18270,18269,10466,15300],"tags":[7775,17333,8795]}