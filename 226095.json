{"id":226095,"link":"https://chinadigitaltimes.net/chinese/2012/05/翻墙-写了一个-proxy-用途你懂的/","date":"2012-05-13T23:23:13Z","modified":"2012-05-13T23:23:13Z","title":"翻墙 | 写了一个 proxy 用途你懂的","content":"<p>原文：<a rel=\"nofollow\" target=\"_blank\" href=\"http://igfw.net/archives/9196\">http://igfw.net/archives/9196</a></p>\n<div></div>\n<div>\n<div>\n<div>\n<p>用 linode 有一年多了 ，除了架设 blog ，我也折腾点小程序放在上面跑。在互联网上有一台自己的主机，对于一个程序员来说，还是很有必要的。当然这 vps 绝对不能选国内的，原因你懂的。这样，附带的一个好处就是可以用 ssh -D ，相信许多同学都喜欢用。</p>\n<p>没来由的，我想自己写一个小程序，完成 ssh -D 一样的功能，不过，不走 SSL 加密。当然也不能走明文，由于众所周知的原因，明文通讯很容易引起奇异的连接断开或长期超时的 bug ，此 bug 绝对不在于你的程序。网络连接永远不是 100% 可靠的嘛。</p>\n<p>我花了两天实现我的构想，本来第一天已经完成了，但实现的过于复杂，且 bug 重重。花了一个通宵都没完全解决。在补了个好觉后，我在梦中意识到，应该简化方案，然后在第二天重写了一遍，终于可以跑起来了。代码是用 Go 实现的，比较玩具，quick &#038; dirty 。不过我还是把它们放在后面。有兴趣的同学可以拿去改进。目前这个雏形已经够我用了，所以即使有改进或许也懒得再贴出来了。</p>\n</div>\n<div>\n<p>主体想法是由两个部分的程序构成，一边放在本机上，对 localhost 开启一个兼容 socks5 的本地端口。当然只这一部分是不够用的，我们需要在墙外再设置一个程序，它才是真正的 proxy server 。这两个程序之间保持一个 TCP 连接。由本地的程序负责把本地的 proxy 请求都转发到墙外。</p>\n<p>最初的想法，我阅读了 socks5 的</p>\n","author":1005,"categories":[18269,15300],"tags":[7775,8795]}