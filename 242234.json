{"id":242234,"link":"https://chinadigitaltimes.net/chinese/2012/07/翻墙-原基于amazon-ec2反向代理google-app-engine/","date":"2012-07-24T11:30:33Z","modified":"2012-07-24T11:30:33Z","title":"翻墙 | [原]基于Amazon EC2反向代理Google App Engine","content":"<p>原文：<a rel=\"nofollow\" target=\"_blank\" href=\"http://blog.csdn.net/cutesource/article/details/7258291\">http://blog.csdn.net/cutesource/article/details/7258291</a></p>\n<div></div>\n<div>\n<p> 近来想重拾一下GAE（Google App Engine），可是GAE在中国被墙，我能想到的解决方案是找一个没有被墙的服务器做GAE的reserved proxy，于是乎我想到了Amazon EC2（其实有点没事找事，如果真要建站直接在EC2上搞就得了，何必绕一圈）。这里就不管这种解决方案是否最优，就权当作是一次对EC2的初步实战的例子而已了。</p>\n<p> 第一步：注册EC2免费帐号</p>\n<p>在<a rel=\"nofollow\" target=\"_blank\" href=\"http://aws.amazon.com/free/\">http://aws.amazon.com/free/</a>注册即可， 不过最阻扰我们的是需要一个可以境外付款的信用卡，不过幸运的是我有招行双币信用卡，填写需要的信息在卡上都有：</p>\n<p><img src=\"http://hi.csdn.net/attachment/201202/14/0_1329205129SZ0Y.gif\" alt=\"\" /></p>\n<p> 注册好后，会很快收到一个美元的扣费短信，不过这个只是amazon验证帐号是否有效的方式，会返还的。</p>\n<p>注册流程中也可以不完成信用卡的填写，可以以后填写或更改，<a rel=\"nofollow\" target=\"_blank\" href=\"https://aws-portal.amazon.com/gp/aws/developer/account?ie=UTF8&#038;action=payment-method\">https://aws-portal.amazon.com/gp/aws/developer/account?ie=UTF8&#038;action=payment-method</a></p>\n<p>第二步：创建instance</p>\n<p>成功注册后就能访问EC2 console，<a rel=\"nofollow\" target=\"_blank\" href=\"https://console.aws.amazon.com/ec2/home\">https://console.aws.amazon.com/ec2/home</a></p>\n<p>点击&#8221;Launch Instance&#8221;创建一个Instance，选择Classic Wizard：</p>\n<p>1）Choose an AMI</p>\n<p>由于我的需求很简单，只需要一个apache即可，因此就选择了最简单的“<strong>Basic 32-bit Amazon Linux AMI 2011.09</strong>”。EC2免费容量是10G，因此不能选太复杂的底层系统，这个最简单的都用去了8G。因此，这一步需要做好规划，和你的需求进行平衡。</p>\n<p>2）Instance Details</p>\n<p>这步就选择默认即可</p>\n<p> <img src=\"http://hi.csdn.net/attachment/201202/14/0_1329204773tf3f.gif\" alt=\"\" /></p>\n<p></p>\n<p> <img src=\"http://hi.csdn.net/attachment/201202/14/0_1329204794u8AE.gif\" alt=\"\" /></p>\n<p>3）Create key pair</p>\n<p> key pair用于将来登录instance的认证，这里需要创建一个：</p>\n<p><img src=\"http://hi.csdn.net/attachment/201202/14/0_1329204820yEt6.gif\" alt=\"\" /></p>\n<p> 起一个名字，download后保存好即可</p>\n<p>4）Configure Firewall</p>\n<p>这里是配置网络端口的开发，对于一个web server来说，一般需要开放SSH（用于远程控制），HTTP和HTTPS（用于web访问），TCP（用于自制网络服务开发）：</p>\n<p><img src=\"http://hi.csdn.net/attachment/201202/14/0_13292048368zCS.gif\" alt=\"\" /></p>\n<p> 最后检查无误后，点击&#8221;Lanuch&#8221;即可完成instance创建</p>\n<p><img src=\"http://hi.csdn.net/attachment/201202/14/0_1329204921w7sP.gif\" alt=\"\" /></p>\n<p> 第三步：启动并登录Instance</p>\n<p>创建好后的instance默认是关闭的，因此需要通过console开启instance：</p>\n<p><img src=\"http://hi.csdn.net/attachment/201202/14/0_1329204905rM22.gif\" alt=\"\" /> </p>\n<p>远程登录和控制instance就用一般的linux远程控制工具即可，如Putty，SecureCRT，这里我用的是SecureCRT 6.7.3，这个版本能直接用刚才生成的key pair登录，SecureCRT的设置很简单，主要就是要载入key pair文件:</p>\n<p> <img src=\"http://hi.csdn.net/attachment/201202/14/0_1329204946PRWr.gif\" alt=\"\" /></p>\n<p>点击Properties：</p>\n<p> <img src=\"http://hi.csdn.net/attachment/201202/14/0_1329204965rXcO.gif\" alt=\"\" /></p>\n<p>载入下载过的pem文件即可</p>\n<p> 完成后即可远程登录到EC2 Instance</p>\n<p>第四步：安装和配置apache</p>\n<p>1）安装apache: sudo yum install httpd</p>\n<p>2）配置proxy: sudoedit /etc/httpd/conf/httpd.conf</p>\n<p><IfModule mod_proxy.c><br /> ProxyRequests On<br /><Proxy *><br />    Order deny,allow<br />    Allow from all<br /></Proxy><br />ProxyPass / <a rel=\"nofollow\" target=\"_blank\" href=\"http://cutesource.appspot.com/\">http://cutesource.appspot.com/</a><br />ProxyPassReverse / <a rel=\"nofollow\" target=\"_blank\" href=\"http://cutesource.appspot.com/\">http://cutesource.appspot.com/</a><br /> ProxyVia On<br /></IfModule></p>\n<p>这里是最简单的proxy设置，主要就是把所有的请求代理到GAE(<a rel=\"nofollow\" target=\"_blank\" href=\"http://cutesource.appspot.com/\">http://cutesource.appspot.com/</a>)</p>\n<p>3）启动appche: sudo /etc/init.d/httpd start </p>\n<p>第五步：分配<a rel=\"nofollow\" target=\"_blank\" href=\"https://console.aws.amazon.com/ec2/home?region=us-east-1#s=Addresses\">Elastic IPs</a></p>\n<p>刚才我们创建的instance会自动生成一个public dns，这也是我们刚才远程访问的地址，但这个地址会在重启后自动更改，这类似于我们家里宽带的动态ip。因此我们需要一个固定ip和域名。在Elastic IPs一栏里可以创建并绑定到instance，这样我们就可以有固定域名了，本例子就是<a rel=\"nofollow\" target=\"_blank\" href=\"http://ec2-23-21-223-133.compute-1.amazonaws.com/\">http://ec2-23-21-223-133.compute-1.amazonaws.com/</a></p>\n<p>不过对于Elastic IPs要格外小心，它很容易产生费用，查看<a rel=\"nofollow\" target=\"_blank\" href=\"http://aws.amazon.com/ec2/pricing/\">http://aws.amazon.com/ec2/pricing/</a>，我们会发现：</p>\n<p> <img src=\"http://hi.csdn.net/attachment/201202/14/0_1329204988ctVF.gif\" alt=\"\" /></p>\n<p><img src=\"http://hi.csdn.net/attachment/201202/14/0_1329205002I25X.gif\" alt=\"\" /> </p>\n<p>如果你生成了Elastic IP，就不能让instance stop，不然会产生$0.01/h的费用，我就是因为停机而扣了一点点费用</p>\n<p> 到此，算是成功体验了一把EC2，已能通过<a rel=\"nofollow\" target=\"_blank\" href=\"http://ec2-23-21-223-133.compute-1.amazonaws.com/\">http://ec2-23-21-223-133.compute-1.amazonaws.com/</a>访问之前遗忘的GAE应用</p>\n<p></p>\n<p></p>\n<p></p>\n<div> 作者：cutesource 发表于2012-2-14 15:13:44 <a rel=\"nofollow\" target=\"_blank\" href=\"http://blog.csdn.net/cutesource/article/details/7258291\">原文链接</a></div>\n<div> 阅读：1535 评论：2 <a rel=\"nofollow\" target=\"_blank\" href=\"http://blog.csdn.net/cutesource/article/details/7258291#comments\">查看评论</a></div>\n</div>\n<div>请点击<a rel=\"nofollow\" target=\"_blank\" href=\" https://mycdt0.info\"> https://mycdt0.info</a>，穿墙访问《中国数字时代》（当看到“此网站的安全证书有问题”的提示时，请选择“继续浏览此网站(不推荐)”，忽略证书警告并继续访问网站）。《中国数字时代》开通IPv6，欢迎穿墙阅读。翻越防火长城，你可以到达世界上的每一个角落。（Across the Great Firewall, you can reach every corner in the world.）翻墙利器赛风3下载地址：<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima326\n\n\"> http://dld.bz/caonima326</p>\n<p></a>，<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima745\">http://dld.bz/caonima745</a><img width=\"1\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-5197091934296792024?l=www.chinagfw.org\" alt=\"\" /></div>\n</p>\n<p><img src=\"http://chinadigitaltimes.net/chinese/files/2012/07/595edf749205129SZ0Y.gif-150x114.gif\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<p><iframe src=\"https://docs.google.com/spreadsheet/embeddedform?hl=zh-CN&#038;formkey=dGRpN3FrVThuMFFsZHBZcmNGLW94dEE6MQ\" width=\"510\" height=\"328\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading&#8230;</iframe></p>\n<form method=\"POST\" action=\"http://chinadigitaltimes.us4.list-manage.com/subscribe/post?u=17daa75df533f6c6ff72e51ab&#038;id=b4fd4ae247\">\n定期获得翻墙信息？<a href=\"http://eepurl.com/mstlf\">请电邮订阅数字时代</a><br />\n <br /><input type=\"email\" value=\"\" name=\"EMAIL\" id=\"mce-EMAIL_in_post\" size=\"25\" style=\"display:block;\" placeholder=\"请输入您的邮件地址\" required><br />\n\t<input type=\"submit\" value=\"点击订阅\" name=\"subscribe\" style=\"height: 20px;\" id=\"in_post_subscribe\"><br />\n</form>\n","author":1005,"categories":[18269,15300],"tags":[7775,5908,8795]}