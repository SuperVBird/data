{"id":535522,"link":"https://chinadigitaltimes.net/chinese/2016/07/gfw-blog｜使用-youtube-dl-离线下载-youtube-视频并且-vps-上在线观看/","date":"2016-07-18T22:16:34Z","modified":"2016-07-18T22:16:34Z","title":"GFW Blog｜使用 Youtube-DL 离线下载 YouTube 视频并且 VPS 上在线观看","content":"<div><a href=\"https://3.bp.blogspot.com/-s07y__brdzc/V4z4FcLXIcI/AAAAAAAADEk/KDijeHOwybIGHe1QnKuot-ErhUcHmIN5wCLcB/s1600/%25E6%258D%2595%25E8%258E%25B7.PNG\"><img src=\"https://3.bp.blogspot.com/-s07y__brdzc/V4z4FcLXIcI/AAAAAAAADEk/KDijeHOwybIGHe1QnKuot-ErhUcHmIN5wCLcB/s640/%25E6%258D%2595%25E8%258E%25B7.PNG\" width=\"640\" height=\"392\" border=\"0\" /></a></div>\n<p>&nbsp;</p>\n<div>在一些特殊的条件需求下，一些人可能需要vps离线下载视频，或者在不科学上网的情况下在线观看。</div>\n<div>有人给我推荐了Youtube-dl，的确很强大，这篇文章只是简单介绍一下Youtube-dl的基础功能和如何在自己的VPS上面在线观看。</div>\n<div></div>\n<p><a name=\"more\"></a></p>\n<div>来源：<a href=\"http://www.dou-bi.com/dbrj-1/\">http://www.dou-bi.com/dbrj-1/</a></div>\n<div>这里还有一些视频介绍：<a href=\"https://www.youtube.com/results?search_query=Youtube-DL\">https://www.youtube.com/results?search_query=Youtube-DL</a></div>\n<div></div>\n<div>如果你只是想要简单的下载youtube视频到本地，请看这个：<a title=\"\" href=\"http://www.dou-bi.com/youtube-jc1/\" target=\"_blank\" data-original-title=\"教你如何从YouTube上下载视频\">教你如何从YouTube上下载视频</a></div>\n<h2>安装步骤</h2>\n<div>安装很简单，Youtube-dl支持Windows，Linux，OS X，etc等系统，这次主要介绍Linux系统。</div>\n<pre>以下代码不一定是最新的，最新的请去 <a title=\"\" href=\"http://rg3.github.io/youtube-dl/download.html\" target=\"_blank\" data-original-title=\"\">官方下载中心</a> 查看。</pre>\n<h3>Linux系统安装：</h3>\n<div>以下三种下载安装方式选择一个就行了。</div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>sudo curl -L https://yt-dl.org/downloads/2016.07.13/youtube-dl -o /usr/local/bin/youtube-dl</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<ul>\n<li>sudo chmod a+rx /usr/local/bin/youtube-dl</li>\n</ul>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div>如果你的vps没有安装 curl ，可以使用 wget 来下载。</div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>sudo wget https://yt-dl.org/downloads/2016.07.13/youtube-dl -O /usr/local/bin/youtube-dl</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<ul>\n<li>sudo chmod a+rx /usr/local/bin/youtube-dl</li>\n</ul>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div>当然你也可以用pip来安装，如果你没有pip就先安装pip，<code> apt-get install python-pip -y</code></div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>sudo pip install &#8211;upgrade youtube_dl</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<h3>OS X系统安装：</h3>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>sudo wget https://yt-dl.org/downloads/2016.07.13/youtube-dl.sig -O youtube-dl.sig</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<ul>\n<li>gpg &#8211;verify youtube-dl.sig /usr/local/bin/youtube-dl</li>\n</ul>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<ul>\n<li>rm youtube-dl.sig</li>\n</ul>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<h3>Windows系统安装：</h3>\n<div>直接官方下载一个exe文件就行了。</div>\n<div><a title=\"\" href=\"https://yt-dl.org/downloads/2016.07.13/youtube-dl.exe\" target=\"_blank\" data-original-title=\"\">Windows exe</a></div>\n<div>但是，要运行这个程序还需要安装微软的运行库。</div>\n<div><a title=\"\" href=\"https://www.microsoft.com/en-US/download/details.aspx?id=5555\" target=\"_blank\" data-original-title=\"\">Microsoft Visual C++ 2010 Redistributable Package (x86)</a></div>\n<h2>基础功能介绍</h2>\n<div>Youtube-dl的官网是：<a title=\"\" href=\"http://rg3.github.io/youtube-dl/\" target=\"_blank\" data-original-title=\"\">http://rg3.github.io/youtube-dl/</a></div>\n<div>Github项目地址是：<a title=\"\" href=\"https://github.com/rg3/youtube-dl\" target=\"_blank\" data-original-title=\"\">https://github.com/rg3/youtube-dl</a></div>\n<div>在这里都能看到最新最全的youtube-dl信息。</div>\n<pre>Youtube-dl支持八百多家视频网站，具体列表可以看这里：http://rg3.github.io/youtube-dl/supportedsites.html ，优酷、爱奇艺等国内视频网站也是支持的。</pre>\n<h3>下载视频</h3>\n<pre>以下教程均以 这个youtube视频链接为例 <a title=\"\" href=\"https://www.youtube.com/watch?v=jK5coaM2X9g\" target=\"_blank\" data-original-title=\"\">https://www.youtube.com/watch?v=jK5coaM2X9g</a></pre>\n<div>最基础的下载视频的方法很简单，直接<code> youtube-dl URL</code></div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>youtube-dl https://www.youtube.com/watch?v=jK5coaM2X9g</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div>这样就会自动选择一个最好的视频格式和清晰度下载到 <strong>当前的文件夹</strong> 了。</div>\n<div>如果想把这个视频的所有格式都下载下来怎么办？</div>\n<h3>下载全部格式</h3>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>youtube-dl &#8211;all-formats https://www.youtube.com/watch?v=jK5coaM2X9g</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div><strong>–all-formats ：</strong>添加这个参数之后，所有存在的格式全部下载；</div>\n<div>但是你又不想全部下载，想挑选指定视频的格式和清晰度怎么办？</div>\n<h3>列出视频的所有格式/清晰度</h3>\n<div><strong>–list-formats/-F：</strong>这是一个列清单参数，执行后并不会下载视频，但能知道这个目标视频都有哪些格式存在，这样就可以有选择的下载啦！</div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>youtube-dl &#8211;list-formats https://www.youtube.com/watch?v=jK5coaM2X9g</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div>然后就会看到一大片的视频格式，如果你要下载其中一个，请看前面第一列的编号ID。</div>\n<div><img src=\"http://7xj8t4.com1.z0.glb.clouddn.com/dbrj-1-01.png?imageView2/1/w/2000/q/100%7Cwatermark/1/image/aHR0cDovLzd4ajh0NC5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9zaHVpeWluLnBuZw==/dissolve/70/gravity/SouthEast/dx/10/dy/200\" alt=\"\" width=\"722\" height=\"756\" data-original=\"http://7xj8t4.com1.z0.glb.clouddn.com/dbrj-1-01.png?imageView2/1/w/2000/q/100|watermark/1/image/aHR0cDovLzd4ajh0NC5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9zaHVpeWluLnBuZw==/dissolve/70/gravity/SouthEast/dx/10/dy/200\" /></div>\n<h3>下载指定格式视频</h3>\n<div><strong>-f + 编号：</strong>通过上一步获取到了所有视频格式的列表，第一列就是编号对应着不同的格式，例如我想下载22号那个mp4格式分辨率为1280*720的视频，则按下面的命令就可以轻松指定下载视频哦；</div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>youtube-dl -f 22 https://www.youtube.com/watch?v=jK5coaM2X9g</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div><img src=\"http://7xj8t4.com1.z0.glb.clouddn.com/dbrj-1-02.png?imageView2/1/w/2000/q/100%7Cwatermark/1/image/aHR0cDovLzd4ajh0NC5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9zaHVpeWluLnBuZw==/dissolve/70/gravity/SouthEast/dx/10/dy/10\" alt=\"\" width=\"869\" height=\"118\" data-original=\"http://7xj8t4.com1.z0.glb.clouddn.com/dbrj-1-02.png?imageView2/1/w/2000/q/100|watermark/1/image/aHR0cDovLzd4ajh0NC5jb20xLnowLmdsYi5jbG91ZGRuLmNvbS9zaHVpeWluLnBuZw==/dissolve/70/gravity/SouthEast/dx/10/dy/10\" /></div>\n<h3>离线下载/后台下载</h3>\n<div>我发现Toutube-dl不带有后台下载的功能，或者说我没找到命令，不过没事，可以试用 <strong>screen</strong> 来实现。</div>\n<div>首先如果你没有安装 <strong>screen </strong>的话请先安装。</div>\n<div>Debian/Ubuntu系统安装：</div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>apt-get update</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<ul>\n<li>apt-get install screen</li>\n</ul>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div>Centos系统安装：</div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>yum update</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<ul>\n<li>yum install screen</li>\n</ul>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div>然后用<code> -S </code>创建一个活动，这时候你就进入了这个活动中，你就可以去下载视频了，这时候即使关闭ssh也不会断开下载。</div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>screen -S video</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div>如果你不小心关闭ssh或者想要重新查看 video活动，可以用<code> -r </code>来重新进入这个活动</div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>screen -r video</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<h2>VPS中在线播放</h2>\n<div>这个其实很简单，HTML5本身就可以去播放指定格式的视频，所以我们<strong>只需要搭建一个nginx或者apache</strong>，把视频下载到<strong>默认虚拟主机的文件夹</strong>里，就可以在线观看了。</div>\n<div>示例：<a title=\"\" href=\"https://soft.dou-bi.com/?dir=video\" target=\"_blank\" data-original-title=\"\">逗比云</a> <a title=\"\" href=\"https://soft.dou-bi.com/video/%20%281080P%29%20___%202016-jK5coaM2X9g.mp4\" target=\"_blank\" data-original-title=\"\">在线播放</a></div>\n<pre>需要注意的是，HTML5支持在线播放的格式有限，<strong>建议下载 mp4 和 Webm 格式的</strong>，免得HTML5无法在线播放。</pre>\n<div>我们这里以apache为例，先安装apache。</div>\n<div>Debian/Ubuntu系统安装：</div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>apt-get install apache2 -y</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div>Centos系统安装：</div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>yum install httpd -y</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div>然后去<code> /var/www </code>目录下载视频。</div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>cd /var/www</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div>下载好了之后用<code> ls -a </code>查看当前目录下的文件，找到你的视频文件名称，<strong>比如：233.mp4</strong></div>\n<div>然后打开网页：<code> http://你的VPS_IP/233.mp4</code></div>\n<div>就可以在线观看了。</div>\n<div>当然这样看视频也会有一些不方便，不能方便的选视频。你可以试试我的逗比云的程序 ：<a title=\"\" href=\"http://www.dou-bi.com/dbrj-2/\" target=\"_blank\" data-original-title=\"自用的逗比云 目录列表程序 Directory Lister 兼容中文版\">自用的逗比云 目录列表程序 Directory Lister 兼容中文版</a></div>\n<div>可以列出虚拟主机目录下的文件列表。当然，我这个程序是php的，所以还需要安装php，如果你不会可以直接去<a title=\"\" href=\"http://lnmp.rog/\" target=\"_blank\" data-original-title=\"\">lnmp.rog</a> 安装lnmp一键包，因为不需要用到数据库，所以你可以<code> lnmp mysql stop </code>把Mysql数据库关掉。</div>\n<div>当然你也可以直接使用<strong> apache/nginx</strong> 自带的列表功能，开启方法很简单，<strong>只要删掉/var/www目录下的index.html文件</strong>，这时候访问你的<code> http://vps_IP/ </code>就可以看到一个简陋的列表了。</div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>rm -rf /var/www/index.html</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div><strong>如果你安装的是nginx （通过apt-get install -y 、 yum install nginx -y 安装的才是）</strong>，那默认的虚拟主机文件夹是<strong> /usr/share/nginx/www </strong></div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>rm -rf /usr/share/nginx/www/index.html</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div><strong>如果你安装的是上面我说的 <a title=\"\" href=\"http://lnmp.rog/\" target=\"_blank\" data-original-title=\"\">lnmp.rog</a> 中的lnmp一键包</strong>，那默认虚拟主机文件夹就是<strong> /home/wwwroot/default</strong></div>\n<p>&nbsp;</p>\n<ol>\n<ol>\n<li>rm -rf /home/wwwroot/default/index.html</li>\n</ol>\n</ol>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<div>就暂时先介绍这么多，稍后慢慢补充。</div>\n<div>翻墙技术博客<a href=\"http://www.chinagfw.org/2013/09/blog-post.html\">订阅地址及社交帐号</a></div>\n<p>请在<a href=\"https://getlantern.org\">这里</a>下载最新版Lantern 2.0，翻墙快速易用小巧安全。</p>\n","author":1005,"categories":[18270,18269,10466,15300],"tags":[7775,8510,3764,12723,8795]}