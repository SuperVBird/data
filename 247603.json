{"id":247603,"link":"https://chinadigitaltimes.net/chinese/2012/08/翻墙-使用ssh实现iphone自动代理/","date":"2012-08-17T16:15:38Z","modified":"2012-08-17T16:15:38Z","title":"翻墙 | 使用SSH实现iPhone自动代理","content":"<p><p>对于绝大部分国内网站，正常上网，对于twitter等，自动走SSH代理，无需手工切换，这即是所谓的&#8221;<strong>自动翻墙</strong>&#8220;，好处就是不影响国内网站的访问速度，不用来回切换网络。</p>\n<p>  <a rel=\"nofollow\" target=\"_blank\" href=\"http://wangheng.org/tag/ios\" title=\"查看 IOS 中的全部文章\">IOS</a>中最方便的翻墙方式是使用VPN，速度尚可，但PPTP和L2TP是不能像OpenVPN一样定义路由的，打开VPN后，所有流量均走VPN线路，浏览国内网站很慢，需要来回切换。windows下可以用脚本定义静态路由，使用<a rel=\"nofollow\" target=\"_blank\" href=\"http://wangheng.org/go.php?http://wangheng.org/the-route-setup-script-realize-domestic-network-by-the-vpn.html\">Route设置脚本，实现国内网不经VPN</a>搞定，但<a rel=\"nofollow\" target=\"_blank\" href=\"http://wangheng.org/tag/ios\" title=\"查看 IOS 中的全部文章\">IOS</a>下在cydia找了半天也没找到iptable这个命令包，所以还是用<a rel=\"nofollow\" target=\"_blank\" href=\"http://wangheng.org/tag/ssh\" title=\"查看 ssh 中的全部文章\">ssh</a>吧。下面是具体使用方法：</p>\n<p><strong>1、越狱，并配置好ios的环境</strong></p>\n<p>如何越狱就不用我说了吧，随便一搜网上一大堆，越狱后如果你不知道如何<a rel=\"nofollow\" target=\"_blank\" href=\"http://wangheng.org/tag/ssh\" title=\"查看 ssh 中的全部文章\">ssh</a>连接到你的ios设备可以参考我以前的一篇文章：<a rel=\"nofollow\" target=\"_blank\" href=\"http://wangheng.org/go.php?http://wangheng.org/configure-gcc-on-ipad2.html\">为ipad2安装和配置gcc编译环境</a>，当然这里没必要安装gcc环境，所以进行到第二步就OK了。</p>\n<p><strong>2、安装一些必须的软件包</strong></p>\n<p>如果你确定第一步你已经没有问题了，我们下面要继续安装一些必须的软件包。ssh连接到你的<a rel=\"nofollow\" target=\"_blank\" href=\"http://wangheng.org/tag/iphone\" title=\"查看 iPhone 中的全部文章\">iPhone</a>或者iPad后执行下面的命令：</p>\n</p>\n<div>\n<table>\n<tbody>\n<tr>\n<td>\n<pre>  1  2  </pre>\n</td>\n<td>\n<pre><span>sudo</span> <span>-i</span>   <span>apt-get</span> <span>install</span> <span>screen</span></pre>\n</td>\n</tr>\n</tbody>\n</table></div>\n<p>然后你的ios设备上面将会安装好screen这个软件包，不知道screen是什么的同学可以参考<a rel=\"nofollow\" target=\"_blank\" href=\"http://wangheng.org/go.php?http://wangheng.org/html/linux.html#toc_0.1.1\">这里</a>。</p>\n<p>执行下面的命令：</p>\n<div>\n<table>\n<tbody>\n<tr>\n<td>\n<pre>1  2  3  </pre>\n</td>\n<td>\n<pre><span>screen</span> �S autossh <span>ssh</span> <span>-D</span> 1987 <span>[</span>用户名<span>]</span><span>@</span><span>[</span>ip地址<span>]</span>   <span>#如果你自定义了ssh的端口号，记得使用-p 加你的端口号，如下： </span>  <span>ssh</span> <span>-D</span> 1987 �p <span>[</span>端口号<span>]</span> <span>[</span>用户名<span>]</span><span>@</span><span>[</span>ip地址<span>]</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><strong>3、配置PAC，用来实现自动切换。</strong><br />可以使用我的pac文件，<a rel=\"nofollow\" target=\"_blank\" href=\"http://wangheng.org/tools/autossh.pac%E3%80%82\">http://wangheng.org/tools/autossh.pac。</a>在iPhone的设置->WIFI->HTTP代理->自动->URL 里把它填上就可以了。<br />  内容不多，如下：</p>\n<div>\n<table>\n<tbody>\n<tr>\n<td>\n<pre>1  2  3  4  5  6  7  8  9  10  11  12  13  14  15  16  17  18  19  </pre>\n</td>\n<td>\n<pre><span>function</span> FindProxyForURL<span>(</span>url,host<span>)</span>  <span></span>  url = url.toLowerCase<span>(</span><span>)</span>;  <span>if</span><span>(</span>  shExpMatch<span>(</span>url, \"<span>*</span><a rel=\"nofollow\" target=\"_blank\" href=\"http://facebook.com\">facebook.com</a><span>*</span>\"<span>)</span> <span></span>  <span>return</span> \"DIRECT\";  <span>}</span>  <span>return</span> \"DIRECT\";  <span>}</span></pre>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>好了，大功告成，享受你的无国界自由网络吧~</p>\n<p>  原文：<a rel=\"nofollow\" target=\"_blank\" href=\"http://wangheng.org/using-ssh-for-the-iphone-automatic-proxy.html\">http://wangheng.org/using-ssh-for-the-iphone-automatic-proxy.html</a></p>\n<div>请点击<a rel=\"nofollow\" target=\"_blank\" href=\" https://mycdt0.info\"> https://mycdt0.info</a>，穿墙访问《中国数字时代》（当看到“此网站的安全证书有问题”的提示时，请选择“继续浏览此网站(不推荐)”，忽略证书警告并继续访问网站）。《中国数字时代》开通IPv6，欢迎穿墙阅读。翻越防火长城，你可以到达世界上的每一个角落。（Across the Great Firewall, you can reach every corner in the world.）翻墙利器赛风3下载地址：<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima326\n\n\"> http://dld.bz/caonima326</p>\n<p></a>，<a rel=\"nofollow\" target=\"_blank\" href=\"http://dld.bz/caonima745\">http://dld.bz/caonima745</a><img width=\"1\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-9065634176613315699?l=www.chinagfw.org\" alt=\"\" /></div>\n</p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<p><iframe src=\"https://docs.google.com/spreadsheet/embeddedform?hl=zh-CN&#038;formkey=dGRpN3FrVThuMFFsZHBZcmNGLW94dEE6MQ\" width=\"510\" height=\"328\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading&#8230;</iframe></p>\n<form method=\"POST\" action=\"http://chinadigitaltimes.us4.list-manage.com/subscribe/post?u=17daa75df533f6c6ff72e51ab&#038;id=b4fd4ae247\">\n定期获得翻墙信息？<a href=\"http://eepurl.com/mstlf\">请电邮订阅数字时代</a><br />\n <br /><input type=\"email\" value=\"\" name=\"EMAIL\" id=\"mce-EMAIL_in_post\" size=\"25\" style=\"display:block;\" placeholder=\"请输入您的邮件地址\" required><br />\n\t<input type=\"submit\" value=\"点击订阅\" name=\"subscribe\" style=\"height: 20px;\" id=\"in_post_subscribe\"><br />\n</form>\n","author":1005,"categories":[18269,15300],"tags":[7775,8795]}