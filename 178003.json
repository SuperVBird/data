{"id":178003,"link":"https://chinadigitaltimes.net/chinese/2011/09/翻墙-centos-5-5-安装vpn-详解教程（图解）/","date":"2011-09-08T09:30:47Z","modified":"2011-09-08T09:30:47Z","title":"翻墙 | centos 5.5 安装vpn 详解教程（图解）","content":"<p>来源：<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.lanfox.com/20110904258.html\">http://www.lanfox.com/20110904258.html</a></p>\n<div>\n<div>\n<div>\n<div>\n<p>上一篇文章也说了，这些天自己捣鼓了几个vps，通过vps学到了好多linux的知识，</p>\n<p>现在好多人要通过vps来实现翻墙，就是做vpn，通过自己的vps服务器来达到访问被咱可恶的gfw拦截过的ip，</p>\n<p>下面教程开始：</p>\n<p>一、首先检查你VPS的PPP和TUN有没有启用：</p>\n<p><span><strong>cat /dev/ppp</strong></span><br /> <span><strong>cat /dev/net/tun</strong></span></p>\n<p><span>　显示结果为：<span>cat: /dev/ppp: No such device or address</span>和cat: /dev/net/tun: File descriptor in bad state，表明通过，上述两条只要有一个没通过都不行。如果没有启用，你可以给VPS提供商Submit 一个 Ticket请求开通：</span></p>\n<p><span><strong>Hello</strong></span></p>\n<p>Could you enabled TUN-TAP for me? I want run pptp-vpn on my VPS.<br /> Thank you.</p>\n<p><span>　确认PPP和TUN启用后，开始安装ppp和iptables：</span></p>\n<p><span><strong>yum install -y ppp iptables</strong></span></p>\n<p><a rel=\"nofollow\" target=\"_blank\" href=\"http://www.lanfox.com/wp-content/uploads/2011/09/1.png\"><img alt=\"\" height=\"148\" src=\"http://www.lanfox.com/wp-content/uploads/2011/09/1.png\" title=\"1\" width=\"599\" /></a></p>\n<p>二、安装pptp：</p>\n<p><span><strong>rpm -ivh <a rel=\"nofollow\" target=\"_blank\" href=\"http://acelnmp.googlecode.com/files/pptpd-1.3.4-1.rhel5.1.i386.rpm\">http://acelnmp.googlecode.com/files/pptpd-1.3.4-1.rhel5.1.i386.rpm</a>（32位系统） </strong></span></p>\n<p><span><strong>rpm -ivh <a rel=\"nofollow\" target=\"_blank\" href=\"http://acelnmp.googlecode.com/files/pptpd-1.3.4-1.rhel5.1.x86_64.rpm\">http://acelnmp.googlecode.com/files/pptpd-1.3.4-1.rhel5.1.x86_64.rpm</a>（64位系统）</strong></span></p>\n<p>三、配置pptp，编辑/etc/pptpd.conf文件：</p>\n<p><span><strong>vim /etc/pptpd.conf</strong></span></p>\n<p><strong></strong><a rel=\"nofollow\" target=\"_blank\" href=\"http://www.lanfox.com/wp-content/uploads/2011/09/2.png\"><img alt=\"\" height=\"140\" src=\"http://www.lanfox.com/wp-content/uploads/2011/09/2.png\" title=\"2\" width=\"403\" /></a></p>\n<p>把下面字段前面的#去掉：<br /> localip 192.168.0.1<br /> remoteip 192.168.0.234-238,192.168.0.245</p>\n<p><a rel=\"nofollow\" target=\"_blank\" href=\"http://www.lanfox.com/wp-content/uploads/2011/09/3.png\"><img alt=\"\" height=\"152\" src=\"http://www.lanfox.com/wp-content/uploads/2011/09/3.png\" title=\"3\" width=\"533\" /></a></p>\n<p>四、编辑/etc/ppp/options.pptpd 文件：</p>\n<p><strong><span>vim /etc/ppp/options.pptpd</span></strong></p>\n<p><strong></strong>去掉ms-dns前面的#，并使用Google的DNS服务器，修改成如下字段：</p>\n<p>ms-dns 8.8.8.8</p>\n<p>ms-dns 8.8.4.4</p>\n<p><a rel=\"nofollow\" target=\"_blank\" href=\"http://www.lanfox.com/wp-content/uploads/2011/09/4.png\"><img alt=\"\" height=\"170\" src=\"http://www.lanfox.com/wp-content/uploads/2011/09/4.png\" title=\"4\" width=\"494\" /></a></p>\n<p>五、设置VPN账号密码，编辑/etc/ppp/chap-secrets这个文件：</p>\n<p><strong><span>vim /etc/ppp/chap-secrets</span></strong></p>\n<p><strong></strong><a rel=\"nofollow\" target=\"_blank\" href=\"http://www.lanfox.com/wp-content/uploads/2011/09/5.png\"><img alt=\"\" height=\"139\" src=\"http://www.lanfox.com/wp-content/uploads/2011/09/5.png\" title=\"5\" width=\"435\" /></a></p>\n<p>六、修改内核设置，使其支持转发，编辑 /etc/sysctl.conf 文件：</p>\n<p><strong><span>vim /etc/sysctl.conf</span></strong></p>\n<p><strong></strong>将“net.ipv4.ip_forward”的值改为1，同时在“net.ipv4.tcp_syncookies = 1”前面加#</p>\n<p><a rel=\"nofollow\" target=\"_blank\" href=\"http://www.lanfox.com/wp-content/uploads/2011/09/6.png\"><img alt=\"\" height=\"428\" src=\"http://www.lanfox.com/wp-content/uploads/2011/09/6.png\" title=\"6\" width=\"501\" /></a></p>\n<p>七、使sysctl.conf配置文件生效</p>\n<p><span><strong>sysctl -p</strong></span></p>\n<p><span>添加iptables转发规则：</span></p>\n<p><span><strong>iptables -t nat -A POSTROUTING -s <a rel=\"nofollow\" target=\"_blank\" href=\"http://192.168.0.0/24\">192.168.0.0/24</a> -j SNAT –to-source ***.***.***.*** (***.***.***.***为你VPS的公网IP地址)</strong></span></p>\n<p>保存iptables转发规则：</p>\n<p><strong><span>/etc/init.d/iptables save</span></strong></p>\n<p>重启iptables：</p>\n<p><span><span>/etc/init.d/iptab</span><span>les restart</span></span></p>\n<p>重启pptp服务：</p>\n<p><strong><span>/etc/init.d/pptpd restart</span></strong></p>\n<p>设置开机自动运行pptp服务：</p>\n<p><span><strong>chkconfig pptpd on</strong></span></p>\n<p>设置开机自动运行iptables服务：</p>\n<p><span>chkconfig iptables on</span></p>\n<p> </p>\n<p><a rel=\"nofollow\" target=\"_blank\" href=\"http://www.lanfox.com/wp-content/uploads/2011/09/7.png\"><img alt=\"\" height=\"334\" src=\"http://www.lanfox.com/wp-content/uploads/2011/09/7.png\" title=\"7\" width=\"600\" /></a></p>\n<p>至此，Linux VPS架设VPN完成，如果连接出现错误619则输入如下命令解决：</p>\n<p><span><strong>rm /dev/ppp</strong></span></p>\n<p><span><strong> mknod /dev/ppp c 108 0</strong></span></p>\n<p>如果出现错误734则修改/etc/ppp/options.pptpd文件，在require-mppe-128字段前面加#然后windows客户端连接按下图设置即可。</p>\n</p></div>\n</div>\n</div>\n</div>\n<h4>—————————————————————————————————————————</h4>\n<h4>需要翻墙利器? 请<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.chinagfw.org/2011/04/wuala_18.html?utm_source=feedburner&#038;utm_medium=feed&#038;utm_campaign=Feed%3A+chinagfwblog+%28GFW+Blog%EF%BC%88%E5%8A%9F%E5%A4%AB%E7%BD%91%E4%B8%8E%E7%BF%BB%E5%A2%99%EF%BC%89%29\">安装Wuala</a>，查找和添加gfwblog为好友，就可高速下载翻墙软件，或访问<a rel=\"nofollow\" target=\"_blank\" href=\"http://tinyurl.com/gfwblog\"><b>http://tinyurl.com/gfwblog</b></a>直接下载。</p>\n<p>推特用户请点击<a rel=\"nofollow\" target=\"_blank\" href=\"http://qinzhigang.in/login.php\">这里</a>免翻墙上推特</h4>\n<p>请点击<a rel=\"nofollow\" target=\"_blank\" href=\"https://sesawe.net/-Tools-zh-.html\">这里</a>下载翻墙软件 </p>\n<p>更多翻墙方法请发电邮(最好用Gmail)到：<a rel=\"nofollow\" target=\"_blank\" href=\"mailto:fanqiang70ma@gmail.com\">fanqiang70ma@gmail.com</a>  </p>\n<p>请阅读和关注<a rel=\"nofollow\" target=\"_blank\" href=\"https://www.google.com/profiles/112915952962578336480\">中国数字时代</a>、<small>翻墙技术博客<a rel=\"nofollow\" target=\"_blank\" href=\"https://www.google.com/profiles/chinagfwblog\">GFW BLOG</a>（免翻墙） <br /> </small></p>\n<p>请使用<a rel=\"nofollow\" target=\"_blank\" href=\"https://www.google.com/reader/view/\">Google Reader</a><a rel=\"nofollow\" target=\"_blank\" href=\"https://www.google.com/reader/view/feed/http://chinadigitaltimes.net/chinese/feed\">订阅中国数字时代中文版</a>（<a rel=\"nofollow\" target=\"_blank\" href=\"http://chinadigitaltimes.net/chinese/feed\">http://chinadigitaltimes.net/chinese/feed</a>），阅读最有价值的中文信息；以及<a rel=\"nofollow\" target=\"_blank\" href=\"https://www.google.com/reader/view/feed/http://feeds2.feedburner.com/chinagfwblog\">GFW BLOG（功夫网与翻墙）</a><a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds2.feedburner.com/chinagfwblog\">http://feeds2.feedburner.com/chinagfwblog</a>，获取最新翻墙工具和翻墙技巧信息。</p>\n<p> </p>\n<div>推特用户请点击<a rel=\"nofollow\" target=\"_blank\" href=\"http://edu20.in/login.php\">这里</a>免翻墙上推特<br />\n点击<a rel=\"nofollow\" target=\"_blank\" href=\"http://fanqiangsesawe.info\">这里</a>下载翻墙软件<br />\n更多翻墙方法请发电邮(最好用Gmail)到:gongminshehui1@gmail.com<br />\n翻墙技术博客<a rel=\"nofollow\" target=\"_blank\" href=\"https://www.google.com/profiles/chinagfwblog\">GFW BLOG</a>（免翻墙）<br />\n阅读<a rel=\"nofollow\" target=\"_blank\" href=\"http://www.google.com/profiles/112915952962578336480\">中国数字时代</a>（免翻墙）<img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-8479652292499001121?l=www.chinagfw.org\" width=\"1\" /></div>\n<div>\n<a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=zayt4_cxz3o:Qeps4VsIt6c:yIl2AUoC8zA\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=yIl2AUoC8zA\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=zayt4_cxz3o:Qeps4VsIt6c:-BTjWOF_DHI\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=zayt4_cxz3o:Qeps4VsIt6c:-BTjWOF_DHI\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=zayt4_cxz3o:Qeps4VsIt6c:F7zBnMyn0Lo\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=zayt4_cxz3o:Qeps4VsIt6c:F7zBnMyn0Lo\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=zayt4_cxz3o:Qeps4VsIt6c:V_sGLiPBpWU\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=zayt4_cxz3o:Qeps4VsIt6c:V_sGLiPBpWU\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=zayt4_cxz3o:Qeps4VsIt6c:qj6IDK7rITs\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=qj6IDK7rITs\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=zayt4_cxz3o:Qeps4VsIt6c:l6gmwiTKsz0\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=l6gmwiTKsz0\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=zayt4_cxz3o:Qeps4VsIt6c:gIN9vFwOqvQ\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=zayt4_cxz3o:Qeps4VsIt6c:gIN9vFwOqvQ\" /></a> <a rel=\"nofollow\" target=\"_blank\" href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=zayt4_cxz3o:Qeps4VsIt6c:TzevzKxY174\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=TzevzKxY174\" /></a>\n</div>\n<p><img height=\"1\" src=\"http://feeds.feedburner.com/~r/chinagfwblog/~4/zayt4_cxz3o\" width=\"1\" /></p>\n<p><img src=\"http://chinadigitaltimes.net/chinese/files/2011/09/0d9a14651.png-150x148.png\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=738338\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"738338\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n<input type=\"submit\" value=\"订阅!\"><br />\n</form>\n","author":983,"categories":[15300],"tags":[8510,8795]}