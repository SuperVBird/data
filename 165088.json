{"id":165088,"link":"https://chinadigitaltimes.net/chinese/2011/07/自建加密翻墙代理服务器-knproxy教程说明/","date":"2011-07-03T09:00:29Z","modified":"2011-07-03T09:00:29Z","title":"自建加密翻墙代理服务器 KnProxy教程说明","content":"<p>来源：<a href=\"http://allinfa.com/knproxy-web-proxy.html\">http://allinfa.com/knproxy-web-proxy.html</a></p>\n<p>最近几年随着Web<span><a href=\"http://allinfa.com/tag/proxy/\" rel=\"nofollow\" title=\"代理\">代理</a></span>大头PHProxy系列停止了研发，Web代理软件出现了比较大的空档。目前市面上的诸多代理网站都在使用非开源的Glype或者旧版本的PHProxy等。<span><a href=\"http://allinfa.com/apjp-proxy.html\" rel=\"nofollow\" title=\"翻墙APJP：基于PHP和JAVA的代理构建最新版教程\">apjp</a></span>和 phpsocks5 最近升级了好几个版本，也越来越好用。KnProxy，一个适用于免费 Web空间的低压力代理服务器，一直在不断更新，最近作者又更新了效果不错的新版，经<span><a href=\"http://allinfa.com/\" rel=\"nofollow\" title=\"美博园\">美博园</a></span>测试，显然改�很大，可以访问绝大多数被墙网站，可以登陆facebook，但youtube视频没法播放，也不能登陆twitter。在此，美博园推荐大家多多建立自己的翻墙服务器，让GFW防不胜防。 </p>\n<p><span><strong>一 KnProxy简介：</strong></span></p>\n<p>KnProxy是一个基于PHP的网页代理系统。它应用了PHP内置的cURL模块进行HTTP请求。在使用最有限的服务器资源的前提 下，KnProxy会尽量大的实现高效。KnProxy设计用于简单的日常代理，并不将信息（如广告、JS、CSS）注入特定页面/位置。对于页面的改动 会尽可能控制在仅仅改变页面的链接使其继续被KnProxy代理。当然URL会被加密来避免不和谐的第三方试图追踪访问纪录或是对特定关键字进行筛查什么 的。KnProxy可以用于那些网络并不完全开放的位置，比如：单位、学校、中国<span><a href=\"http://allinfa.com/tag/gfw/\" rel=\"nofollow\" title=\"GFW\">GFW</a></span>的封锁。<br /><strong><br /> <span>KnProxy的几点优势：</span></strong> </p>\n<p>1.  采用PHP内置的cURL模块：传统Web代理系统多数使用SOCKET或者file函数来获取远程文件，但是许多免费Web空间禁止了这些函数的远程访 问或者完全禁用了SOCKET之类底层操作。KnProxy使用了PHP自带的cURL模块，针对性的解决了这个问题。<br /> 2. 模块封装：传统代理脚本采取的都是单文件或者为了避免代码抄袭，无规则分块（Glype）。KnProxy则有别于这些代理服务把内部模块拆成了如若干功能：<br /> module_parser : 用于将现在的WEB页面解析/分析并把链接改掉<br /> module_url : 用于将相对地址处理成绝对地址（进行简单的URL加和）<br /> module_http : 用于发送HTTP请求<br /> module_encoder : 用于实现地址加密<br /> 用户可以根据自己的需求来更改或者重新编写各个模块，而无需将整个脚本阅读明白。我们可以通过替换 module_http 来在不支持cURL的空间上，使用file_get_contents等命令获取文件。这样大大降低了修正的难度。<br /> 3. 无需配置：直接上传就能用<br /> 4. 无识别性特征：网站无法判断访问请求来自代理<br /> 5. 调试模式：如果访问失败，用户可以在地址中加入 debug=true的 GET请求，这样就能获取一个HTTP对象的dump来分析错误产生的部位<br /> 6. 不设繁琐复杂的检查机制：KnProxy是轻量级的代理，没有设置用户验证和滚动地址等模块，减轻服务器负担同时加快请求。<br /> 7. 可以在很多<span><a href=\"http://allinfa.com/tag/free-hosting/\" rel=\"nofollow\" title=\"免费空间\">免费空间</a></span>自建代理。让GFW去死吧！</p>\n<p><span><strong>二 项目主页及下载：</strong></span></p>\n<p>工程地址：<a href=\"http://sourceforge.net/projects/knproxy\">http://sourceforge.net/projects/knproxy</a><br /> Freshmeat下的该工程：<a href=\"http://freshmeat.net/projects/knproxy\">http://freshmeat.net/projects/knproxy</a><br /> OSChina下的这个工程：<a href=\"http://www.oschina.net/p/knproxy\">http://www.oschina.net/p/knproxy</a></p>\n<p><span><strong>最新版本下载：</strong></span><br /> 2011年6月22日更新  <a href=\"http://sourceforge.net/projects/knproxy/files/knproxy%20theta%20%28aka%20v4%29/knproxy_theta_v4_19.zip/download\"> knproxy theta v4.19</a></p>\n<p>V4.19更新：<br /> -解决了一些在PHP使用严格模式下，显示WARNING导致 HEADER无法发送、文件下载坏掉的问题。<br /> -允许在conf.php设置一个加密SALT，来让服务器有自己独特的地址加密，防止侦破<br /> -根据设置，在传输 text/* 的类型时，自动采取GZIP压缩模式，节约带宽<br /> -检测页面编码，如果不是UTF-8转成UTF-8再加密页面</p>\n<p>别着急，最精彩的内容在下面<br /><strong><br /> <span>三 自建 KnProxy 服务器教程：</span></strong> </p>\n<p>要自己建立一个KnProxy代理服务器十分简单，因为KnProxy的轻量级，不需要设置，在很多的免费空间上都可以使用。简单来说，就是只要上传KnProxy到主机空间上，马上就可以使用，就这么简单。</p>\n<p>1. 寻找有效的WEB空间及要求</p>\n<p>这一步是关系到代理是否能成功的最终要因素，能成功搭建KnProxy，服务器需要下面的几个必要条件：<br /> a) 是PHP服务器（支持动态的）。<br /> b) 应该支持PHP自带的cURL模块。<br /> 你要是不确定的话，可以尝试将</p>\n<p> 写到一个脚本里，看看运行后结果如何。如果是 cURL Installed 则表示有cURL的支持能力。 <br /> c) 应该允许访问外网。光有cURL，要是服务器不允许你的脚本进行联网也是不行的。你也可以尝试用KnProxy随便访问一个有效地址，选中“直接进入调试模式”。如果看到返回信息都是空的，而网站你能访问，那么估计就是服务器禁止访问外网。<br /> d) 服务器在墙外。这个不用说了，必须的啊~</p>\n<p>2. 架设代理服务器<br /> 实在是超级简单，把下载到的KnProxy上传，不需要任何设置</p>\n<p>3. 自己的代理网址<br /> 不管是自己的域名或者是免费空间的二级域名，都可以，只要将KnProxy上传后就可以用自己的域名访问代理网站了。<br /> 比如，域名是： <a href=\"http://abcd.com\">abcd.com</a> ，上传的目录是KnProxy<br /> 那么，在<span><a href=\"http://allinfa.com/tag/browser/\" rel=\"nofollow\" title=\"浏览器\">浏览器</a></span>输入地址就OK了，怎么输入 <a href=\"http://abcd.com/KnProxy\">abcd.com/KnProxy</a></p>\n<p><span><strong>四 常见问题与解决</strong></span></p>\n<p>a)大白页（什么都没有）：用浏览器查看页面源代码，如果返回 进行调试。<br /> b)只有试图代理时才大白页，墙内网站也无法代理：可能是您的服务器不支持cURL，你可以尝试 debug 一下（调试模式）。如果空白的话，估计服务器不支持cURL的。<br /> c)代理访问墙内网站没事，墙外则白页或连接被重置：可以试试页面加密。<br /> d)出现PHP的WARNING或/ERROR：可以根据内容自己尝试调试，或者检察是否上传完整</p>\n<p></p>\n<h4>—————————————————————————————————————————</h4>\n<h4>需要翻墙利器? 请<a href=\"http://www.chinagfw.org/2011/04/wuala_18.html?utm_source=feedburner&#038;utm_medium=feed&#038;utm_campaign=Feed%3A+chinagfwblog+%28GFW+Blog%EF%BC%88%E5%8A%9F%E5%A4%AB%E7%BD%91%E4%B8%8E%E7%BF%BB%E5%A2%99%EF%BC%89%29\">安装Wuala</a>，查找和添加gfwblog为好友，就可高速下载翻墙软件，或访问<a href=\"http://tinyurl.com/gfwblog\"><b>http://tinyurl.com/gfwblog</b></a>直接下载。</p>\n<p>推特用户请点击<a href=\"http://qinzhigang.in/login.php\">这里</a>免翻墙上推特</h4>\n<p>请点击<a href=\"https://sesawe.net/-Tools-zh-.html\">这里</a>下载翻墙软件 </p>\n<p>更多翻墙方法请发电邮(最好用Gmail)到：<a href=\"mailto:fanqiang70ma@gmail.com\">fanqiang70ma@gmail.com</a>  </p>\n<p>请阅读和关注<a href=\"https://www.google.com/profiles/112915952962578336480\">中国数字时代</a>、翻墙技术博客<a href=\"https://www.google.com/profiles/chinagfwblog\">GFW BLOG</a>（免翻墙）  </p>\n<p>请使用<a href=\"https://www.google.com/reader/view/\">Google Reader</a><a href=\"https://www.google.com/reader/view/feed/http://chinadigitaltimes.net/chinese/feed\">订阅中国数字时代中文版</a>（<a href=\"http://chinadigitaltimes.net/chinese/feed\">http://chinadigitaltimes.net/chinese/feed</a>），阅读最有价值的中文信息；以及<a href=\"https://www.google.com/reader/view/feed/http://feeds2.feedburner.com/chinagfwblog\">GFW BLOG（功夫网与翻墙）</a><a href=\"http://feeds2.feedburner.com/chinagfwblog\">http://feeds2.feedburner.com/chinagfwblog</a>，获取最新翻墙工具和翻墙技巧信息。</p>\n<p>  </p>\n<div>推特用户请点击<a href=\"http://edu20.in/login.php\">这里</a>免翻墙上推特<wbr><br />\n点击<a href=\"http://fanqiangsesawe.info\">这里</a>下载翻墙软件<br />\n更多翻墙方法请发电邮(最好用Gmail)到:gongminshehui1@gmail.com<br />\n翻墙技术博客<a href=\"https://www.google.com/profiles/chinagfwblog\">GFW BLOG</a>（免翻墙）<br />\n阅读<a href=\"http://www.google.com/profiles/112915952962578336480\">中国数字时代</a>（免翻墙）<img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/5500297126185736776-8506883455089459672?l=www.chinagfw.org\" width=\"1\" /></div>\n<div>\n<a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=uQCcVLu0a2w:E9eZoYupFig:yIl2AUoC8zA\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=yIl2AUoC8zA\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=uQCcVLu0a2w:E9eZoYupFig:-BTjWOF_DHI\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=uQCcVLu0a2w:E9eZoYupFig:-BTjWOF_DHI\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=uQCcVLu0a2w:E9eZoYupFig:F7zBnMyn0Lo\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=uQCcVLu0a2w:E9eZoYupFig:F7zBnMyn0Lo\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=uQCcVLu0a2w:E9eZoYupFig:V_sGLiPBpWU\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=uQCcVLu0a2w:E9eZoYupFig:V_sGLiPBpWU\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=uQCcVLu0a2w:E9eZoYupFig:qj6IDK7rITs\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=qj6IDK7rITs\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=uQCcVLu0a2w:E9eZoYupFig:l6gmwiTKsz0\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=l6gmwiTKsz0\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=uQCcVLu0a2w:E9eZoYupFig:gIN9vFwOqvQ\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?i=uQCcVLu0a2w:E9eZoYupFig:gIN9vFwOqvQ\" /></a> <a href=\"http://feeds.feedburner.com/~ff/chinagfwblog?a=uQCcVLu0a2w:E9eZoYupFig:TzevzKxY174\"><img border=\"0\" src=\"http://feeds.feedburner.com/~ff/chinagfwblog?d=TzevzKxY174\" /></a>\n</div>\n<p><img height=\"1\" src=\"http://feeds.feedburner.com/~r/chinagfwblog/~4/uQCcVLu0a2w\" width=\"1\" /></p>\n<p><small>本文由自动聚合程序取自网络，内容和观点不代表数字时代立场</small></p>\n<form method=\"POST\" action=\"http://www.feedblitz.com/f/f.fbz?AddNewUserDirect\">\n定期获得翻墙信息？<a href=\"http://www.feedblitz.com/f/?Sub=750556\">请电邮订阅数字时代</a> <br /><input name=\"EMAIL\" maxlength=\"64\" type=\"text\" size=\"25\" value=\"\"><br />\n<input name=\"FEEDID\" type=\"hidden\" value=\"750556\"><br />\n<input name=\"PUBLISHER\" type=\"hidden\" value=\"7485568\"><br />\n<input type=\"submit\" value=\"订阅!\"><br />\n</form>\n","author":547,"categories":[15300],"tags":[3764,19254,8795]}